[
    {
        "id": "52d0ba6e087a1e67",
        "type": "tab",
        "label": "Intern PLC",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6fc709f0bff89a08",
        "type": "tab",
        "label": "Entrades PLC",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "865b764148bf192a",
        "type": "tab",
        "label": "Comandaments",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d18f2ebb0dd49b18",
        "type": "tab",
        "label": "Alarms i Avaries",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ef7a0ef305dd237e",
        "type": "tab",
        "label": "Sortides PLC",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "fc4592acfe4a957a",
        "type": "tab",
        "label": "Modbus RTU",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "eb9b13ea99aacf08",
        "type": "tab",
        "label": "Tarifes",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "40e18b1fe1f3daf0",
        "type": "tab",
        "label": "Fuxa",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8dd0653486d5a6d4",
        "type": "tab",
        "label": "Com. Gronxadors",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "662afd5c1069609f",
        "type": "tab",
        "label": "Servidor IOT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "bb65a77b590797ae",
        "type": "group",
        "z": "40e18b1fe1f3daf0",
        "name": "Cap a Fuxa",
        "style": {
            "label": true
        },
        "nodes": [
            "04fc45b459865162",
            "d2919c6e39dd32a0",
            "a7d7bf97d5b09072",
            "19ff3bc73b0a78ad",
            "3dac1e306cd03dda",
            "8f3a7ee1892e2dbc",
            "23d9f608fc7a5dc5",
            "7f47caed5f5d3238",
            "e40fbc658e86ae6e",
            "262a494857426b31",
            "b5c2c0cad4e07807",
            "74633c378cf9c346",
            "a406553517367c83",
            "d33d91b3ec104220",
            "94396212841e66c0",
            "fb2929d25a504084",
            "ab0ba175788d46bc",
            "eb1d138b205f94ff",
            "6777f7904103cb6b",
            "753aa89ed9093bc1",
            "f91db0aeec5c2461",
            "b562dc251e5acd73",
            "31d3d976e537b1cc",
            "66cd77d6d302aa9a",
            "9fa3248947dea251",
            "1cd209dd3bc8f34c",
            "1977247eefe0893f",
            "9c79fae732a2d838",
            "b0eff72c6fc85d73"
        ],
        "x": 34,
        "y": 179,
        "w": 532,
        "h": 1162
    },
    {
        "id": "7e51bb6ae7b3ffd4",
        "type": "group",
        "z": "ef7a0ef305dd237e",
        "name": "Sortides PLC",
        "style": {
            "label": true
        },
        "nodes": [
            "8d85dfe2ba06b248",
            "571e4c9a782e5a6e"
        ],
        "x": 338,
        "y": 53,
        "w": 434,
        "h": 594
    },
    {
        "id": "9f9cc9de8822527d",
        "type": "group",
        "z": "fc4592acfe4a957a",
        "name": "UMF100 3 - Adr. 3",
        "style": {
            "label": true
        },
        "nodes": [
            "cc72850f6f3752bd",
            "4f52e74b53f842af",
            "aeafb92202bb68c2",
            "eef78d4a289849c7",
            "5f99e5cadd934fca",
            "dc193b3db33837fe",
            "e90cc7aa96138aae",
            "c00560783c1ac154",
            "007e9eca7c051f6f",
            "3ed18510a3c8d0d9",
            "2069b573f4670348",
            "bf043b459aade923",
            "a10dc5d7b31fab9c",
            "07353153e3f2f085",
            "bd2285d20773e9b8",
            "da85d9fe9bae8baf",
            "406f92387106f109",
            "1470d92199319171",
            "641e52862bc7933e",
            "b466fa669edbfb83",
            "ad73d76acf6c73a3",
            "3494f2549b23df41",
            "9b9980aee8ad4ae2",
            "57b1fa0e311759be",
            "b10f26b4dab72ee0",
            "4d21453f032a7021",
            "f60b957c17b696dd",
            "2cf7b3ca79860cd1",
            "04fd3c1cee533414",
            "1684eb5985d85c07",
            "770f87e3079d5ac9",
            "f33c0f31d9da3191",
            "ba1d108fd5547fe4",
            "2a124257113345fe",
            "c24a1b1d28aedd99",
            "cecf33eb5c422d79",
            "9b82113eecf059e2",
            "eedb9f8e6203f121",
            "87fb7338225ab238",
            "d3094fccfbc53052",
            "6e5fc8d172280392",
            "e3062c8453336511",
            "3c6fe822f6374303",
            "01ff2d47b01f76ec",
            "f39d868ab284f023",
            "aaab559685211d5e",
            "45831b0a736fdc76",
            "e9ceb38dbadc5c1d",
            "ab0abab9fe46a60a"
        ],
        "x": 54,
        "y": 1439,
        "w": 1032,
        "h": 822
    },
    {
        "id": "3d3d5d7c2a056bfc",
        "type": "group",
        "z": "fc4592acfe4a957a",
        "name": "UMF100 2 -  Adr. 2",
        "style": {
            "label": true
        },
        "nodes": [
            "14af1dccbfc83bbd",
            "a99632b53d2e59c0",
            "b2c8a990a1d7425d",
            "4848c4f2213139fc",
            "c406e9ce7f02a1f6",
            "a936e1cf0b51043e",
            "45d4bdb60859fe3f",
            "0fc17e6f705cf533",
            "cd847ac34958f124",
            "ee7acd1f498b0c54",
            "2fcdf6e11422de48",
            "c83c22f651029e6a",
            "8bef82416b8800c5",
            "61bfc6b3f0c18d37",
            "7254f01a2ba46baf",
            "a9b6dadb02e9660b",
            "4c4c1e8d9d935386",
            "79733c6749eabcb8",
            "93f0043dc20ced01",
            "af99dee93aebaf60"
        ],
        "x": 54,
        "y": 1159,
        "w": 1332,
        "h": 242
    },
    {
        "id": "d018bb775d102d7d",
        "type": "group",
        "z": "52d0ba6e087a1e67",
        "name": "Valors iterns PLC",
        "style": {
            "label": true,
            "stroke": "#ffdf7f"
        },
        "nodes": [
            "4fe39c1704264f52",
            "955d36898f8e86f4",
            "0dd3d844f9043a6c",
            "fc21d60935d3ec9a",
            "33f4621df84de10a",
            "ffa9f205a30331ee",
            "506890f13f9217c7",
            "25230cca09861bdd",
            "8a28edfc13be9256"
        ],
        "x": 54,
        "y": 59,
        "w": 632,
        "h": 302
    },
    {
        "id": "c45707e804209f80",
        "type": "group",
        "z": "fc4592acfe4a957a",
        "name": "Modbus analitzador APMIX5 adreça 6",
        "style": {
            "stroke": "#ff7f7f",
            "label": true
        },
        "nodes": [
            "2d895c362130e849",
            "749a2cce34a16d74",
            "55f57ee6678e4303",
            "96ada0a568f14d20",
            "bf6fd7c055d2fced",
            "f8afea510f09371f",
            "07d0f684c73b006b",
            "5d0833a2c377bed1",
            "2b0a8df684974e30",
            "f0e76529169db28f",
            "d27483b2591442a5",
            "ae62d11f90ef6956"
        ],
        "x": 54,
        "y": 2299,
        "w": 1032,
        "h": 222
    },
    {
        "id": "0af86376f01f059b",
        "type": "group",
        "z": "fc4592acfe4a957a",
        "name": "UMF100 1 -  Adr. 1",
        "style": {
            "label": true
        },
        "nodes": [
            "94f3684763b1c83a",
            "d14fdba1d1d63003",
            "f9168b180ea0e4f2",
            "98cb96487bd3fecf",
            "32de1f20250e2833",
            "faa316e39b736737",
            "8ad0e9fba9c0fd5f",
            "c999d4ca421f7cfc",
            "04caea1045385af9",
            "9a3aaf18a5bd0e1d",
            "92e44a03050101bc",
            "1919ec360abdb14a",
            "b4eb1fe4239d28f1",
            "3c3a9797cc9c9122",
            "01cda01328f69de6",
            "6f6046769b6253d4",
            "60e8fc448c532454",
            "a892b90efe1866f4",
            "0cfb0f567d1a8920",
            "ce6eabe2a6765311",
            "a18fc374aa452ba7",
            "77fd90961e9582de",
            "5398652ff646ee52",
            "0825d9b1aeb256f0",
            "0ff50efd5d9055f9",
            "1f5e5434db0c0962",
            "86c48526fd91ad8f",
            "bf7cb4835af53658",
            "c187fab1092b9f26",
            "ea6988142098c9e6",
            "d77934f20cae1061",
            "ccf252ad74f50700",
            "05d880f5d9079463",
            "eb5c1d43bd49d27c",
            "f738bd26e7c25dc9",
            "5aa89d80589e7fef",
            "f18f1bd64de377e9",
            "acf95e42e5160214",
            "ce9ba80c23329bc0",
            "210afc3dab0a138d",
            "9d801473557daee7",
            "e032bf41fe585d41",
            "8c403e48eb8ed1bf",
            "1cad5cfa0c91e91e",
            "4e2fc1a3ccb14648",
            "2e8b1b91881c3560",
            "dfdf734cea7e16a8",
            "98a71e3f420a438f",
            "2e36525c1bf8df64",
            "110cb313f288cd3f",
            "0d28c250e46f07f1",
            "c75fe7a88f872952",
            "3a4f3966dc568f33",
            "4dc731cac0fd5fca",
            "b4e39d8d51d7eb45"
        ],
        "x": 54,
        "y": 239,
        "w": 1372,
        "h": 882
    },
    {
        "id": "1af84737a891cd02",
        "type": "group",
        "z": "fc4592acfe4a957a",
        "name": "Litres per impuls cabalímetres",
        "style": {
            "label": true
        },
        "nodes": [
            "814d5a4510c71a63",
            "439d3548645f3dfe",
            "5b351e48f66d3302",
            "06171cb2d973ff23",
            "f2bbb34f0455641d",
            "9a8fbfe7bc1fc7b2",
            "4e1290f183b868b3",
            "768a6305ab9d74dc",
            "21e91e0ba475afdd",
            "b0793a3d1866d1c6",
            "d34a12912135cab5",
            "1f8384fe6ed02526",
            "93cf34f05385c29f",
            "2513aff14b06b452"
        ],
        "x": 54,
        "y": 19,
        "w": 872,
        "h": 202
    },
    {
        "id": "a712dd8b257c8e86",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "name": "",
        "style": {
            "stroke": "#9363b7",
            "label": true
        },
        "nodes": [
            "b7e684e429596127",
            "be573dfc4d2b591b",
            "0a939f855ae02809",
            "369ae52e332674d0",
            "84a7ab677a13b7bc",
            "e9b57f84ce9214ee",
            "4751cddaddd3e859",
            "4a478816f0cc719a",
            "05d4bac89bafedad",
            "206797ad850874c4",
            "18c18c2448cd6f9d",
            "3be2780e0dbf2d29",
            "f7517a36ecf8a9dc",
            "3397089ea5633f23",
            "963a44eaea22671f",
            "8d1758299f39521e",
            "a38aa2bb1d723e05",
            "af810a858a78a216",
            "e72ec901f4896f78",
            "b71786898ded190b",
            "29547304faaaad1e",
            "b12a30a1ae9a60ff",
            "3ef0d30e74135c18",
            "4d42cdf2c783f393",
            "6892330dbf87dee6"
        ],
        "x": 54,
        "y": 59,
        "w": 692,
        "h": 802
    },
    {
        "id": "5b1fd42b76148691",
        "type": "group",
        "z": "d18f2ebb0dd49b18",
        "name": "Gestió Alarmes",
        "style": {
            "stroke": "#ffC000",
            "label": true
        },
        "nodes": [
            "1ac9cab53cb49281",
            "ed041976a18576d6",
            "5bf0662f125320fd",
            "e56a3a47c24e2aa4",
            "6b4c05b030c9b261",
            "5904b7d1a358819d",
            "e605265d32c71e37",
            "cfa88792d9a5309c",
            "a53d412234c7fed4",
            "8f554023e31660c4",
            "cc287531db6f55f8",
            "60676bd90c2ee057",
            "898fefddadd18639",
            "2ef050a94d956eb6",
            "a0b3ac1b6b683dad",
            "7996b3639efa9659",
            "04be9a4c9d2b2f1c",
            "8e89356e3a61fdc9",
            "9960d8a8b0bd822b",
            "8b2c58bd588de1f1",
            "a045be917f981728",
            "4b80af1113bc09b9",
            "4a4f2291b9287f3b",
            "d286cbd0e9ed5974",
            "c917838460560b78",
            "3c012910d24f8fb7",
            "2353f55dbc8973bc",
            "37e6c59c457fda88",
            "f219495dee97cab1",
            "29090770e2d15b7a",
            "1fdca9d6bdba6c2b",
            "b6ed100552d50d2c",
            "6fd3783945c74a87",
            "b53eb0e8cc5e1990",
            "7fc8576cc29ba003",
            "8c1a6452a6af5347",
            "fa28768e31d2bbaf",
            "4d05a6529c7b8c5f",
            "146aee312e69e885",
            "6d16188f1832826e",
            "28276088bda35a1b",
            "2d15227cacc659a1",
            "916ccf376efafaab",
            "048d9bfbfde41581",
            "7c224c7ba4282ad7",
            "04a805abe82df77e",
            "eee8081ee98a00fd",
            "ebadd3178da195ca",
            "de5a9b582a4ca150",
            "7fe5ca4ec8fc3f2e",
            "c8fb9404f6413073",
            "60323119bce2da13",
            "f36c99c4a86caebf",
            "9ce032dcb701e3ed",
            "275578c46c6ea819",
            "350ff9af66e5c98f",
            "e1450bc724165f11",
            "15657b11d2bcddea",
            "90014965f6231246",
            "c52b32984fa2e00c",
            "441ebda394362030",
            "b147526d5c7143e6",
            "6394a22c6ab26bce",
            "6ed5661ee8f1b1e5",
            "9505bb88fe09d535",
            "9e6eb34166afe1f1",
            "a83c323db11dcdda",
            "b519478aca611c23",
            "92c03b943d07d451",
            "16d95991119c7f7b",
            "976602bd01d91278",
            "a06ab65047f7ba38",
            "bd4738fa49fe2644",
            "79cbb6c0405e5104",
            "926b7d3ead2f2dc5",
            "81387e3bce9956aa",
            "78e7b0f59c25c76b",
            "f94001df556cbb34",
            "4d5875d35b2a8742",
            "1b2597b9ee6a918e",
            "31b0c919dd11519a",
            "f61594c2625d6b64",
            "912ef5187eb25296",
            "e049c85ce6305d4a"
        ],
        "x": 54,
        "y": 579,
        "w": 1212,
        "h": 1422
    },
    {
        "id": "9b2933ab4b100a51",
        "type": "group",
        "z": "40e18b1fe1f3daf0",
        "name": "Figures FUXA",
        "style": {
            "label": true
        },
        "nodes": [
            "aeeacf7c01a35926",
            "424466ba0116847a",
            "bde60443c61fba26",
            "598776789d6d7398",
            "2b11395eb3163ce0",
            "0f78d7bb1dc31819",
            "eaa365e88ca7fec8",
            "d78042691c6b5106",
            "fdf211275312083f",
            "7c2117af6ffa5e1f",
            "82ac2b5809546802",
            "a6426f54e64e5c5f",
            "d639ddfbdddd5d8d",
            "22204fce814e324c",
            "b61faa7a1e44d363",
            "e82d38e9874c4fed",
            "ded19ab0b96ce00e",
            "4dc224b742881706",
            "70af1b8d33229058",
            "c036382d6301a932",
            "1365ad359f498a50",
            "c4f3543a077fc107",
            "84253d667c92c4ab",
            "86d5a60c62150951",
            "d94bd775abfefe7d",
            "cce227b1e7f16cda",
            "865984d4b65ebd2c",
            "65bd5ede554da3a2",
            "8115fd4ac3daad53",
            "7d9ebd0478b88400",
            "e9f7b5f871d5b96b",
            "25050b4ec8b71a61",
            "2c64f8fef94e7c5f",
            "b4922ae5fc09368d",
            "84df56a4af2189bc",
            "2d33780ddd8e011e",
            "0ba354eeaad19f59",
            "9ac0d4c5f64e2b69",
            "14dc0ad125c313e2",
            "0432de45cc1789a8",
            "781b0791bbcbeb8a",
            "43901cb417d1faa8",
            "553efaa4fa20997f",
            "2e538c8c7354afb1",
            "9a53c76801318abc",
            "7b1c55528750f79e",
            "e69157330b5b7ed5",
            "06a35071943a2857",
            "9b64fb6ae176c8b7",
            "7b9079fa3136dd56",
            "ea3709af16568a9c",
            "5fb6d76bd545190d",
            "528aef13fee9e653",
            "5f6c5144846461df",
            "dd77912c3babf31b",
            "162b236edd1933f0",
            "56756b516b412091",
            "031ec2c01610c9de",
            "05e6e3ae7d9b2821",
            "d92d9c1c9e097d52",
            "099149c2e5d77022",
            "1120662f3bf57657",
            "2039c47e40dcd6cc",
            "cb70d1db07a4ba7c",
            "f8b7bd3bbc7d6ad3",
            "28ad7edf37fb7e62",
            "9ed6c64c4af5230c",
            "86d77ec2548268e8",
            "4e4d19d10cec1821",
            "68764693c90b3b2d",
            "7f011332338c0d48",
            "a25d33a88bfe6320",
            "4c06bee04a916f91",
            "f32c43c6f3ecc658",
            "d3c2aa1172d8a70a",
            "ea04c7dba23a18e7",
            "666238e7c8700130",
            "9a6e9b30f93a31ef",
            "bb24a4a078a61b6d",
            "dc78747e9b84535e",
            "602b57748f526616",
            "61141507483c3a36",
            "5a0aa88a34e300cf",
            "8fa9fcc33a02eac8",
            "1ff441b2af3c8acb",
            "df27a5ae053385e2",
            "4768ed38c3523177",
            "413094742396bb74",
            "138dd04729f0d4c4",
            "20fb7b78fae9b64a",
            "cdbe6bb517ecafa9",
            "a19761b209d4ee03",
            "5b30b17b06ac026e",
            "8b000766422b857e",
            "f15a56a11bfbbbb9",
            "516ccca22c7fa335",
            "701dec0a9486547c",
            "1b0f6ad09018793d",
            "b3c26445a8934bdc",
            "98c96f5eb4f1135b",
            "0b2894401c66e83e",
            "b887c692236a8389",
            "7d2d124a0341bb7f",
            "a1e91c3dbc18a52c",
            "660c57591565019d",
            "f84fcd17d8c0ee5f",
            "a84f37b58e127470",
            "330b441c8af70f13",
            "5e30e1447d82469d"
        ],
        "x": 34,
        "y": 1339,
        "w": 1032,
        "h": 1602
    },
    {
        "id": "93352943ee6bd00d",
        "type": "group",
        "z": "662afd5c1069609f",
        "name": "Alarmes a IoT",
        "style": {
            "label": true,
            "stroke": "#ff0000"
        },
        "nodes": [
            "cc466b131a3fe421",
            "5397f151a5635631",
            "a25ddbe3e6ef01a2",
            "2f9ae7dc3b6fafb3",
            "495a431e5111cfb7",
            "4aa106a804d0ac30",
            "e09c919abecda326",
            "68f74368126554e0",
            "785df7b544ca1c83",
            "aced0244f922a829",
            "6d23c1af49a8f075",
            "4c25f418d417be8f",
            "5d182173e44988ca",
            "a587b689e5d89c7e",
            "8b291ddae27cadb4",
            "43879a5e3a4478f3",
            "4a69ac42fb2d682d",
            "7a199ee782089fae",
            "0284cf53d1ae65f9",
            "7102a7ebf67f34e4",
            "8dbfb8ff46ea88e9",
            "afc5e099ef8d615b",
            "ead55d8c05b5050b",
            "7175c9a553d6840b",
            "6d42b9c6bf707966",
            "717b669696b5e1fc",
            "b089ebdce1522d67",
            "69842e0998645569",
            "8f772724a18678ac",
            "2296f8871160ed80",
            "4672e11d020b631a",
            "48a6f14c79b9bd59",
            "c94ee8b5ad1a43b7",
            "47a99886f825c60a",
            "c88a13287c6d9f52",
            "6ec9fdd9e685454f",
            "fb81f758f57ed388",
            "e0636af442fec5f7",
            "586f7303bf542c2c",
            "45d50c16e79fb779",
            "fbc068f96f8acf12",
            "4f3ace90c599d4af",
            "81dae85914a79ef6",
            "1dd3eaf9f8fe80f9",
            "78bcb99cdbd6b822"
        ],
        "x": 48,
        "y": -7,
        "w": 1384,
        "h": 3128
    },
    {
        "id": "0658c68795d7bd56",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "db6c711a74d1b0e7",
            "c2560d931447189e",
            "48d01962275e47b8",
            "c4bbb9461798770c",
            "42c1f1f8bf382e04",
            "04fd885e4e38df97",
            "bdf08ad19b98dfc7",
            "41bb0d82f16b107f",
            "05d845e77138443f",
            "2edc079c545c19d6",
            "5d040724ed331a28",
            "a14827af9761e311",
            "fe1827b7e3539df9",
            "e0172a4b4ec010db",
            "7a3c77873533a531",
            "ee3b0d124d48e5a3",
            "2aba4d08a93efca4",
            "79beda12b8aac90f",
            "f92765111d51c7e1",
            "9fe09b2c99fed96b",
            "cb2e93e196aa08f7",
            "f6d2b70ee28b5efc",
            "7a4f8246c10a71e8",
            "caf3e0c5eb64c0c5",
            "c042cf11302e1961",
            "740745b695e7323c",
            "b88461942bb7b0ad"
        ],
        "x": 14,
        "y": 979,
        "w": 1792,
        "h": 462
    },
    {
        "id": "5fbb08b7a4506c32",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "90706d5da1e322c3",
            "501b61821cf799bb",
            "677378e3c80b2bab",
            "5fbf6df9c5e6e459",
            "4b17132729be60cc",
            "39f11a06e634b97e",
            "0ac6f2790c4ca9f8",
            "f8205b4eb106ece9",
            "3daa863b766e1311"
        ],
        "x": 14,
        "y": 19,
        "w": 1292,
        "h": 202
    },
    {
        "id": "9f6f84c83a27a3f2",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "a2623de6ec77b98b",
            "c925d3f8d0817497",
            "b3369edaad65f468",
            "796a18f1f3952c05",
            "6f0729d46df87b2b",
            "e4e20e31ac739021"
        ],
        "x": 14,
        "y": 239,
        "w": 872,
        "h": 222
    },
    {
        "id": "4bddc11fb1f5bd9e",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "ce4974e81f3699d8",
            "f6bac9041f830cb1",
            "76e3b63dccd719b6",
            "155717848e4a27a9",
            "88908eda396684f1",
            "2e47c1114bd5ae68",
            "3c7195fbef8be291",
            "c451b8460146d613",
            "00f77a3368a906a5",
            "aeff316d530568fc",
            "283c38c5be2589f7",
            "dd2743c00e44cae4"
        ],
        "x": 14,
        "y": 479,
        "w": 1472,
        "h": 222
    },
    {
        "id": "2a6a05742fc37b27",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "8f59f19194752c0b",
            "0b5889a5ce4beddb",
            "52cb5acd1b5c23e9",
            "404b15da50784bc5",
            "21d6f238496e0d55",
            "bc45153c192786a0",
            "1ce041eabfa66fe9",
            "fc02021521d30a2c",
            "8cfa644a5be2a76a",
            "353bb8098c5ebe0b",
            "204be802af82daa1",
            "c275f8a662e9f3db",
            "97867745a80dfadc"
        ],
        "x": 14,
        "y": 719,
        "w": 1712,
        "h": 242
    },
    {
        "id": "72e0644bd5809e84",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "2bdcedbee5b11407",
            "3da63000dfd1a253",
            "70954475831d28a3",
            "f8a99b321dfa2741",
            "bac1332bfbe9c927",
            "5882e0c3cc0dda6c",
            "ced91b66ba2392eb",
            "23bfab6a01457111",
            "1efd1b6e99e282d5",
            "587a56754b388070",
            "e5dea343ebb10507",
            "7eae762a2cec81cf",
            "89cb140b6fe37e7c",
            "a43617c1e9173798"
        ],
        "x": 14,
        "y": 1459,
        "w": 1692,
        "h": 202
    },
    {
        "id": "feb6db95aaf4e6ee",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "ca750438ee28474d",
            "bb5e6ef688da1875",
            "a1d3b2e8804cb8be",
            "7f42d378a5280d97",
            "408ac27785445e78",
            "fbe6352d18e6ecb9",
            "db3b6a6feb4307a8",
            "caa72a0ead0f49d3",
            "ea97b7bfe04122b5",
            "0efb867b7f313e5b",
            "2bc8e87d990d054c",
            "261b18cf91357610",
            "9748978c1100df96",
            "8de37b3ec4d85f23",
            "170c0fa016ec696b",
            "79ba0c9955a0acc9",
            "cb531c65fe0f2d6f",
            "d996b1a7a31a947f",
            "3e76542edbef3c3f",
            "85a4c7c64d3681b3",
            "bb7449cbdcd8e9f8",
            "4e6dde2785dec7d3",
            "1989440e88e393cd",
            "5e98709eb678a7c3"
        ],
        "x": 14,
        "y": 1679,
        "w": 1672,
        "h": 362
    },
    {
        "id": "f6c602e4d12c6c2d",
        "type": "group",
        "z": "865b764148bf192a",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "9882aaa9036e8d24",
            "7138e8eab9f90bf1",
            "3313ee015ff2d338",
            "fb14cdde2fd5a3aa",
            "76eec778bd72fc01",
            "5830616edff0cd5b",
            "2afbbd9b398673cb",
            "2c8fe4e3707f3ca5",
            "3ff62ed255ec050f",
            "38989b74933ddfd1",
            "320961b6e1c1c011",
            "f116c0b8fa12f614",
            "67b90f344940bd7d",
            "d8aa48a006de49e0"
        ],
        "x": 14,
        "y": 2059,
        "w": 1692,
        "h": 222
    },
    {
        "id": "88010a504113ec9e",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "d77eed99aa02e76c",
            "271f5abe19fded0c",
            "4df7010725549e38",
            "180d881496a243ca",
            "1c5d544f2907841e",
            "3e8c794b53f57f8c",
            "9afc1104e379bff5",
            "de8163150711ca15",
            "10915b5eaad452ca",
            "15bff8b04cabf591",
            "aa32301e283303ca",
            "547b5d0daa89f799",
            "6ea4871330afd57c",
            "210561599986f771",
            "b2ce1236ce0bf052",
            "882fac419d612ec4",
            "5b1cdf0e5c62d6a5",
            "1f91fa6d48882425",
            "1a795361bd83e434",
            "26772bb4b6611d30",
            "9b6861ea17c1bfcb"
        ],
        "x": 54,
        "y": 879,
        "w": 1584,
        "h": 2062
    },
    {
        "id": "33361096e981ad94",
        "type": "group",
        "z": "d18f2ebb0dd49b18",
        "name": "Gestio avaries",
        "style": {
            "label": true
        },
        "nodes": [
            "c806efbe3d419c66",
            "22fe4883f2e9b762",
            "630c5f6e02691325",
            "f024987ad8501b38",
            "1bc32d24587bb201",
            "1116d67f9d328f79",
            "26ba5321978346dc",
            "02ee2514deba4c09",
            "44a3f388aecc9c20",
            "bb147fe3a5514daa",
            "45e04f6b17f211b3",
            "52710fe6f83f43ca",
            "116b939df40db327"
        ],
        "x": 54,
        "y": 19,
        "w": 852,
        "h": 542
    },
    {
        "id": "93e274aebef92385",
        "type": "group",
        "z": "d18f2ebb0dd49b18",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "085377df68fd8cbe",
            "7b74f78f5bdc4652",
            "060b54794724b332",
            "15a110f912e0a009",
            "4b88787f0a9799b9",
            "6ffd69542da5e62d",
            "4b7a70721ccba21c",
            "67bd2b508a0aeec0",
            "cbea85b2f651f72d",
            "e55b600f53fa45de",
            "20365a7e8ae444b0",
            "27608e581ba3dce5",
            "304b45427619085b",
            "bc8c927b0b6cd1be",
            "3e8ad2322d8115c3",
            "c238b5308d959d6e"
        ],
        "x": 74,
        "y": 2179,
        "w": 792,
        "h": 422
    },
    {
        "id": "4f7fe2aadae19e9a",
        "type": "group",
        "z": "662afd5c1069609f",
        "name": "Consum dades a IoT",
        "style": {
            "stroke": "#92d04f",
            "label": true,
            "fill-opacity": "0.36"
        },
        "nodes": [
            "47e456f7bbd6e9bc",
            "5ca8b0088f5cc021",
            "af04943cadfda188",
            "d737981c2463da04",
            "2c3d9b508ef0467d",
            "0885de2cf550d6cf",
            "b1bc22d3d5938734",
            "13a4ee9b7a6c48ca",
            "c467fb78c281be0a",
            "d8e309b15ccd7db6",
            "dcd38ebc6686396f",
            "39e60aa5c000a05e",
            "c48126f67e54a4a7",
            "3e5c26ce15f85a43",
            "0ca6df7acc5282d7",
            "65ca13542cb42f72",
            "c8be1e4288137fc8",
            "aadb51c673295760",
            "edbd16e2cd352173",
            "6c947258bf249b62",
            "499dffa763011a4e",
            "8ee98e89a952a1f5",
            "9cf61e66d0bb0943",
            "0135665d0e36716c",
            "19387f63c14229ae"
        ],
        "x": 44,
        "y": 3379,
        "w": 1202,
        "h": 642
    },
    {
        "id": "908439d0cf7debb6",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "style": {
            "stroke": "#2e333a",
            "stroke-opacity": "1",
            "fill": "#383c45",
            "fill-opacity": "0.5",
            "label": true,
            "label-position": "nw",
            "color": "#dddddd"
        },
        "nodes": [
            "3f43c11f7e1df0a5",
            "95d64cdbdf4f9c26",
            "703f055e9a59a8ba",
            "3c89f3b4a2805c1b",
            "bcbb09422db294e6",
            "ed5c4208d1f33df7",
            "6ff6421b2ad99fdf",
            "6308aea184cd9837",
            "3a5a57e1bc72067d",
            "8b5f4a1b90dab8a5",
            "85889f3744b02e66",
            "c597db9a0c089032",
            "23a504b4cb3295f3",
            "942d7d7912449075",
            "aee1904ad09e3b98",
            "3acd07d984b0065d",
            "19ace7ffd213ca48",
            "c88ced4cbcdd4e01",
            "6bd566e482ef5572",
            "ba7f9b20aa769784",
            "1acba6be2522903d",
            "2ef041f398de2603",
            "0ef6cb2ba63b427b",
            "d48c937c4e191216",
            "a105ab66b8f3c394",
            "919ccdf52fef9d5c",
            "5f64ed2d85c8ec46",
            "7801467ccf18bf07",
            "7de9cdab3affadba",
            "7adb6c2d9bd6c84d",
            "4b9d1d12e3c2dad0",
            "36cc6c8f4df7600b",
            "cdc5b71b2c1efe07"
        ],
        "x": 54,
        "y": 2979,
        "w": 1852,
        "h": 2082
    },
    {
        "id": "8827eb5e5f892be4",
        "type": "group",
        "z": "865b764148bf192a",
        "name": "Gestió Alarma Intrusió i il·luminació ",
        "style": {
            "stroke": "#ffff00",
            "label": true
        },
        "nodes": [
            "db7b7e9ef93ca0bb",
            "3d5fa6a41e56277b",
            "fd9abced55f13214",
            "3c9fd372ddd4c8dc",
            "19c483e0d212fef8",
            "912588fe6e334f05",
            "10b9e9f350dd9663",
            "6d02e8035c0fa16d",
            "6e4d2fcc88533c48",
            "8905a24277b25cb8",
            "a9a8a9d868b3d78a",
            "fe62b1bd0f3472ba",
            "fbcd4e7503b33a38",
            "b48a7b1a4a0e0ef3",
            "8c77a1da92a24e6d",
            "894df740e71133a7",
            "aea0ca39b6f2727d",
            "6bb0f1e785f2b1b1",
            "9de5aea7ffaf444e",
            "907b12acdd33c60b"
        ],
        "x": 14,
        "y": 2319,
        "w": 1452,
        "h": 262
    },
    {
        "id": "c88a13287c6d9f52",
        "type": "group",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "Lectures a IoT",
        "style": {
            "label": true
        },
        "nodes": [
            "640b1768bd3a9056",
            "777d64a2cf13897c",
            "831f391c3ded6798",
            "6f79b77431535226",
            "e5aa2df05f321711",
            "50e5abfb2473be40",
            "427cdd1862b91ffd",
            "6a6e2a740a66c159",
            "fb115ec2915862fb",
            "f63d088a7812546b",
            "4a377b266eb11c44",
            "e14cdc8739cbfc27",
            "1a60d2e72354b7af",
            "6805f4b5e71b90c9",
            "cd6cabb0f9dc4e9a",
            "dd382a812fcef6ac",
            "6fb0d7af9a941589",
            "39acaa7479a8aa70",
            "86553e272f8c2498",
            "e8cae876fe8472fa",
            "d3f82f354731ddf1",
            "6707384ce311e2f8",
            "410bdc25e02b88c5",
            "b046d82e9f17db0a",
            "a5500b91b3850d85",
            "8dad1bcba8e03dde",
            "9acad5adabbafee5",
            "29a3ca4a46af87c8",
            "2c19eda128bcff60",
            "dce3672fbfeae62a",
            "dd0f7851061befd8",
            "aca477319dbc376a",
            "f224b0b821b93998",
            "4c81ec1b57dec879",
            "5db79808c8912f8b",
            "91f7ef66bf40c405",
            "b5f9c97e7cb02dbf",
            "6f33383d7d1c1bb3",
            "b624897340149a4b",
            "66814c011c6e3f10",
            "aac47ec3e032836b",
            "39d4ac0f24c3c643",
            "7d0381cb96158ce8",
            "7d974726203c1ed4",
            "c5df6b9793260414",
            "cd358c42534b0852",
            "1b47997ecd50431a",
            "efe9cc07ccd9fcce",
            "2b9083b9987b580c",
            "ae996ce20e01fc7c",
            "f3df84ad07f85df8",
            "dca097ed94b2bfe0",
            "ad31ed0566f84c64",
            "c97f0cd058f021e9",
            "8eecb4aac6aef235",
            "adaf29b50d8e980d",
            "579b401e92969c6e",
            "38adba96a0f6083b",
            "b6ca59bf80053b31",
            "95e83e8b5e6d0d98",
            "bd81f86c6bda5ca6",
            "30c7455c74627e2e",
            "c00d126f4879a0a8",
            "237c98b6feb2d065",
            "df1b6a35b9169a22",
            "543cbc518246f985",
            "5a6836f48d5ee18d",
            "b99309940bdd81da",
            "8d3ebbf4011b2fe6",
            "788dcce653000f77",
            "0abab518350d3d42",
            "d62b9dfa0cf69785",
            "7410787cfbc967e0",
            "e8d482a96640b2ee",
            "19c5ecdde8c04049",
            "8e2826beec632698",
            "20e0d67dd92368e0",
            "e31c874715762ffd",
            "438190ae7d37face"
        ],
        "x": 74,
        "y": 19,
        "w": 1332,
        "h": 1782
    },
    {
        "id": "8d85dfe2ba06b248",
        "type": "group",
        "z": "ef7a0ef305dd237e",
        "g": "7e51bb6ae7b3ffd4",
        "name": "Sortides Zona A",
        "style": {
            "label": true
        },
        "nodes": [
            "c8e5256f53247cd8",
            "1fd0653b9084dabe",
            "46826c015d39b932",
            "cb4d00e0cd32d6a5",
            "f8b180d5673e9f5e",
            "6298ba6219eea5e7",
            "2552f743350cb4a5",
            "53b737ac84109d26"
        ],
        "x": 364,
        "y": 79,
        "w": 382,
        "h": 362
    },
    {
        "id": "571e4c9a782e5a6e",
        "type": "group",
        "z": "ef7a0ef305dd237e",
        "g": "7e51bb6ae7b3ffd4",
        "name": "Sortides Zona B",
        "style": {
            "label": true
        },
        "nodes": [
            "571d619347f63776",
            "cc34bd6a52a5158e",
            "3ce168dec0734a7b"
        ],
        "x": 374,
        "y": 459,
        "w": 332,
        "h": 162
    },
    {
        "id": "1c5d544f2907841e",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "Selecció Tarifes",
        "style": {
            "stroke": "#000000",
            "label": true,
            "fill-opacity": "0.6",
            "color": "#ffffff"
        },
        "nodes": [
            "cfed5fda317bd14b",
            "ab77213ae3bfea3c",
            "3f0568e01967c718",
            "067cc3e74e0af4eb",
            "e21fd0c0daba2060",
            "7b3e0b8e6384ccfe",
            "d4faaaa6b8993ac8",
            "e6e50a2d2882c50e",
            "d3c1c5fa026ef173",
            "049aceb3ef48c63b",
            "f9ebc10fda039ab0",
            "83f22432830419ef",
            "314a5418a82771dc",
            "2d161c1ee5ee8c5d",
            "7c80da2c2f6e8e3b",
            "f5786486776cff30",
            "544d3002a910df1d",
            "20d0cc62df7a2282",
            "73da721737fa5282",
            "b85af6dc0a4f5396"
        ],
        "x": 134,
        "y": 954,
        "w": 1212,
        "h": 347
    },
    {
        "id": "3e8c794b53f57f8c",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "dipòsit 1",
        "style": {
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "327594619ddb9dad",
            "5ece3380e8a58b91",
            "cec8714353811125"
        ],
        "x": 634,
        "y": 1333,
        "w": 978,
        "h": 634
    },
    {
        "id": "9afc1104e379bff5",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "dipòsit 2",
        "style": {
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "d59cb02be0e850b3",
            "d72fd464c0ef7527"
        ],
        "x": 634,
        "y": 1993,
        "w": 978,
        "h": 334
    },
    {
        "id": "7801467ccf18bf07",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "Selecció Tarifes",
        "style": {
            "stroke": "#000000",
            "label": true,
            "fill-opacity": "0.6",
            "color": "#ffffff"
        },
        "nodes": [
            "91bfb25de9571ab3",
            "26d86fade7720796",
            "ca5c1e6f32f7b949",
            "0be5df2983351baf",
            "91505f49d04be116",
            "5713319853ae2b3d",
            "27ccc78a8c6375ca",
            "e7c9dbd2f3e074e3",
            "f9e9dd8717bcfba8",
            "b8e2e4b3d18379bf",
            "1a3ac9eebcea46e3",
            "ea88459cda2633df",
            "99521499dfec490e",
            "a2ca08f3f4de84d6",
            "ad1ff4d00ec3c415",
            "5123eac7279abc0a",
            "5ca48b55ea6252d0",
            "e07e89cc901e91bd",
            "9985aa6372fdbbe5",
            "33246b0567f06e20"
        ],
        "x": 134,
        "y": 3054,
        "w": 1212,
        "h": 347
    },
    {
        "id": "7de9cdab3affadba",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "dipòsit 2",
        "style": {
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "0b5ca5159c636e50",
            "05ab6833a2e8eaac"
        ],
        "x": 634,
        "y": 4093,
        "w": 978,
        "h": 334
    },
    {
        "id": "7adb6c2d9bd6c84d",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "Hivern",
        "style": {
            "label": true
        },
        "nodes": [
            "29279d327a751e7b",
            "80deeba20765c6f7",
            "742f81d4d4a203ac",
            "d9ba2683fc099a82",
            "a8e9e19f153ec716",
            "bbafafeb3f18e823",
            "f2c60cd3ce1d35ce",
            "0bd4774426cf9782",
            "d54998289403d7eb",
            "d19c33f3ce24bcbe",
            "38e18f0bdb5e518d",
            "d8fe78a93aec3ebc"
        ],
        "x": 854,
        "y": 4399,
        "w": 732,
        "h": 282
    },
    {
        "id": "5ece3380e8a58b91",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "3e8c794b53f57f8c",
        "name": "estiu",
        "style": {
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "a90f0da08743fbf2",
            "b4a3d7e7ebdbf962",
            "89d5f9cf1db8308b",
            "02ac5a41f46f6480",
            "a366e67e0e586d6e",
            "03ab7a4851f647ed",
            "6a1c742da348d703",
            "471ac6f85b1f19b0",
            "2ce34d4bf6972d28",
            "9952ac00a2403b10",
            "bce18556eb1078ed",
            "ac1653894dd34e92"
        ],
        "x": 854,
        "y": 1359,
        "w": 732,
        "h": 282
    },
    {
        "id": "cec8714353811125",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "3e8c794b53f57f8c",
        "name": "hivern",
        "style": {
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "c5199db2b7325552",
            "fe46476f3662ef15",
            "8c21e302d6885e49",
            "ea2c5936b5160db5",
            "3445228d68550abd",
            "e56530dcab55652e",
            "8a779688e96d6cf8",
            "f8e5251aafe249b2",
            "6b4c8e3afb127695",
            "7f3d2623575c4775",
            "8ea568b05ad7192e",
            "51516c7bf95661c0"
        ],
        "x": 854,
        "y": 1659,
        "w": 732,
        "h": 282
    },
    {
        "id": "d72fd464c0ef7527",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "9afc1104e379bff5",
        "name": "estiu",
        "style": {
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "dba19fd762ff8a06",
            "4a323e10da5837e3",
            "767d40f753b369da",
            "2fd98b4ab1d93e4c",
            "136795241fd91158",
            "5e56be75c7ec6651",
            "7597064351c49ad6",
            "4725bf42d8ee0d83",
            "ea0d058132e917d9",
            "8aab9a861f735984",
            "3acb31294159e642",
            "5728e2d84958d41c"
        ],
        "x": 854,
        "y": 2019,
        "w": 732,
        "h": 282
    },
    {
        "id": "05ab6833a2e8eaac",
        "type": "group",
        "z": "eb9b13ea99aacf08",
        "g": "7de9cdab3affadba",
        "name": "estiu",
        "style": {
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "6e022686fe68340d",
            "8e444bbc9ed99813",
            "2247c07c8dbca0ab",
            "9845c2151afc05b8",
            "ba515348cd99b405",
            "303111a29d843174",
            "f89dfce910632cf9",
            "3e79ee1c96e0e26f",
            "bf21e39b961ee4db",
            "a0dc938a24a46a3b",
            "d734a1b9ac8017f6",
            "3d28013ffecd5b27"
        ],
        "x": 854,
        "y": 4119,
        "w": 732,
        "h": 282
    },
    {
        "id": "237c98b6feb2d065",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 1040,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "df1b6a35b9169a22",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 1180,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "543cbc518246f985",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 900,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "5a6836f48d5ee18d",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 820,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "b99309940bdd81da",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 740,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "8d3ebbf4011b2fe6",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 660,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "788dcce653000f77",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 580,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "0abab518350d3d42",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 500,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "d62b9dfa0cf69785",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 420,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "7410787cfbc967e0",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 860,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "e8d482a96640b2ee",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 780,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "19c5ecdde8c04049",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 700,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "8e2826beec632698",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 620,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "20e0d67dd92368e0",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 540,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "e31c874715762ffd",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 460,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "438190ae7d37face",
        "type": "junction",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "x": 700,
        "y": 380,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "7a3c77873533a531",
        "type": "junction",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "x": 1160,
        "y": 1200,
        "wires": [
            [
                "e0172a4b4ec010db"
            ]
        ]
    },
    {
        "id": "ee3b0d124d48e5a3",
        "type": "junction",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "x": 1200,
        "y": 1120,
        "wires": [
            [
                "e0172a4b4ec010db"
            ]
        ]
    },
    {
        "id": "89cb140b6fe37e7c",
        "type": "junction",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "x": 1340,
        "y": 1560,
        "wires": [
            [
                "7eae762a2cec81cf"
            ]
        ]
    },
    {
        "id": "1989440e88e393cd",
        "type": "junction",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "x": 1300,
        "y": 1800,
        "wires": [
            [
                "261b18cf91357610"
            ]
        ]
    },
    {
        "id": "67b90f344940bd7d",
        "type": "junction",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "x": 1320,
        "y": 2180,
        "wires": [
            [
                "320961b6e1c1c011"
            ]
        ]
    },
    {
        "id": "aa32301e283303ca",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "x": 160,
        "y": 2660,
        "wires": [
            [
                "6ea4871330afd57c"
            ]
        ]
    },
    {
        "id": "547b5d0daa89f799",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "x": 160,
        "y": 2800,
        "wires": [
            [
                "210561599986f771"
            ]
        ]
    },
    {
        "id": "7c80da2c2f6e8e3b",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "x": 640,
        "y": 980,
        "wires": [
            [
                "f5786486776cff30"
            ]
        ]
    },
    {
        "id": "f5786486776cff30",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "x": 1180,
        "y": 980,
        "wires": [
            [
                "b85af6dc0a4f5396"
            ]
        ]
    },
    {
        "id": "544d3002a910df1d",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "x": 640,
        "y": 1020,
        "wires": [
            [
                "d4faaaa6b8993ac8",
                "7b3e0b8e6384ccfe"
            ]
        ]
    },
    {
        "id": "ad1ff4d00ec3c415",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "x": 640,
        "y": 3080,
        "wires": [
            [
                "5123eac7279abc0a"
            ]
        ]
    },
    {
        "id": "5123eac7279abc0a",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "x": 1180,
        "y": 3080,
        "wires": [
            [
                "33246b0567f06e20"
            ]
        ]
    },
    {
        "id": "5ca48b55ea6252d0",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "x": 640,
        "y": 3120,
        "wires": [
            [
                "27ccc78a8c6375ca",
                "5713319853ae2b3d"
            ]
        ]
    },
    {
        "id": "6308aea184cd9837",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "x": 160,
        "y": 4760,
        "wires": [
            [
                "8b5f4a1b90dab8a5"
            ]
        ]
    },
    {
        "id": "3a5a57e1bc72067d",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "x": 160,
        "y": 4900,
        "wires": [
            [
                "85889f3744b02e66"
            ]
        ]
    },
    {
        "id": "c88ced4cbcdd4e01",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "x": 480,
        "y": 5020,
        "wires": [
            [
                "ba7f9b20aa769784"
            ]
        ]
    },
    {
        "id": "ba7f9b20aa769784",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "x": 1140,
        "y": 5020,
        "wires": [
            [
                "c597db9a0c089032"
            ]
        ]
    },
    {
        "id": "0ef6cb2ba63b427b",
        "type": "junction",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "x": 1080,
        "y": 4880,
        "wires": [
            [
                "ba7f9b20aa769784"
            ]
        ]
    },
    {
        "id": "0fb89c37278c5b07",
        "type": "rpiplc-config",
        "isCustom": false,
        "version": "RPIPLC_V4",
        "model": "RPIPLC_42",
        "name": "PLC42"
    },
    {
        "id": "be25cdc18f19b7bc",
        "type": "mqtt-broker",
        "name": "PLC",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "6975f089b473afa8",
        "type": "modbus-client",
        "name": "UMF 1",
        "clienttype": "serial",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttySC2",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "19200",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "200",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "",
        "commandDelay": 1,
        "clientTimeout": 2000,
        "reconnectOnTimeout": true,
        "reconnectTimeout": 500,
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "serial_port",
        "type": "serial-port",
        "name": "",
        "serialport": "/dev/ttySC2",
        "serialbaud": "57600",
        "databits": "8",
        "parity": "none",
        "stopbits": "1",
        "waitfor": "",
        "newline": "\\n",
        "bin": "false",
        "out": "char",
        "addchar": "false",
        "responsetimeout": ""
    },
    {
        "id": "e641fe5b1175d5b1",
        "type": "mqtt-broker",
        "name": "",
        "broker": "10.10.3.210",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "6985549c709bf918",
        "type": "mqtt-broker",
        "name": "",
        "broker": "10.8.17.13",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "129adc3430aeda3b",
        "type": "modbus-client",
        "name": "SC3",
        "clienttype": "serial",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttySC3",
        "serialType": "RTU",
        "serialBaudrate": "19200",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "",
        "commandDelay": 1,
        "clientTimeout": 1000,
        "reconnectOnTimeout": true,
        "reconnectTimeout": 2000,
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "ad0b6903ab51bbcb",
        "type": "mqtt-broker",
        "name": "ServidorIOT",
        "broker": "10.8.17.13",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "3",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "PLC0001_CanPrat",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "54dce18c1b50d37a",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Dipòsit Can Prat",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "0beddf9723ad25bd",
        "type": "ui_link",
        "name": "Tornar a Grafana",
        "link": "http://iot.aiguesmanresa.com:3000/d/fca8985f-d3aa-46d7-8357-9b98f716f224/2-marganell-diposit-de-can-prat?orgId=1&refresh=5s",
        "icon": "open_in_browser",
        "target": "thistab",
        "order": 4
    },
    {
        "id": "087c314fc1fb6566",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "4fe39c1704264f52",
        "type": "inject",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 180,
        "wires": [
            [
                "fc21d60935d3ec9a",
                "955d36898f8e86f4",
                "ffa9f205a30331ee"
            ]
        ]
    },
    {
        "id": "955d36898f8e86f4",
        "type": "exec",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "command": "cat /sys/class/thermal/thermal_zone0/temp",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "temp",
        "x": 350,
        "y": 180,
        "wires": [
            [
                "0dd3d844f9043a6c"
            ],
            [],
            []
        ]
    },
    {
        "id": "0dd3d844f9043a6c",
        "type": "function",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "name": "global.plc.temp",
        "func": "// Obtener la salida del comando de temperatura\nlet tempOutput = msg.payload.trim();\n\n// Convertir la temperatura de miligrados Celsius a grados Celsius\nlet temperature = (parseInt(tempOutput) / 1000).toFixed(2);\n\n// Crear el payload con la temperatura\nmsg.payload = parseFloat(temperature);\n\n// Almacenar el uso de la CPU en el contexto del flujo\nglobal.set('plc.temp', msg.payload);\n\n\n// Devolver el mensaje\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "fc21d60935d3ec9a",
        "type": "exec",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "command": "top -bn1 | grep \"Cpu(s)\" | sed 's/.*, *\\([0-9.]*\\)%* id.*/\\1/' | awk '{print 100 - $1}'",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "cpu",
        "x": 350,
        "y": 240,
        "wires": [
            [
                "33f4621df84de10a"
            ],
            [],
            []
        ]
    },
    {
        "id": "33f4621df84de10a",
        "type": "function",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "name": "global.plc.cpuUsage",
        "func": "// Obtener la salida del comando de uso de la CPU\nlet cpuUsage = parseFloat(msg.payload.trim()).toFixed(2);\n\n// Almacenar el uso de la CPU en el contexto de global\nglobal.set('plc.cpuUsage', cpuUsage);\n\n// Continuar al siguiente nodo\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "ffa9f205a30331ee",
        "type": "exec",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "command": "free -m | awk 'NR==2{printf \"%.2f\", $3*100/$2 }'",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "memoria",
        "x": 360,
        "y": 300,
        "wires": [
            [
                "506890f13f9217c7"
            ],
            [],
            []
        ]
    },
    {
        "id": "506890f13f9217c7",
        "type": "function",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "name": "global.plc.memory",
        "func": "// Obtener la salida del comando de uso de la memoria\nlet memoryUsage = parseFloat(msg.payload.trim()).toFixed(2);\n\n// Almacenar el uso de la memoria en el contexto de global\nglobal.set('plc.memory', memoryUsage);\n\n// Continuar al siguiente nodo\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "25230cca09861bdd",
        "type": "inject",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 100,
        "wires": [
            [
                "8a28edfc13be9256"
            ]
        ]
    },
    {
        "id": "8a28edfc13be9256",
        "type": "function",
        "z": "52d0ba6e087a1e67",
        "g": "d018bb775d102d7d",
        "name": "AGAFAR HORA PLC",
        "func": "var timestamp = msg.payload;\n\n// Crear un objecte Date amb el timestamp\nlet date = new Date(timestamp);\n\n// Obtenir la part de l'hora i la data per separat\nlet mHoraLocal = date.toLocaleTimeString('ca-ES'); // Format de 24 hores\nlet mDataLocal = date.toLocaleDateString('ca-ES'); // Format DD/MM/YYYY\n\n// Obtenir el dia de la setmana (0 per diumenge, 6 per dissabte)\nlet mDiaLocal = date.getDay(); // Retorna el dia de la setmana (0 = diumenge, 1 = dilluns, ..., 6 = dissabte)\n\n// Assignar les variables al context global\nglobal.set(\"plc.mDataLocal\", mDataLocal);    // \"26/9/2024\"\nglobal.set(\"plc.mDiaLocal\", mDiaLocal);      // Número del dia de la setmana (0 = diumenge, ..., 6 = dissabte)\nglobal.set(\"plc.mHoraLocal\", mHoraLocal);    // \"15:33:09\"\n\n// Retornar el missatge original o personalitzat si cal\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "b0bc6af62bce9911",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.0",
        "name": "Fallo alimentació",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "643f4f03d1dde1cd"
            ]
        ]
    },
    {
        "id": "1a5b93c320509319",
        "type": "inject",
        "z": "6fc709f0bff89a08",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "b0bc6af62bce9911",
                "6e455d01d24fc741",
                "52477dc92649dd9b",
                "bfcb5d6a04828728",
                "3e62399b54c5314a",
                "1311724462dad0e0",
                "fd9491c4a4368e66",
                "9bb7154a3a2b043c",
                "fe036c874dc88284",
                "6036f1b58bb2e81d",
                "84613f89275b766f",
                "187b8e2cc981a998",
                "f2158e6a9ab2cad5",
                "bbae0717179b5c6d",
                "1ac5f88a72f24ef1",
                "9477ea98b3d540d5",
                "cf5583c0bcd9c3d6",
                "aa5f47670495d566",
                "166398d4fdd725da",
                "d1cd9361935a1fd7",
                "19b1528e9ffc4827",
                "a1f7d6afa76d381b",
                "9457bab74969b2f3",
                "393487e98701a1b7",
                "9a3458ae467ac322",
                "fe9f19b3b0c4e6c0"
            ]
        ]
    },
    {
        "id": "6e455d01d24fc741",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.1",
        "name": "Boia minima dip. petit",
        "x": 400,
        "y": 120,
        "wires": [
            [
                "6b8d300315324d58"
            ]
        ]
    },
    {
        "id": "52477dc92649dd9b",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.2",
        "name": "Boia maxima dip. petit",
        "x": 400,
        "y": 160,
        "wires": [
            [
                "dabc4667099ec5e0"
            ]
        ]
    },
    {
        "id": "bfcb5d6a04828728",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.3",
        "name": "Boia minim dip. gran",
        "x": 400,
        "y": 200,
        "wires": [
            [
                "295003c485c70ca0"
            ]
        ]
    },
    {
        "id": "3e62399b54c5314a",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.4",
        "name": "Boia maxima dip. gran",
        "x": 400,
        "y": 240,
        "wires": [
            [
                "66d46656b2e55ce6"
            ]
        ]
    },
    {
        "id": "1311724462dad0e0",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.5",
        "name": "Selector bomba gronxadors",
        "x": 420,
        "y": 280,
        "wires": [
            [
                "11adc4150df368e5"
            ]
        ]
    },
    {
        "id": "fd9491c4a4368e66",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.6",
        "name": "reserva",
        "x": 360,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "9bb7154a3a2b043c",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.0",
        "name": "Valvula diposit petit tancada",
        "x": 420,
        "y": 660,
        "wires": [
            [
                "35a541a4d56e2780"
            ]
        ]
    },
    {
        "id": "fe036c874dc88284",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.1",
        "name": "Valvula diposit gran oberta",
        "x": 420,
        "y": 700,
        "wires": [
            [
                "d35e7bcf3b5e52cd"
            ]
        ]
    },
    {
        "id": "6036f1b58bb2e81d",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.2",
        "name": "Valvula diposit gran tancada",
        "x": 420,
        "y": 740,
        "wires": [
            [
                "76ffc1b3def199b9"
            ]
        ]
    },
    {
        "id": "84613f89275b766f",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.7",
        "name": "Estat analitzador  post",
        "x": 400,
        "y": 360,
        "wires": [
            [
                "31a727545f591c90"
            ]
        ]
    },
    {
        "id": "31a727545f591c90",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 360,
        "wires": [
            [
                "deaf085e8ab2de76"
            ]
        ]
    },
    {
        "id": "187b8e2cc981a998",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.8",
        "name": "Estat recirculadora post",
        "x": 410,
        "y": 400,
        "wires": [
            [
                "92266f22e3cf2879"
            ]
        ]
    },
    {
        "id": "92266f22e3cf2879",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 400,
        "wires": [
            [
                "cd003b0eeb01901b"
            ]
        ]
    },
    {
        "id": "57c6d2f4566c32b6",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 440,
        "wires": [
            [
                "2afaa74950313fdc"
            ]
        ]
    },
    {
        "id": "f2158e6a9ab2cad5",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.9",
        "name": "Estat dosificadora clor precloracio",
        "x": 440,
        "y": 440,
        "wires": [
            [
                "57c6d2f4566c32b6"
            ]
        ]
    },
    {
        "id": "327cf6bb2d6041b7",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 480,
        "wires": [
            [
                "9d10099eda257532"
            ]
        ]
    },
    {
        "id": "bbae0717179b5c6d",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.10",
        "name": "Estat dosificadora clor post",
        "x": 420,
        "y": 480,
        "wires": [
            [
                "327cf6bb2d6041b7"
            ]
        ]
    },
    {
        "id": "d0044aabeade836d",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 520,
        "wires": [
            [
                "06029276d49dd12c"
            ]
        ]
    },
    {
        "id": "1ac5f88a72f24ef1",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.11",
        "name": "Estat dosificadora acid",
        "x": 400,
        "y": 520,
        "wires": [
            [
                "d0044aabeade836d"
            ]
        ]
    },
    {
        "id": "2e6540661ae2d36c",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 560,
        "wires": [
            [
                "73765b451bdcfa06"
            ]
        ]
    },
    {
        "id": "9477ea98b3d540d5",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I0.12",
        "name": "valvula diposit petit oberta",
        "x": 410,
        "y": 560,
        "wires": [
            [
                "2e6540661ae2d36c"
            ]
        ]
    },
    {
        "id": "cf5583c0bcd9c3d6",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.3",
        "name": "Valvula bypass oberta",
        "x": 400,
        "y": 780,
        "wires": [
            [
                "84ead8d9299025f0"
            ]
        ]
    },
    {
        "id": "aa5f47670495d566",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.4",
        "name": "Valvula bypass tancada",
        "x": 410,
        "y": 820,
        "wires": [
            [
                "b8589ab92052ed64"
            ]
        ]
    },
    {
        "id": "166398d4fdd725da",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.5",
        "name": "reserva",
        "x": 360,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "d1cd9361935a1fd7",
        "type": "rpiplc-digital-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.6",
        "name": "Selector dosificadora precloracio",
        "x": 430,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "19b1528e9ffc4827",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.7",
        "name": "Estat recirculadora i analitzador clor pre",
        "x": 460,
        "y": 940,
        "wires": [
            [
                "6cbd2014280f4eee"
            ]
        ]
    },
    {
        "id": "6cbd2014280f4eee",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 940,
        "wires": [
            [
                "c67a3ccaf7520b9c"
            ]
        ]
    },
    {
        "id": "a1f7d6afa76d381b",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.8",
        "name": "Selector dosificadora postcloracio",
        "x": 440,
        "y": 980,
        "wires": [
            [
                "dc309377816641a3"
            ]
        ]
    },
    {
        "id": "dc309377816641a3",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 980,
        "wires": [
            [
                "d73894403132201c"
            ]
        ]
    },
    {
        "id": "9457bab74969b2f3",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.11",
        "name": "Nivell diposit nou",
        "x": 390,
        "y": 1100,
        "wires": [
            [
                "5cd5c02888847370"
            ]
        ]
    },
    {
        "id": "393487e98701a1b7",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.12",
        "name": "Nivell diposit vell",
        "x": 390,
        "y": 1140,
        "wires": [
            [
                "0901c440ce179777"
            ]
        ]
    },
    {
        "id": "9a3458ae467ac322",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.10",
        "name": "Intrusio",
        "x": 360,
        "y": 1060,
        "wires": [
            [
                "670ce9150a5b774f"
            ]
        ]
    },
    {
        "id": "fe9f19b3b0c4e6c0",
        "type": "rpiplc-analog-read",
        "z": "6fc709f0bff89a08",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "I1.9",
        "name": "Calu intrusió",
        "x": 370,
        "y": 1020,
        "wires": [
            [
                "206ce583d592f529"
            ]
        ]
    },
    {
        "id": "643f4f03d1dde1cd",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "plc.alimentacio",
        "rules": [
            {
                "t": "set",
                "p": "plc.alimentacio",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 80,
        "wires": [
            [
                "3fa23387a0233a65"
            ]
        ]
    },
    {
        "id": "6b8d300315324d58",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "diposit1.bminim",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 120,
        "wires": [
            [
                "11466565b85b3ece"
            ]
        ]
    },
    {
        "id": "73765b451bdcfa06",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v1.oberta",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 560,
        "wires": [
            [
                "b2c2ee94acb1a68b"
            ]
        ]
    },
    {
        "id": "06029276d49dd12c",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d3.marxa",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 520,
        "wires": [
            [
                "49b46fb1038acc16"
            ]
        ]
    },
    {
        "id": "9d10099eda257532",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d2.marxa",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 480,
        "wires": [
            [
                "758d0ed26c16d790"
            ]
        ]
    },
    {
        "id": "2afaa74950313fdc",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d1.marxa",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 440,
        "wires": [
            [
                "a0785969d303245c"
            ]
        ]
    },
    {
        "id": "cd003b0eeb01901b",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "br2.marxa",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 400,
        "wires": [
            [
                "9c2c2bc356bd0c46"
            ]
        ]
    },
    {
        "id": "deaf085e8ab2de76",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "analitzador2.estat",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 360,
        "wires": [
            [
                "5c4b0e8e6e529869"
            ]
        ]
    },
    {
        "id": "66d46656b2e55ce6",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "diposit2.bmaxim",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 240,
        "wires": [
            [
                "2d9dd7593bdd93c9"
            ]
        ]
    },
    {
        "id": "dabc4667099ec5e0",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "diposit1.bmaxim",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 160,
        "wires": [
            [
                "998452b9a5762e2f"
            ]
        ]
    },
    {
        "id": "35a541a4d56e2780",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v1.tancada",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 660,
        "wires": [
            [
                "da26ad0995897c99"
            ]
        ]
    },
    {
        "id": "d35e7bcf3b5e52cd",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v2.oberta",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 700,
        "wires": [
            [
                "441b1d0166ff9f5e"
            ]
        ]
    },
    {
        "id": "76ffc1b3def199b9",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v2.tancada",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 740,
        "wires": [
            [
                "a7b6654ae453e2e0"
            ]
        ]
    },
    {
        "id": "84ead8d9299025f0",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v3.oberta",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 780,
        "wires": [
            [
                "c378bdba520358e3"
            ]
        ]
    },
    {
        "id": "b8589ab92052ed64",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v3.tancada",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 820,
        "wires": [
            [
                "43c4133d15dc1e7e"
            ]
        ]
    },
    {
        "id": "3f23a1ac6695cdec",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d1.selector",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 900,
        "wires": [
            [
                "56e06c1f03383efe"
            ]
        ]
    },
    {
        "id": "d73894403132201c",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d2.selector",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 980,
        "wires": [
            [
                "5d801e126f5e1651"
            ]
        ]
    },
    {
        "id": "5cd5c02888847370",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "diposit2.nivellea",
        "rules": [
            {
                "t": "set",
                "p": "diposit2.nivellea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 1120,
        "wires": [
            [
                "fcfc561fff8209de"
            ]
        ]
    },
    {
        "id": "0901c440ce179777",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "diposit1.nivellea",
        "rules": [
            {
                "t": "set",
                "p": "diposit1.nivellea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 1180,
        "wires": [
            [
                "3490688e07d1b961"
            ]
        ]
    },
    {
        "id": "206ce583d592f529",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 1020,
        "wires": [
            [
                "109c1d3737505dc2"
            ]
        ]
    },
    {
        "id": "109c1d3737505dc2",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "intrusio.clau",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1020,
        "wires": [
            [
                "ba8f82914c377bcb"
            ]
        ]
    },
    {
        "id": "670ce9150a5b774f",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "Digital",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$$.payload <= 100 ? 0 : 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 1060,
        "wires": [
            [
                "1aa56ef213d74ee6"
            ]
        ]
    },
    {
        "id": "1aa56ef213d74ee6",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "intrusio porta1",
        "rules": [
            {
                "t": "set",
                "p": "intrusio.fcporta1",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1060,
        "wires": [
            [
                "62706aee250bd036"
            ]
        ]
    },
    {
        "id": "bf096e58a9ed79ce",
        "type": "range",
        "z": "6fc709f0bff89a08",
        "minin": "0",
        "maxin": "100",
        "minout": "0",
        "maxout": "270",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 860,
        "y": 1140,
        "wires": [
            [
                "652f8606e596c31d"
            ]
        ]
    },
    {
        "id": "3490688e07d1b961",
        "type": "range",
        "z": "6fc709f0bff89a08",
        "minin": "0",
        "maxin": "4095",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 860,
        "y": 1180,
        "wires": [
            [
                "4c28e6d32537e623",
                "acb62206ad3d10c7"
            ]
        ]
    },
    {
        "id": "da26ad0995897c99",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.0",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 660,
        "wires": []
    },
    {
        "id": "3fa23387a0233a65",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.0",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 80,
        "wires": []
    },
    {
        "id": "11466565b85b3ece",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 120,
        "wires": []
    },
    {
        "id": "998452b9a5762e2f",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 160,
        "wires": []
    },
    {
        "id": "2d9dd7593bdd93c9",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.4",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 240,
        "wires": []
    },
    {
        "id": "964ad27da6e84dba",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.5",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 280,
        "wires": []
    },
    {
        "id": "f78e36ec42f07821",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.6",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 320,
        "wires": []
    },
    {
        "id": "5c4b0e8e6e529869",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.7",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 360,
        "wires": []
    },
    {
        "id": "9c2c2bc356bd0c46",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.8",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 400,
        "wires": []
    },
    {
        "id": "a0785969d303245c",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.9",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 440,
        "wires": []
    },
    {
        "id": "758d0ed26c16d790",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.10",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 480,
        "wires": []
    },
    {
        "id": "49b46fb1038acc16",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.11",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 520,
        "wires": []
    },
    {
        "id": "b2c2ee94acb1a68b",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.12",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 560,
        "wires": []
    },
    {
        "id": "441b1d0166ff9f5e",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 700,
        "wires": []
    },
    {
        "id": "a7b6654ae453e2e0",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 740,
        "wires": []
    },
    {
        "id": "c378bdba520358e3",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 780,
        "wires": []
    },
    {
        "id": "43c4133d15dc1e7e",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.4",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 820,
        "wires": []
    },
    {
        "id": "ab9f8785097e7674",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.5",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 860,
        "wires": []
    },
    {
        "id": "56e06c1f03383efe",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.6",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 900,
        "wires": []
    },
    {
        "id": "ba9430eafc09c329",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.7",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 940,
        "wires": []
    },
    {
        "id": "5d801e126f5e1651",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.8",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 980,
        "wires": []
    },
    {
        "id": "ba8f82914c377bcb",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.9",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 1020,
        "wires": []
    },
    {
        "id": "62706aee250bd036",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.10",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 1060,
        "wires": []
    },
    {
        "id": "5cfe85dc531ad919",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.11",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 1100,
        "wires": []
    },
    {
        "id": "11993a3f4d656a1e",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I1.12",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 1180,
        "wires": []
    },
    {
        "id": "11adc4150df368e5",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "b1.selector",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 280,
        "wires": [
            [
                "964ad27da6e84dba"
            ]
        ]
    },
    {
        "id": "652f8606e596c31d",
        "type": "function",
        "z": "6fc709f0bff89a08",
        "name": "diposit2.m3disponibles",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(1));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('diposit2.m3disponibles', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1140,
        "wires": [
            [
                "5cfe85dc531ad919"
            ]
        ]
    },
    {
        "id": "4c28e6d32537e623",
        "type": "function",
        "z": "6fc709f0bff89a08",
        "name": "diposit1.nivell",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(1));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('diposit1.nivell', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1180,
        "wires": [
            [
                "11993a3f4d656a1e"
            ]
        ]
    },
    {
        "id": "fcfc561fff8209de",
        "type": "range",
        "z": "6fc709f0bff89a08",
        "minin": "0",
        "maxin": "4095",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 860,
        "y": 1100,
        "wires": [
            [
                "730b44b9d7bfa7ee",
                "bf096e58a9ed79ce"
            ]
        ]
    },
    {
        "id": "730b44b9d7bfa7ee",
        "type": "function",
        "z": "6fc709f0bff89a08",
        "name": "diposit2.nivell",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(1));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('diposit2.nivell', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1100,
        "wires": [
            [
                "5cfe85dc531ad919"
            ]
        ]
    },
    {
        "id": "acb62206ad3d10c7",
        "type": "range",
        "z": "6fc709f0bff89a08",
        "minin": "0",
        "maxin": "100",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 860,
        "y": 1220,
        "wires": [
            [
                "134a919108d4b1ad"
            ]
        ]
    },
    {
        "id": "134a919108d4b1ad",
        "type": "function",
        "z": "6fc709f0bff89a08",
        "name": "diposit1.m3disponibles",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(1));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('diposit1.m3disponibles', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1220,
        "wires": [
            [
                "11993a3f4d656a1e"
            ]
        ]
    },
    {
        "id": "5c54d928a664fe63",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "I0.3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 200,
        "wires": []
    },
    {
        "id": "295003c485c70ca0",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "diposit2.bminim",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 200,
        "wires": [
            [
                "5c54d928a664fe63"
            ]
        ]
    },
    {
        "id": "c67a3ccaf7520b9c",
        "type": "change",
        "z": "6fc709f0bff89a08",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "br1.marxa",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 940,
        "wires": [
            [
                "ba9430eafc09c329"
            ]
        ]
    },
    {
        "id": "d0dfbfc628c580a1",
        "type": "inject",
        "z": "6fc709f0bff89a08",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 670,
        "y": 900,
        "wires": [
            [
                "3f23a1ac6695cdec"
            ]
        ]
    },
    {
        "id": "148a9295f3d6b2e3",
        "type": "debug",
        "z": "6fc709f0bff89a08",
        "name": "debug 209",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 550,
        "y": 40,
        "wires": []
    },
    {
        "id": "ce4974e81f3699d8",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "auto",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 660,
        "wires": [
            [
                "155717848e4a27a9"
            ],
            [
                "76e3b63dccd719b6"
            ]
        ]
    },
    {
        "id": "f6bac9041f830cb1",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d1.ci",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 600,
        "wires": [
            [
                "c451b8460146d613"
            ]
        ]
    },
    {
        "id": "76e3b63dccd719b6",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d1.ci",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 640,
        "wires": [
            [
                "aeff316d530568fc"
            ]
        ]
    },
    {
        "id": "155717848e4a27a9",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "servei",
        "property": "d1.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 620,
        "wires": [
            [
                "3c7195fbef8be291"
            ],
            [
                "76e3b63dccd719b6"
            ]
        ]
    },
    {
        "id": "88908eda396684f1",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d1.selector",
        "payloadType": "global",
        "x": 210,
        "y": 660,
        "wires": [
            [
                "ce4974e81f3699d8"
            ]
        ]
    },
    {
        "id": "8f59f19194752c0b",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "auto",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 920,
        "wires": [
            [
                "404b15da50784bc5"
            ],
            [
                "52cb5acd1b5c23e9"
            ]
        ]
    },
    {
        "id": "0b5889a5ce4beddb",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d2.ci",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 860,
        "wires": [
            [
                "fc02021521d30a2c"
            ]
        ]
    },
    {
        "id": "52cb5acd1b5c23e9",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d2.ci",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 900,
        "wires": [
            [
                "353bb8098c5ebe0b"
            ]
        ]
    },
    {
        "id": "404b15da50784bc5",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "servei",
        "property": "d2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 880,
        "wires": [
            [
                "bc45153c192786a0"
            ],
            [
                "52cb5acd1b5c23e9"
            ]
        ]
    },
    {
        "id": "21d6f238496e0d55",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d2.selector",
        "payloadType": "global",
        "x": 210,
        "y": 920,
        "wires": [
            [
                "8f59f19194752c0b"
            ]
        ]
    },
    {
        "id": "db6c711a74d1b0e7",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "auto",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1160,
        "wires": [
            [
                "c4bbb9461798770c"
            ],
            [
                "48d01962275e47b8"
            ]
        ]
    },
    {
        "id": "c2560d931447189e",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d3.ci",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 1100,
        "wires": [
            [
                "41bb0d82f16b107f"
            ]
        ]
    },
    {
        "id": "48d01962275e47b8",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d3.ci",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 1140,
        "wires": [
            [
                "7a3c77873533a531"
            ]
        ]
    },
    {
        "id": "c4bbb9461798770c",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "servei",
        "property": "d3.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 1120,
        "wires": [
            [
                "04fd885e4e38df97"
            ],
            [
                "48d01962275e47b8"
            ]
        ]
    },
    {
        "id": "42c1f1f8bf382e04",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d3.selector",
        "payloadType": "global",
        "x": 190,
        "y": 1160,
        "wires": [
            [
                "db6c711a74d1b0e7"
            ]
        ]
    },
    {
        "id": "2e47c1114bd5ae68",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "Dosificadora (d1 ) pre cloració",
        "info": "Dosificadora (d1 ) pre cloració",
        "x": 160,
        "y": 520,
        "wires": []
    },
    {
        "id": "3c7195fbef8be291",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "F. Alim",
        "property": "plc.alimentacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 600,
        "wires": [
            [
                "f6bac9041f830cb1"
            ],
            [
                "76e3b63dccd719b6"
            ]
        ]
    },
    {
        "id": "bc45153c192786a0",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "F. Alim",
        "property": "plc.alimentacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 860,
        "wires": [
            [
                "0b5889a5ce4beddb"
            ],
            [
                "52cb5acd1b5c23e9"
            ]
        ]
    },
    {
        "id": "04fd885e4e38df97",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "F. Alim",
        "property": "plc.alimentacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 1100,
        "wires": [
            [
                "c2560d931447189e"
            ],
            [
                "48d01962275e47b8"
            ]
        ]
    },
    {
        "id": "c451b8460146d613",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "Arribada aigua D1",
        "property": "dip1.arribada",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 600,
        "wires": [
            [
                "00f77a3368a906a5"
            ],
            [
                "aeff316d530568fc"
            ]
        ]
    },
    {
        "id": "00f77a3368a906a5",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "d1.comand = 1",
        "rules": [
            {
                "t": "set",
                "p": "d1.comand",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 580,
        "wires": [
            [
                "283c38c5be2589f7"
            ]
        ]
    },
    {
        "id": "aeff316d530568fc",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "d1.comand = 0",
        "rules": [
            {
                "t": "set",
                "p": "d1.comand",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 620,
        "wires": [
            [
                "dd2743c00e44cae4"
            ]
        ]
    },
    {
        "id": "90706d5da1e322c3",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "Arribada aigua Dipòsit 1 (Dipòsit petit/vell)",
        "info": "Arribada aigua Dipòsit 1 (Dipòsit petit/vell)\nL'aigua arriba o bé pels Gronxadors (si el dipòsit 1 està operatiu) o bé per Ca l'Esteve si la vàlvula està oberta ",
        "x": 200,
        "y": 60,
        "wires": []
    },
    {
        "id": "501b61821cf799bb",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "bgronxadors.estat",
        "property": "bgronxadors.estat",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 510,
        "y": 140,
        "wires": [
            [
                "677378e3c80b2bab"
            ],
            [
                "5fbf6df9c5e6e459"
            ]
        ]
    },
    {
        "id": "677378e3c80b2bab",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "comunica",
        "property": "plc2.comunic",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 680,
        "y": 120,
        "wires": [
            [
                "4b17132729be60cc"
            ],
            [
                "5fbf6df9c5e6e459"
            ]
        ]
    },
    {
        "id": "5fbf6df9c5e6e459",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "dip1.arribada = 0",
        "rules": [
            {
                "t": "set",
                "p": "dip1.arribada",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 180,
        "wires": [
            [
                "3daa863b766e1311"
            ]
        ]
    },
    {
        "id": "4b17132729be60cc",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "dip1.arribada = 1",
        "rules": [
            {
                "t": "set",
                "p": "dip1.arribada",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 100,
        "wires": [
            [
                "f8205b4eb106ece9"
            ]
        ]
    },
    {
        "id": "39f11a06e634b97e",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 180,
        "wires": [
            [
                "0ac6f2790c4ca9f8"
            ]
        ]
    },
    {
        "id": "0ac6f2790c4ca9f8",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "servei",
        "property": "diposit1.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 180,
        "wires": [
            [
                "501b61821cf799bb"
            ],
            [
                "5fbf6df9c5e6e459"
            ]
        ]
    },
    {
        "id": "1ce041eabfa66fe9",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "Dosificadora (d2) post cloració",
        "info": "Dosificadora (d2) post cloració",
        "x": 160,
        "y": 760,
        "wires": []
    },
    {
        "id": "a2623de6ec77b98b",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "9f6f84c83a27a3f2",
        "name": "Arribada aigua Dipòsit 2 (Dipòsit gran/nou)",
        "info": "Arribada aigua Dipòsit 1 (Dipòsit gran/nou)\nL'aigua arriba o bé pel bypass, o per filtre o per Cal esteve",
        "x": 200,
        "y": 280,
        "wires": []
    },
    {
        "id": "c925d3f8d0817497",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "9f6f84c83a27a3f2",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 380,
        "wires": [
            [
                "b3369edaad65f468"
            ]
        ]
    },
    {
        "id": "b3369edaad65f468",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "9f6f84c83a27a3f2",
        "name": "!v2.tancada",
        "property": "v2.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 380,
        "wires": [
            [
                "796a18f1f3952c05"
            ],
            [
                "e4e20e31ac739021"
            ]
        ]
    },
    {
        "id": "796a18f1f3952c05",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "9f6f84c83a27a3f2",
        "name": "dip2.arribada = 1",
        "rules": [
            {
                "t": "set",
                "p": "dip2.arribada",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "6f0729d46df87b2b",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "9f6f84c83a27a3f2",
        "name": "dip2.arribada = 0",
        "rules": [
            {
                "t": "set",
                "p": "dip2.arribada",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "fc02021521d30a2c",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "selector AA",
        "property": "d2.consigna.selector",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 970,
        "y": 860,
        "wires": [
            [
                "8cfa644a5be2a76a"
            ],
            [
                "204be802af82daa1"
            ],
            [
                "204be802af82daa1"
            ]
        ],
        "outputLabels": [
            "analitzador clor",
            "analitzador + arribada aigua",
            "arribada aigua"
        ]
    },
    {
        "id": "8cfa644a5be2a76a",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "d2.comand = 1",
        "rules": [
            {
                "t": "set",
                "p": "d2.comand",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 860,
        "wires": [
            [
                "c275f8a662e9f3db"
            ]
        ]
    },
    {
        "id": "353bb8098c5ebe0b",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "d2.comand = 0",
        "rules": [
            {
                "t": "set",
                "p": "d2.comand",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 900,
        "wires": [
            [
                "97867745a80dfadc"
            ]
        ]
    },
    {
        "id": "204be802af82daa1",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "Arribada aigua D2",
        "property": "dip2.arribada",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 880,
        "wires": [
            [
                "8cfa644a5be2a76a"
            ],
            [
                "353bb8098c5ebe0b"
            ]
        ]
    },
    {
        "id": "2aba4d08a93efca4",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "Dosificadora (d3) àcid",
        "info": "Dosificadora (d3) àcid.\nva segons arribada d'aigua i demanda de ph. Dosificicarà segons el % que posois",
        "x": 140,
        "y": 1020,
        "wires": []
    },
    {
        "id": "bdf08ad19b98dfc7",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "Arribada aigua D2",
        "property": "dip2.arribada",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 1160,
        "wires": [
            [
                "a14827af9761e311"
            ],
            [
                "e0172a4b4ec010db"
            ]
        ]
    },
    {
        "id": "41bb0d82f16b107f",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "selector DD",
        "property": "d3.consigna.selector",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 930,
        "y": 1100,
        "wires": [
            [
                "2edc079c545c19d6"
            ],
            [
                "5d040724ed331a28"
            ]
        ],
        "outputLabels": [
            "Dipòsit 1",
            "Dipòsit 2"
        ]
    },
    {
        "id": "05d845e77138443f",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "Arribada aigua D1",
        "property": "dip1.arribada",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 1080,
        "wires": [
            [
                "a14827af9761e311"
            ],
            [
                "e0172a4b4ec010db"
            ]
        ]
    },
    {
        "id": "e4e20e31ac739021",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "9f6f84c83a27a3f2",
        "name": "cabal bypass",
        "property": "cabal5.inst",
        "propertyType": "global",
        "rules": [
            {
                "t": "gt",
                "v": "0.5",
                "vt": "num"
            },
            {
                "t": "lte",
                "v": "0.5",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 530,
        "y": 420,
        "wires": [
            [
                "796a18f1f3952c05"
            ],
            [
                "6f0729d46df87b2b"
            ]
        ]
    },
    {
        "id": "2edc079c545c19d6",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "servei D1",
        "property": "diposit1.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1100,
        "y": 1080,
        "wires": [
            [
                "05d845e77138443f"
            ],
            [
                "ee3b0d124d48e5a3"
            ]
        ]
    },
    {
        "id": "5d040724ed331a28",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "servei D2",
        "property": "diposit2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1100,
        "y": 1160,
        "wires": [
            [
                "bdf08ad19b98dfc7"
            ],
            [
                "7a3c77873533a531"
            ]
        ]
    },
    {
        "id": "a14827af9761e311",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "Demanda pH",
        "property": "d3.ph.demanda",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1490,
        "y": 1080,
        "wires": [
            [
                "fe1827b7e3539df9"
            ],
            [
                "e0172a4b4ec010db"
            ]
        ]
    },
    {
        "id": "fe1827b7e3539df9",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "d3.comand = 1",
        "rules": [
            {
                "t": "set",
                "p": "d3.comand",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "e0172a4b4ec010db",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "d3.comand = 0",
        "rules": [
            {
                "t": "set",
                "p": "d3.comand",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "2bdcedbee5b11407",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "Vàlvula Ca l'Esteve dipòsit 1",
        "info": "Vàlvula Ca l'Esteve dipòsit 1",
        "x": 160,
        "y": 1500,
        "wires": []
    },
    {
        "id": "3da63000dfd1a253",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v1.selector",
        "payloadType": "global",
        "x": 190,
        "y": 1620,
        "wires": [
            [
                "70954475831d28a3"
            ]
        ]
    },
    {
        "id": "70954475831d28a3",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "auto",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1620,
        "wires": [
            [
                "f8a99b321dfa2741"
            ],
            [
                "ced91b66ba2392eb"
            ]
        ]
    },
    {
        "id": "f8a99b321dfa2741",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "servei",
        "property": "v1.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 1580,
        "wires": [
            [
                "bac1332bfbe9c927"
            ],
            [
                "ced91b66ba2392eb"
            ]
        ]
    },
    {
        "id": "bac1332bfbe9c927",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "F. Alim",
        "property": "plc.alimentacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 1560,
        "wires": [
            [
                "5882e0c3cc0dda6c"
            ],
            [
                "ced91b66ba2392eb"
            ]
        ]
    },
    {
        "id": "5882e0c3cc0dda6c",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v1.ci",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 1560,
        "wires": [
            [
                "a43617c1e9173798"
            ]
        ]
    },
    {
        "id": "ced91b66ba2392eb",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v1.ci",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 1600,
        "wires": [
            [
                "e5dea343ebb10507"
            ]
        ]
    },
    {
        "id": "23bfab6a01457111",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "manual",
        "property": "v1.consigna.manual",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1140,
        "y": 1560,
        "wires": [
            [
                "1efd1b6e99e282d5"
            ],
            [
                "89cb140b6fe37e7c"
            ],
            [
                "e5dea343ebb10507"
            ]
        ],
        "outputLabels": [
            "desactivat",
            "obrir",
            "tancar"
        ]
    },
    {
        "id": "1efd1b6e99e282d5",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "tarifes",
        "property": "v1.tarifes",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 1540,
        "wires": [
            [
                "7eae762a2cec81cf"
            ],
            [
                "e5dea343ebb10507"
            ]
        ]
    },
    {
        "id": "587a56754b388070",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "v1.comand = 1",
        "rules": [
            {
                "t": "set",
                "p": "v1.comand",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "e5dea343ebb10507",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "v1.comand = 0",
        "rules": [
            {
                "t": "set",
                "p": "v1.comand",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "7eae762a2cec81cf",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "maxima",
        "property": "diposit1.bmaxim",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1440,
        "y": 1520,
        "wires": [
            [
                "e5dea343ebb10507"
            ],
            [
                "587a56754b388070"
            ]
        ]
    },
    {
        "id": "ca750438ee28474d",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "Vàlvula Ca l'Esteve dipòsit 2",
        "info": "Vàlvula Ca l'Esteve dipòsit 2",
        "x": 160,
        "y": 1720,
        "wires": []
    },
    {
        "id": "bb5e6ef688da1875",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v2.selector",
        "payloadType": "global",
        "x": 190,
        "y": 1860,
        "wires": [
            [
                "a1d3b2e8804cb8be"
            ]
        ]
    },
    {
        "id": "a1d3b2e8804cb8be",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "auto",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1860,
        "wires": [
            [
                "7f42d378a5280d97"
            ],
            [
                "db3b6a6feb4307a8"
            ]
        ]
    },
    {
        "id": "7f42d378a5280d97",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "servei",
        "property": "v2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 1820,
        "wires": [
            [
                "408ac27785445e78"
            ],
            [
                "db3b6a6feb4307a8"
            ]
        ]
    },
    {
        "id": "408ac27785445e78",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "F. Alim",
        "property": "plc.alimentacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 1800,
        "wires": [
            [
                "fbe6352d18e6ecb9"
            ],
            [
                "db3b6a6feb4307a8"
            ]
        ]
    },
    {
        "id": "fbe6352d18e6ecb9",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v2.ci",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 1800,
        "wires": [
            [
                "5e98709eb678a7c3"
            ]
        ]
    },
    {
        "id": "db3b6a6feb4307a8",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v2.ci",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 1840,
        "wires": [
            [
                "2bc8e87d990d054c"
            ]
        ]
    },
    {
        "id": "caa72a0ead0f49d3",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "manual",
        "property": "v2.consigna.manual",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1080,
        "y": 1780,
        "wires": [
            [
                "ea97b7bfe04122b5"
            ],
            [
                "1989440e88e393cd"
            ],
            [
                "2bc8e87d990d054c"
            ]
        ],
        "outputLabels": [
            "desactivat",
            "obrir",
            "tancar"
        ]
    },
    {
        "id": "ea97b7bfe04122b5",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "tarifes",
        "property": "v2.tarifes",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1250,
        "y": 1780,
        "wires": [
            [
                "261b18cf91357610"
            ],
            [
                "2bc8e87d990d054c"
            ]
        ]
    },
    {
        "id": "0efb867b7f313e5b",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "v2.comand = 1",
        "rules": [
            {
                "t": "set",
                "p": "v2.comand",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "2bc8e87d990d054c",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "v2.comand = 0",
        "rules": [
            {
                "t": "set",
                "p": "v2.comand",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 1840,
        "wires": [
            []
        ]
    },
    {
        "id": "261b18cf91357610",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "maxima",
        "property": "diposit2.bmaxim",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1400,
        "y": 1760,
        "wires": [
            [
                "2bc8e87d990d054c"
            ],
            [
                "0efb867b7f313e5b"
            ]
        ]
    },
    {
        "id": "9882aaa9036e8d24",
        "type": "comment",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "Vàlvula bypass",
        "info": "Vàlvula bypass",
        "x": 120,
        "y": 2100,
        "wires": []
    },
    {
        "id": "7138e8eab9f90bf1",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v3.selector",
        "payloadType": "global",
        "x": 190,
        "y": 2240,
        "wires": [
            [
                "3313ee015ff2d338"
            ]
        ]
    },
    {
        "id": "3313ee015ff2d338",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "auto",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2240,
        "wires": [
            [
                "fb14cdde2fd5a3aa"
            ],
            [
                "2afbbd9b398673cb"
            ]
        ]
    },
    {
        "id": "fb14cdde2fd5a3aa",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "servei",
        "property": "v3.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 2200,
        "wires": [
            [
                "76eec778bd72fc01"
            ],
            [
                "2afbbd9b398673cb"
            ]
        ]
    },
    {
        "id": "76eec778bd72fc01",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "F. Alim",
        "property": "plc.alimentacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 2180,
        "wires": [
            [
                "5830616edff0cd5b"
            ],
            [
                "2afbbd9b398673cb"
            ]
        ]
    },
    {
        "id": "5830616edff0cd5b",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v3.ci",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 2180,
        "wires": [
            [
                "d8aa48a006de49e0"
            ]
        ]
    },
    {
        "id": "2afbbd9b398673cb",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v3.ci",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 2220,
        "wires": [
            [
                "38989b74933ddfd1"
            ]
        ]
    },
    {
        "id": "2c8fe4e3707f3ca5",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "manual",
        "property": "v3.consigna.manual",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1100,
        "y": 2180,
        "wires": [
            [
                "f116c0b8fa12f614"
            ],
            [
                "67b90f344940bd7d"
            ],
            [
                "38989b74933ddfd1"
            ]
        ],
        "outputLabels": [
            "desactivat",
            "obrir",
            "tancar"
        ]
    },
    {
        "id": "3ff62ed255ec050f",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "v3.comand = 1",
        "rules": [
            {
                "t": "set",
                "p": "v3.comand",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "38989b74933ddfd1",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "v3.comand = 0",
        "rules": [
            {
                "t": "set",
                "p": "v3.comand",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "320961b6e1c1c011",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "maxima",
        "property": "diposit2.bmaxim",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1420,
        "y": 2140,
        "wires": [
            [
                "38989b74933ddfd1"
            ],
            [
                "3ff62ed255ec050f"
            ]
        ]
    },
    {
        "id": "f116c0b8fa12f614",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "servei filtre",
        "property": "filtre.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1250,
        "y": 2160,
        "wires": [
            [
                "38989b74933ddfd1"
            ],
            [
                "320961b6e1c1c011"
            ]
        ]
    },
    {
        "id": "79beda12b8aac90f",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "demanda",
        "rules": [
            {
                "t": "set",
                "p": "d3.ph.demanda",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "9748978c1100df96",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v2.comand",
        "payloadType": "global",
        "x": 190,
        "y": 1980,
        "wires": [
            [
                "8de37b3ec4d85f23"
            ]
        ]
    },
    {
        "id": "8de37b3ec4d85f23",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "comand",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 360,
        "y": 1980,
        "wires": [
            [
                "bb7449cbdcd8e9f8"
            ],
            [
                "170c0fa016ec696b"
            ]
        ]
    },
    {
        "id": "170c0fa016ec696b",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "tancar (0%)",
        "rules": [
            {
                "t": "set",
                "p": "v2.consigna.posicio",
                "pt": "global",
                "to": "100",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "79ba0c9955a0acc9",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "regular",
        "rules": [
            {
                "t": "set",
                "p": "v2.consigna.posicio",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 1960,
        "wires": [
            [
                "85a4c7c64d3681b3"
            ]
        ]
    },
    {
        "id": "cb531c65fe0f2d6f",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "consigna cabal",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "v2.consigna.cabal",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 1960,
        "wires": [
            [
                "d996b1a7a31a947f"
            ]
        ]
    },
    {
        "id": "d996b1a7a31a947f",
        "type": "function",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "PID valvula",
        "func": "// Obtenir el valor de la consigna de cabal (m3/h) des de msg.payload\nlet consigna = msg.payload;\n\n// Obtenir el valor de cabal actual des de la variable global\nlet cabalActual = global.get('cabal3.inst');\n\n// Definir el cabal màxim quan la vàlvula està oberta al 100%\nconst cabalMaxim = 10; // m3/h\n\n// Inicialitzar l'obertura de la vàlvula si no existeix (50% d'obertura)\nlet oberturaValvula = global.get('v2.obertura') || 50; // En percentatge\n\n// Calcular l'error entre la consigna i el cabal actual\nlet error = consigna - cabalActual;\n\n// Definir una constant proporcional per ajustar la vàlvula\nconst Kp = 2; // s'ha d'ajustar aquest valor per regular la velocitat de correcció\n\n// Implementar la zona morta per evitar oscil·lacions petites\nconst zonaMorta = 0.5; // Zona morta de ±0.5 m3/h\n\n// Inicialitzar l'ajust en l'obertura de la vàlvula\nlet ajust = 0;\n\n// Verificar si l'error està fora de la zona morta\nif (Math.abs(error) > zonaMorta) {\n    // Calcular l'ajust en l'obertura de la vàlvula\n    ajust = Kp * error;\n\n    // Limitar l'ajust perquè no sigui massa brusc\n    if (ajust > 5) {\n        ajust = 5; // Ajust màxim permès en un cicle\n    } else if (ajust < -5) {\n        ajust = -5; // Ajust mínim permès en un cicle\n    }\n\n    // Ajustar l'obertura de la vàlvula\n    oberturaValvula += ajust;\n\n    // Assegurar-se que l'obertura està entre 0 i 100%\n    if (oberturaValvula > 100) {\n        oberturaValvula = 100;\n    } else if (oberturaValvula < 0) {\n        oberturaValvula = 0;\n    }\n}\n\n// Guardar el nou valor d'obertura de la vàlvula en el context global\nglobal.set('v2.obertura', oberturaValvula);\n\n// Crear el missatge per enviar la nova obertura\nmsg.payload = oberturaValvula;\n\n// Retornar el missatge\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 1960,
        "wires": [
            [
                "3e76542edbef3c3f"
            ]
        ]
    },
    {
        "id": "3e76542edbef3c3f",
        "type": "range",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "minin": "0",
        "maxin": "100",
        "minout": "100",
        "maxout": "32767",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 1030,
        "y": 1960,
        "wires": [
            [
                "79ba0c9955a0acc9"
            ]
        ]
    },
    {
        "id": "85a4c7c64d3681b3",
        "type": "debug",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "debug 188",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 1960,
        "wires": []
    },
    {
        "id": "bb7449cbdcd8e9f8",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "",
        "property": "v2.consigna.manual",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 1940,
        "wires": [
            [
                "4e6dde2785dec7d3"
            ],
            [
                "cb531c65fe0f2d6f"
            ]
        ]
    },
    {
        "id": "4e6dde2785dec7d3",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "obrir (100%)",
        "rules": [
            {
                "t": "set",
                "p": "v2.consigna.posicio",
                "pt": "global",
                "to": "32767",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1920,
        "wires": [
            []
        ]
    },
    {
        "id": "f92765111d51c7e1",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "analitzador2.ph",
        "payloadType": "global",
        "x": 210,
        "y": 1240,
        "wires": [
            [
                "cb2e93e196aa08f7"
            ]
        ]
    },
    {
        "id": "9fe09b2c99fed96b",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "Demanda",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 600,
        "y": 1240,
        "wires": [
            [
                "79beda12b8aac90f"
            ],
            [
                "f6d2b70ee28b5efc"
            ]
        ]
    },
    {
        "id": "cb2e93e196aa08f7",
        "type": "function",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "Demanda",
        "func": "// Obtener el valor actual del mensaje (msg.payload)\nlet value = msg.payload;\n\n// Obtener el valor de la consignación desde la variable global\nlet consigna = global.get(\"d3.consigna.ph\");\n\n// Definir el límite superior e inferior usando el factor 0.5\nlet limiteSuperior = consigna * 1.5;\nlet limiteInferior = consigna * 0.5;\n\n// Comparar el valor del mensaje con los límites\nif (value > limiteSuperior) {\n    msg.payload = 0; // Si es 0.5 veces más grande, devuelve 0\n} else if (value < limiteInferior) {\n    msg.payload = 1; // Si es 0.5 veces más pequeño, devuelve 1\n} else {\n    msg.payload = null; // En cualquier otro caso, no devuelve nada\n}\n\n// Devolver el mensaje modificado\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1240,
        "wires": [
            [
                "9fe09b2c99fed96b"
            ]
        ]
    },
    {
        "id": "f6d2b70ee28b5efc",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "demanda",
        "rules": [
            {
                "t": "set",
                "p": "d3.ph.demanda",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "7a4f8246c10a71e8",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "regular",
        "rules": [
            {
                "t": "set",
                "p": "d3.consigna.regulacio",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "caf3e0c5eb64c0c5",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "parar (0%)",
        "rules": [
            {
                "t": "set",
                "p": "d3.consigna.regulacio",
                "pt": "global",
                "to": "100",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "c042cf11302e1961",
        "type": "range",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "minin": "0",
        "maxin": "100",
        "minout": "100",
        "maxout": "32767",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 610,
        "y": 1360,
        "wires": [
            [
                "7a4f8246c10a71e8"
            ]
        ]
    },
    {
        "id": "740745b695e7323c",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d3.consigna.proporcio",
        "payloadType": "global",
        "x": 230,
        "y": 1380,
        "wires": [
            [
                "b88461942bb7b0ad"
            ]
        ]
    },
    {
        "id": "b88461942bb7b0ad",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "0658c68795d7bd56",
        "name": "Demanda",
        "property": "d3.comand",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 440,
        "y": 1380,
        "wires": [
            [
                "c042cf11302e1961"
            ],
            [
                "caf3e0c5eb64c0c5"
            ]
        ]
    },
    {
        "id": "283c38c5be2589f7",
        "type": "debug",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "debug 189",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1370,
        "y": 580,
        "wires": []
    },
    {
        "id": "dd2743c00e44cae4",
        "type": "debug",
        "z": "865b764148bf192a",
        "g": "4bddc11fb1f5bd9e",
        "name": "debug 190",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1370,
        "y": 640,
        "wires": []
    },
    {
        "id": "c275f8a662e9f3db",
        "type": "debug",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "debug 191",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1610,
        "y": 860,
        "wires": []
    },
    {
        "id": "97867745a80dfadc",
        "type": "debug",
        "z": "865b764148bf192a",
        "g": "2a6a05742fc37b27",
        "name": "debug 192",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1610,
        "y": 900,
        "wires": []
    },
    {
        "id": "5e98709eb678a7c3",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "feb6db95aaf4e6ee",
        "name": "!avaria",
        "property": "v2.estat",
        "propertyType": "global",
        "rules": [
            {
                "t": "neq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 1800,
        "wires": [
            [
                "caa72a0ead0f49d3"
            ],
            [
                "2bc8e87d990d054c"
            ]
        ]
    },
    {
        "id": "a43617c1e9173798",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "72e0644bd5809e84",
        "name": "!avaria",
        "property": "v1.estat",
        "propertyType": "global",
        "rules": [
            {
                "t": "neq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1580,
        "wires": [
            [
                "23bfab6a01457111"
            ],
            [
                "e5dea343ebb10507"
            ]
        ]
    },
    {
        "id": "d8aa48a006de49e0",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "f6c602e4d12c6c2d",
        "name": "!avaria",
        "property": "v3.estat",
        "propertyType": "global",
        "rules": [
            {
                "t": "neq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 2180,
        "wires": [
            [
                "2c8fe4e3707f3ca5"
            ],
            [
                "38989b74933ddfd1"
            ]
        ]
    },
    {
        "id": "f8205b4eb106ece9",
        "type": "debug",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "debug 200",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 100,
        "wires": []
    },
    {
        "id": "3daa863b766e1311",
        "type": "debug",
        "z": "865b764148bf192a",
        "g": "5fbb08b7a4506c32",
        "name": "debug 201",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 180,
        "wires": []
    },
    {
        "id": "db7b7e9ef93ca0bb",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 2420,
        "wires": [
            [
                "19c483e0d212fef8",
                "6d02e8035c0fa16d",
                "b48a7b1a4a0e0ef3",
                "aea0ca39b6f2727d"
            ]
        ]
    },
    {
        "id": "3d5fa6a41e56277b",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "fcporta1",
        "property": "intrusio.fcporta1",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 840,
        "y": 2360,
        "wires": [
            [
                "8905a24277b25cb8"
            ]
        ]
    },
    {
        "id": "fd9abced55f13214",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "set alarma",
        "rules": [
            {
                "t": "set",
                "p": "intrusio.alarma",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "3c9fd372ddd4c8dc",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "reset alarma i acústics",
        "rules": [
            {
                "t": "set",
                "p": "intrusio.alarma",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "intrusio.acusticqe",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 2420,
        "wires": [
            [
                "6e4d2fcc88533c48"
            ]
        ]
    },
    {
        "id": "19c483e0d212fef8",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "clau",
        "property": "intrusio.clau",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 2420,
        "wires": [
            [
                "3c9fd372ddd4c8dc"
            ]
        ]
    },
    {
        "id": "912588fe6e334f05",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "!alarma activa",
        "property": "intrusio.alarma",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 680,
        "y": 2360,
        "wires": [
            [
                "3d5fa6a41e56277b"
            ]
        ]
    },
    {
        "id": "10b9e9f350dd9663",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "set acústic QE",
        "rules": [
            {
                "t": "set",
                "p": "intrusio.acusticqe",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 2360,
        "wires": [
            []
        ]
    },
    {
        "id": "6d02e8035c0fa16d",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "autoritzacio remota",
        "property": "intrusio.consigna.autoritzacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 2460,
        "wires": [
            [
                "3c9fd372ddd4c8dc",
                "a9a8a9d868b3d78a"
            ]
        ]
    },
    {
        "id": "6e4d2fcc88533c48",
        "type": "trigger",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "",
        "op1": "",
        "op2": "1",
        "op1type": "nul",
        "op2type": "num",
        "duration": "60",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1190,
        "y": 2420,
        "wires": [
            [
                "fd9abced55f13214"
            ]
        ]
    },
    {
        "id": "8905a24277b25cb8",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "autoritzacio remota",
        "property": "intrusio.consigna.autoritzacio",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1010,
        "y": 2360,
        "wires": [
            [
                "6e4d2fcc88533c48",
                "10b9e9f350dd9663"
            ]
        ]
    },
    {
        "id": "a9a8a9d868b3d78a",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "temporitzar autoritzacio remota",
        "rules": [
            {
                "t": "set",
                "p": "intrusio.desactivada",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "fe62b1bd0f3472ba",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "!clau",
        "property": "intrusio.clau",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 270,
        "y": 2360,
        "wires": [
            [
                "9de5aea7ffaf444e"
            ]
        ]
    },
    {
        "id": "fbcd4e7503b33a38",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 2360,
        "wires": [
            [
                "fe62b1bd0f3472ba"
            ]
        ]
    },
    {
        "id": "b48a7b1a4a0e0ef3",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "temps autoritzacio remota",
        "property": "intrusio.desactivada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 2500,
        "wires": [
            [
                "8c77a1da92a24e6d"
            ]
        ]
    },
    {
        "id": "8c77a1da92a24e6d",
        "type": "trigger",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "",
        "op1": "",
        "op2": "1",
        "op1type": "nul",
        "op2type": "num",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 750,
        "y": 2500,
        "wires": [
            [
                "894df740e71133a7"
            ]
        ]
    },
    {
        "id": "894df740e71133a7",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "rset temporitzar autoritzacio remota",
        "rules": [
            {
                "t": "set",
                "p": "intrusio.desactivada",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "aea0ca39b6f2727d",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "!temps autoritzacio remota",
        "property": "intrusio.desactivada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 2540,
        "wires": [
            [
                "6bb0f1e785f2b1b1"
            ]
        ]
    },
    {
        "id": "6bb0f1e785f2b1b1",
        "type": "change",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "reset temps",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 2540,
        "wires": [
            [
                "8c77a1da92a24e6d"
            ]
        ]
    },
    {
        "id": "9de5aea7ffaf444e",
        "type": "switch",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "!temps autoritzacio remota",
        "property": "intrusio.desactivada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 460,
        "y": 2360,
        "wires": [
            [
                "912588fe6e334f05"
            ]
        ]
    },
    {
        "id": "907b12acdd33c60b",
        "type": "inject",
        "z": "865b764148bf192a",
        "g": "8827eb5e5f892be4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 770,
        "y": 2540,
        "wires": [
            [
                "894df740e71133a7"
            ]
        ]
    },
    {
        "id": "1ac9cab53cb49281",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1080,
        "wires": [
            [
                "cc287531db6f55f8"
            ]
        ]
    },
    {
        "id": "ed041976a18576d6",
        "type": "comment",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Gestió d'alarmes",
        "info": "",
        "x": 160,
        "y": 620,
        "wires": []
    },
    {
        "id": "5bf0662f125320fd",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 680,
        "wires": [
            [
                "e605265d32c71e37"
            ]
        ]
    },
    {
        "id": "e56a3a47c24e2aa4",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit1.nivell",
        "payloadType": "global",
        "x": 200,
        "y": 680,
        "wires": [
            [
                "5bf0662f125320fd"
            ]
        ]
    },
    {
        "id": "6b4c05b030c9b261",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit2.nivell",
        "payloadType": "global",
        "x": 200,
        "y": 800,
        "wires": [
            [
                "cfa88792d9a5309c"
            ]
        ]
    },
    {
        "id": "5904b7d1a358819d",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "analitzador1.clor",
        "payloadType": "global",
        "x": 210,
        "y": 1080,
        "wires": [
            [
                "de5a9b582a4ca150"
            ]
        ]
    },
    {
        "id": "e605265d32c71e37",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dipòsit 1 Nivell",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'diposit1';\nconst concepte = 'nivelldiposit1';\nconst subconcepte = \"\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 680,
        "wires": []
    },
    {
        "id": "cfa88792d9a5309c",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 800,
        "wires": [
            [
                "a53d412234c7fed4"
            ]
        ]
    },
    {
        "id": "a53d412234c7fed4",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dipòsit 2 Nivell",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'diposit2';\nconst concepte = 'nivelldiposit2';\nconst subconcepte = \"\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 800,
        "wires": []
    },
    {
        "id": "8f554023e31660c4",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Exemple \"createAlarmMessage\"",
        "func": "// Configuració de límits\n//##const equip = \"i0.9_nivell\";\nconst limitHigh = global.get('diposit1.consigna.maxim'); // Límit alt\nconst limitLow = global.get('diposit1.consigna.minim'); // Límit baix\nconst servei = global.get('diposit1.consigna.servei'); // Límit baix\n\nvar msg1 = {};\nvar msg2 = {};\n\n// Dades d'entrada\nconst timestamp = Date.now();\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set('alarmes.nivell1.estat', alarmActive);\n    global.set('alarmes.nivell1.lectura', valor);\n    global.set('alarmes.nivell1.missatge', message);\n}\n\n// Funció per crear un missatge d'alarma\nfunction createAlarmMessage(alarmActive, timestamp, equip, message, valor) {\n    return {\n        payload: {\n            timestamp: timestamp,\n            equip: equip,\n            message: message,\n            alarmActive: alarmActive,\n            valor: valor\n        }\n    };\n}\n\nconst alarmaEstat = global.get('alarmes.nivell1.estat') || 0;\n\nif (valor > limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaEstat) {\n        saveGlobalState(1, valor, 'Alarma Nivell Límit Alt');\n        return [\n            createAlarmMessage(1, timestamp, equip, 'Alarma Nivell Límit Alt', valor),\n            { payload: 0 },\n            { payload: 1 }\n        ];\n    }\n} else if (valor < limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaEstat) {\n        saveGlobalState(1, valor, 'Alarma nivell Límit Baix');\n        return [\n            createAlarmMessage(1, timestamp, equip, 'Alarma Nivell Límit Baix', valor),\n            { payload: 1 },\n            { payload: 0 }\n        ];\n    }\n} else {\n    // Si el valor torna a la normalitat i l'alarma està activa\n    if (alarmaEstat || servei != 1) {\n        saveGlobalState(0, valor, 'Alarma nivell restablerta');\n        return [\n            createAlarmMessage(0, timestamp, equip, 'Alarma Nivell restablerta', valor),\n            { payload: 0 },\n            { payload: 0 }\n        ];\n    }\n}\n\n// Si no hi ha cap canvi d'estat, no generar missatge\nreturn [null, null, null];\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 620,
        "wires": []
    },
    {
        "id": "cc287531db6f55f8",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Clor 1",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'analitzador1';\nconst concepte = 'cloranalitzador1';\nconst subconcepte = \"clor.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaEstat = global.get(`alarmes.${concepte}.estat`) || 0;\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 1080,
        "wires": []
    },
    {
        "id": "60676bd90c2ee057",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1120,
        "wires": [
            [
                "2ef050a94d956eb6"
            ]
        ]
    },
    {
        "id": "898fefddadd18639",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "analitzador2.clor",
        "payloadType": "global",
        "x": 210,
        "y": 1120,
        "wires": [
            [
                "7fe5ca4ec8fc3f2e"
            ]
        ]
    },
    {
        "id": "2ef050a94d956eb6",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Clor 2",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'analitzador2';\nconst concepte = 'cloranalitzador2';\nconst subconcepte = \"clor.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 1120,
        "wires": []
    },
    {
        "id": "a0b3ac1b6b683dad",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1160,
        "wires": [
            [
                "04be9a4c9d2b2f1c"
            ]
        ]
    },
    {
        "id": "7996b3639efa9659",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "analitzador2.ph",
        "payloadType": "global",
        "x": 210,
        "y": 1160,
        "wires": [
            [
                "c8fb9404f6413073"
            ]
        ]
    },
    {
        "id": "04be9a4c9d2b2f1c",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Ph 2",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'analitzador2';\nconst concepte = 'phanalitzador2';\nconst subconcepte = \"ph.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 1160,
        "wires": []
    },
    {
        "id": "8e89356e3a61fdc9",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1320,
        "wires": [
            [
                "8b2c58bd588de1f1"
            ]
        ]
    },
    {
        "id": "9960d8a8b0bd822b",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "pressio1.bars",
        "payloadType": "global",
        "x": 200,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "8b2c58bd588de1f1",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Pressió 1",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'pressio1';\nconst concepte = 'pressiosortida';\nconst subconcepte = \"\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 1320,
        "wires": []
    },
    {
        "id": "a045be917f981728",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit1.bmaxim",
        "payloadType": "global",
        "x": 210,
        "y": 720,
        "wires": [
            [
                "4b80af1113bc09b9"
            ]
        ]
    },
    {
        "id": "4b80af1113bc09b9",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dipòsit 1 Boia Màx",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'diposit1';\nconst concepte = 'bmaxdiposit1';\n\n// Consignes\nconst boia = global.get(`${sensor}.bmaxim`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (boia==0 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '7');\n    global.set(`alarmes.${concepte}.fuxa.activa`,1);\n} else {\n\n    saveGlobalState(0, valor, '8');\n    global.set(`alarmes.${concepte}.fuxa.activa`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 720,
        "wires": []
    },
    {
        "id": "4a4f2291b9287f3b",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dipòsit 1 Boia Mín",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'diposit1';\nconst concepte = 'bmindiposit1';\n\n// Consignes\nconst boia = global.get(`${sensor}.bminim`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (boia==false && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '9');\n    global.set(`alarmes.${concepte}.fuxa.activa`,1);\n} else {\n\n    saveGlobalState(0, valor, '10');\n    global.set(`alarmes.${concepte}.fuxa.activa`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 760,
        "wires": []
    },
    {
        "id": "d286cbd0e9ed5974",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit1.bminim",
        "payloadType": "global",
        "x": 210,
        "y": 760,
        "wires": [
            [
                "4a4f2291b9287f3b"
            ]
        ]
    },
    {
        "id": "c917838460560b78",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit2.bmaxim",
        "payloadType": "global",
        "x": 210,
        "y": 840,
        "wires": [
            [
                "3c012910d24f8fb7"
            ]
        ]
    },
    {
        "id": "3c012910d24f8fb7",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dipòsit 2 Boia Màx",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'diposit2';\nconst concepte = 'bmaxdiposit2';\n\n// Consignes\nconst boia = global.get(`${sensor}.bmaxim`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (boia==0 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '7');\n    global.set(`alarmes.${concepte}.fuxa.activa`,1);\n} else {\n\n    saveGlobalState(0, valor, '8');\n    global.set(`alarmes.${concepte}.fuxa.activa`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 840,
        "wires": []
    },
    {
        "id": "2353f55dbc8973bc",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dipòsit 2 Boia Mín",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'diposit2';\nconst concepte = 'bmindiposit2';\n\n// Consignes\nconst boia = global.get(`${sensor}.bminim`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (boia==0 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '9');\n    global.set(`alarmes.${concepte}.fuxa.activa`,1);\n} else {\n\n    saveGlobalState(0, valor, '10');\n    global.set(`alarmes.${concepte}.fuxa.activa`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 880,
        "wires": []
    },
    {
        "id": "37e6c59c457fda88",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit2.bminim",
        "payloadType": "global",
        "x": 210,
        "y": 880,
        "wires": [
            [
                "2353f55dbc8973bc"
            ]
        ]
    },
    {
        "id": "f219495dee97cab1",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "br1.avaria",
        "payloadType": "global",
        "x": 190,
        "y": 1360,
        "wires": [
            [
                "29090770e2d15b7a"
            ]
        ]
    },
    {
        "id": "29090770e2d15b7a",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1360,
        "wires": [
            [
                "1fdca9d6bdba6c2b"
            ]
        ]
    },
    {
        "id": "1fdca9d6bdba6c2b",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Bomba recirculadora 1",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'br1';\nconst concepte = 'marxabr1';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria`); // \n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1360,
        "wires": []
    },
    {
        "id": "b6ed100552d50d2c",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d1.avaria",
        "payloadType": "global",
        "x": 190,
        "y": 1440,
        "wires": [
            [
                "6fd3783945c74a87"
            ]
        ]
    },
    {
        "id": "6fd3783945c74a87",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1440,
        "wires": [
            [
                "b53eb0e8cc5e1990"
            ]
        ]
    },
    {
        "id": "b53eb0e8cc5e1990",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dosificadora 1 pre clor",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'd1';\nconst concepte = 'marxad1';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1440,
        "wires": []
    },
    {
        "id": "7fc8576cc29ba003",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dosificadora 2 post clor",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'd2';\nconst concepte = 'marxad2';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 1480,
        "wires": []
    },
    {
        "id": "8c1a6452a6af5347",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d2.avaria",
        "payloadType": "global",
        "x": 190,
        "y": 1480,
        "wires": [
            [
                "fa28768e31d2bbaf"
            ]
        ]
    },
    {
        "id": "fa28768e31d2bbaf",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1480,
        "wires": [
            [
                "7fc8576cc29ba003"
            ]
        ]
    },
    {
        "id": "4d05a6529c7b8c5f",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Dosificadora 3 àcid",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'd3';\nconst concepte = 'marxad3';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 1520,
        "wires": []
    },
    {
        "id": "146aee312e69e885",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d3.avaria",
        "payloadType": "global",
        "x": 190,
        "y": 1520,
        "wires": [
            [
                "6d16188f1832826e"
            ]
        ]
    },
    {
        "id": "6d16188f1832826e",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1520,
        "wires": [
            [
                "4d05a6529c7b8c5f"
            ]
        ]
    },
    {
        "id": "28276088bda35a1b",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Vàlvula 1 (Ca l'Esteve, dip. 1) o",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'v1';\nconst concepte = 'obertavalvula1'\n// Consignes\nconst avaria = global.get(`${sensor}.avaria.obrir`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1560,
        "wires": []
    },
    {
        "id": "2d15227cacc659a1",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v1.avaria.obrir",
        "payloadType": "global",
        "x": 200,
        "y": 1560,
        "wires": [
            [
                "916ccf376efafaab"
            ]
        ]
    },
    {
        "id": "916ccf376efafaab",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1560,
        "wires": [
            [
                "28276088bda35a1b"
            ]
        ]
    },
    {
        "id": "048d9bfbfde41581",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "br2.avaria",
        "payloadType": "global",
        "x": 190,
        "y": 1400,
        "wires": [
            [
                "7c224c7ba4282ad7"
            ]
        ]
    },
    {
        "id": "7c224c7ba4282ad7",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1400,
        "wires": [
            [
                "04a805abe82df77e"
            ]
        ]
    },
    {
        "id": "04a805abe82df77e",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Bomba recirculadora 2",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'br2';\nconst concepte = 'marxabr2';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria`); // \n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1400,
        "wires": []
    },
    {
        "id": "eee8081ee98a00fd",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "plc2.comunic",
        "payloadType": "global",
        "x": 200,
        "y": 1800,
        "wires": [
            [
                "e7e9bb48c20f2d63"
            ]
        ]
    },
    {
        "id": "ebadd3178da195ca",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Comunicació PLC Jan Pere-Gronxadors",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'plc2';\nconst concepte = 'comgronxadors';\n\n// Consignes\nconst avaria = global.get(`${sensor}.comunicacio`); // \n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==0)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '13');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '14');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 1800,
        "wires": []
    },
    {
        "id": "de5a9b582a4ca150",
        "type": "switch",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "marxa br1 = 1",
        "property": "br1.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 640,
        "y": 1080,
        "wires": [
            [
                "1ac9cab53cb49281"
            ]
        ]
    },
    {
        "id": "7fe5ca4ec8fc3f2e",
        "type": "switch",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "marxa br2 = 1",
        "property": "br2.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 640,
        "y": 1120,
        "wires": [
            [
                "60676bd90c2ee057"
            ]
        ]
    },
    {
        "id": "c8fb9404f6413073",
        "type": "switch",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "marxa br2 = 1",
        "property": "br2.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 640,
        "y": 1160,
        "wires": [
            [
                "a0b3ac1b6b683dad"
            ]
        ]
    },
    {
        "id": "60323119bce2da13",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1200,
        "wires": [
            [
                "9ce032dcb701e3ed"
            ]
        ]
    },
    {
        "id": "f36c99c4a86caebf",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "analitzador3.terb",
        "payloadType": "global",
        "x": 210,
        "y": 1200,
        "wires": [
            [
                "275578c46c6ea819"
            ]
        ]
    },
    {
        "id": "9ce032dcb701e3ed",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Terb 3",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'analitzador3';\nconst concepte = 'terbanalitzador3';\nconst subconcepte = \"terb.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 1200,
        "wires": []
    },
    {
        "id": "275578c46c6ea819",
        "type": "switch",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "marxa br2 = 1",
        "property": "br2.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 640,
        "y": 1200,
        "wires": [
            [
                "60323119bce2da13"
            ]
        ]
    },
    {
        "id": "350ff9af66e5c98f",
        "type": "comment",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "pressió",
        "info": "",
        "x": 150,
        "y": 1260,
        "wires": []
    },
    {
        "id": "c806efbe3d419c66",
        "type": "comment",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "Gestió avaries calculades",
        "info": "",
        "x": 190,
        "y": 60,
        "wires": []
    },
    {
        "id": "085377df68fd8cbe",
        "type": "comment",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "Gestió avisos",
        "info": "",
        "x": 170,
        "y": 2220,
        "wires": []
    },
    {
        "id": "7b74f78f5bdc4652",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 500,
        "y": 2280,
        "wires": [
            [
                "060b54794724b332"
            ]
        ]
    },
    {
        "id": "060b54794724b332",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "Dipòsit 2 EA",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'diposit2';\nconst concepte = 'nivell2ea';\n\n// Consignes\n//##const equip = \"i0.7_diposit_nivell\";\nconst limitHigh = 4095; // 4mA\nconst limitLow = 785;   // 20mA\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Estat de l'alarma (guardarà l'estat)\nconst alarmaEstat = global.get(`alarmes.${concepte}.estat`) || 0;\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nif ((valor > limitHigh || valor < limitLow) && servei == 1) {\n    // Si el valor és superior o inferior als límits i l'alarma no està activa\n    if (!alarmaEstat) {\n        saveGlobalState(1, valor, '11');\n        global.set(`alarmes.${concepte}.fuxa.ea`,1);\n    }\n} else {\n    // Si el valor torna a la normalitat i l'alarma està activa\n    if (alarmaEstat || servei != 1) {\n        saveGlobalState(0, valor, '12');\n        global.set(`alarmes.${concepte}.fuxa.ea`,0);\n    }\n}",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 2280,
        "wires": []
    },
    {
        "id": "15a110f912e0a009",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit2.ea",
        "payloadType": "global",
        "x": 210,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "4b88787f0a9799b9",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 520,
        "y": 2480,
        "wires": [
            [
                "4b7a70721ccba21c"
            ]
        ]
    },
    {
        "id": "6ffd69542da5e62d",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre1.cabal",
        "payloadType": "global",
        "x": 240,
        "y": 2480,
        "wires": [
            []
        ]
    },
    {
        "id": "4b7a70721ccba21c",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "Cabal 1 (Gronxadors)",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabalimetre1';\nconst concepte = 'instantanicabalgronxadors';\nconst subconcepte = \"cabal.\"; //En el cas que no en tingui, es deixa buit \"\"\n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 2480,
        "wires": []
    },
    {
        "id": "67bd2b508a0aeec0",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 520,
        "y": 2520,
        "wires": [
            [
                "e55b600f53fa45de"
            ]
        ]
    },
    {
        "id": "cbea85b2f651f72d",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre2.cabal",
        "payloadType": "global",
        "x": 240,
        "y": 2520,
        "wires": [
            []
        ]
    },
    {
        "id": "e55b600f53fa45de",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "Cabal 2 (Ca l'Esteve dip.1)",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabal2';\nconst concepte = 'instantanicabalentradad';\nconst subconcepte = \"inst.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 2520,
        "wires": []
    },
    {
        "id": "e1450bc724165f11",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 920,
        "wires": [
            [
                "90014965f6231246"
            ]
        ]
    },
    {
        "id": "15657b11d2bcddea",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre4.cabal",
        "payloadType": "global",
        "x": 220,
        "y": 920,
        "wires": [
            [
                "e1450bc724165f11"
            ]
        ]
    },
    {
        "id": "90014965f6231246",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Cabal 4 (rentat filtre)",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabal4';\nconst concepte = 'instantanicabalrentat';\nconst subconcepte = \"inst.\"; //En el cas que no en tingui, es deixa buit \"\"\n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 920,
        "wires": []
    },
    {
        "id": "c52b32984fa2e00c",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 960,
        "wires": [
            [
                "b147526d5c7143e6"
            ]
        ]
    },
    {
        "id": "441ebda394362030",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre5.cabal",
        "payloadType": "global",
        "x": 220,
        "y": 960,
        "wires": [
            [
                "c52b32984fa2e00c"
            ]
        ]
    },
    {
        "id": "b147526d5c7143e6",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Cabal 5 (by pass)",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabal5';\nconst concepte = 'instantanicabalbypass';\nconst subconcepte = \"inst.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 960,
        "wires": []
    },
    {
        "id": "20365a7e8ae444b0",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 520,
        "y": 2560,
        "wires": [
            [
                "304b45427619085b"
            ]
        ]
    },
    {
        "id": "27608e581ba3dce5",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre3.cabal",
        "payloadType": "global",
        "x": 240,
        "y": 2560,
        "wires": [
            []
        ]
    },
    {
        "id": "304b45427619085b",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "Cabal 3 (Ca l'Esteve dip.2)",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabalimetre2';\nconst concepte = 'instantanicabalentradad2';\nconst subconcepte = \"cabal.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 2560,
        "wires": []
    },
    {
        "id": "90ffdd528032b189",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1000,
        "wires": [
            [
                "7810256bd5227a58"
            ]
        ]
    },
    {
        "id": "a06ab65047f7ba38",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre6.cabal",
        "payloadType": "global",
        "x": 220,
        "y": 1000,
        "wires": [
            [
                "90ffdd528032b189"
            ]
        ]
    },
    {
        "id": "7810256bd5227a58",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "name": "Cabal 6 (camp futbol)",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabal6';\nconst concepte = 'instantanicabalsortidafutbol';\nconst subconcepte = \"inst.\"; //En el cas que no en tingui, es deixa buit \"\"\n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1000,
        "wires": []
    },
    {
        "id": "927e7a52e1fbb12e",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1040,
        "wires": [
            [
                "fa506950ddd75d61"
            ]
        ]
    },
    {
        "id": "bd4738fa49fe2644",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre7.cabal",
        "payloadType": "global",
        "x": 220,
        "y": 1040,
        "wires": [
            [
                "927e7a52e1fbb12e"
            ]
        ]
    },
    {
        "id": "fa506950ddd75d61",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "name": "Cabal 7 (poble)",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabal7';\nconst concepte = 'instantanicabalsortidapoble';\nconst subconcepte = \"inst.\"; //Exemple: \"cabal.\", en el cas que no en tingui es deixa buit \"\" \n\n// Consignes\nconst limitHigh = global.get(`${sensor}.consigna.${subconcepte}maxim`); // Límit alt\nconst limitLow = global.get(`${sensor}.consigna.${subconcepte}minim`); // Límit baix\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nconst alarmaLH = global.get(`alarmes.${concepte}.estat`) || 0;\nconst alarmaLL = global.get(`alarmes.${concepte}.estat`) || 0;\n\nif (valor >= limitHigh && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    if (!alarmaLH) {\n        saveGlobalState(1, valor, '1');\n        global.set(`alarmes.${concepte}.fuxa.alt`,1);\n    }\n} else if (valor <= limitLow && servei == 1) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    if (!alarmaLL) {\n        saveGlobalState(1, valor, '3');\n        global.set(`alarmes.${concepte}.fuxa.baix`,1);\n    }\n} else if (alarmaLH && (valor < limitHigh||servei != 1)){\n        saveGlobalState(0, valor, '2');\n        global.set(`alarmes.${concepte}.fuxa.alt`,0);\n} else if (alarmaLL && (valor > limitLow||servei != 1)){\n        saveGlobalState(0, valor, '4');\n        global.set(`alarmes.${concepte}.fuxa.baix`,0);\n}\n\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 1040,
        "wires": []
    },
    {
        "id": "bc8c927b0b6cd1be",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 500,
        "y": 2320,
        "wires": [
            [
                "c238b5308d959d6e"
            ]
        ]
    },
    {
        "id": "3e8ad2322d8115c3",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "cabalimetre1.ea",
        "payloadType": "global",
        "x": 230,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "c238b5308d959d6e",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "93e274aebef92385",
        "name": "EA Cabalímetre 1",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'cabalimetre1';\nconst concepte = 'cabal1ea';\n\n// Consignes\n//##const equip = \"i0.7_diposit_nivell\";\nconst limitHigh = 4095; // 4mA\nconst limitLow = 785;   // 20mA\nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Estat de l'alarma (guardarà l'estat)\nconst alarmaEstat = global.get(`alarmes.${concepte}.estat`) || 0;\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\n\nif ((valor > limitHigh || valor < limitLow) && servei == 1) {\n    // Si el valor és superior o inferior als límits i l'alarma no està activa\n    if (!alarmaEstat) {\n        saveGlobalState(1, valor, '11');\n        global.set(`alarmes.${concepte}.fuxa.ea`,1);\n    }\n} else {\n    // Si el valor torna a la normalitat i l'alarma està activa\n    if (alarmaEstat || servei != 1) {\n        saveGlobalState(0, valor, '12');\n        global.set(`alarmes.${concepte}.fuxa.ea`,0);\n    }\n}",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 2320,
        "wires": []
    },
    {
        "id": "9505bb88fe09d535",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Vàlvula 2 (Ca l'Esteve, dip. 2) o",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'v2';\nconst concepte = 'obertavalvula2';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria.obrir`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1640,
        "wires": []
    },
    {
        "id": "6394a22c6ab26bce",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v2.avaria.obrir",
        "payloadType": "global",
        "x": 200,
        "y": 1640,
        "wires": [
            [
                "9e6eb34166afe1f1"
            ]
        ]
    },
    {
        "id": "9e6eb34166afe1f1",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1640,
        "wires": [
            [
                "9505bb88fe09d535"
            ]
        ]
    },
    {
        "id": "a83c323db11dcdda",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Vàlvula 2 (Ca l'Esteve, dip. 2) t",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'v2';\nconst concepte = 'tancadavalvula2';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria.tancar`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1680,
        "wires": []
    },
    {
        "id": "6ed5661ee8f1b1e5",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v2.avaria.tancar",
        "payloadType": "global",
        "x": 210,
        "y": 1680,
        "wires": [
            [
                "b519478aca611c23"
            ]
        ]
    },
    {
        "id": "b519478aca611c23",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1680,
        "wires": [
            [
                "a83c323db11dcdda"
            ]
        ]
    },
    {
        "id": "22fe4883f2e9b762",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria br1",
        "func": "// Obtenir els valors globals necessaris\nlet servei = global.get('analitzador1.consigna.servei');\nlet estat = global.get('br1.marxa');\n\n// Comprovar si tenim 'comandament' (servei) i no tenim 'estat'\nif (servei && !estat) {\n    // Establir el valor de 'global.br1.avaria' a 1\n    global.set('br1.avaria', 1);\n} else {\n    // En qualsevol altre cas, establir 'global.br1.avaria' a 0\n    global.set('br1.avaria', 0);\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "630c5f6e02691325",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "22fe4883f2e9b762",
                "f024987ad8501b38",
                "1bc32d24587bb201",
                "1116d67f9d328f79",
                "26ba5321978346dc",
                "02ee2514deba4c09",
                "45e04f6b17f211b3",
                "52710fe6f83f43ca",
                "116b939df40db327",
                "44a3f388aecc9c20",
                "bb147fe3a5514daa"
            ]
        ]
    },
    {
        "id": "f024987ad8501b38",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria br2",
        "func": "// Obtenir els valors globals necessaris\nlet servei1 = global.get('analitzador2.consigna.servei');\nlet servei2 = global.get('analitzador3.consigna.servei');\nlet estat = global.get('br2.marxa');\n\n// Comprovar si tenim 'comandament' (servei) i no tenim 'estat'\nif (servei1 && servei2 && !estat) {\n    // Establir el valor de 'global.br1.avaria' a 1\n    global.set('br2.avaria', 1);\n} else {\n    // En qualsevol altre cas, establir 'global.br1.avaria' a 0\n    global.set('br2.avaria', 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "1bc32d24587bb201",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria d1",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'd1'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.servei`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.marxa`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria`, 1);\n    }\n} if (reset ==1)  {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime`, null);\n    global.set(`${thing}.avaria`, 0);\n} else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime`, null);\n    global.set(`${thing}.avaria`, 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "1116d67f9d328f79",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria d3",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'd3'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.servei`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.marxa`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria`, 1);\n    }\n} if (reset ==1)  {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime`, null);\n    global.set(`${thing}.avaria`, 0);\n} else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime1`, null);\n    global.set(`${thing}.avaria`, 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "26ba5321978346dc",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria v1 obrir",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'v1'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.servei`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.oberta`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime1`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime1`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria.obrir`, 1);\n    }\n} else if (reset == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime1`, null);\n    global.set(`${thing}.avaria.obrir`, 0);\n    \n} else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime1`, null);\n    global.set(`${thing}.avaria.obrir`, 0);\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "5f404b34ec917712",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "name": "Vàlvula 1 (Ca l'Esteve, dip. 1) t",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'v1';\nconst concepte = 'tancadavalvula1';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria.tancar`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1600,
        "wires": []
    },
    {
        "id": "81077a2acd76710a",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v1.avaria.tancar",
        "payloadType": "global",
        "x": 210,
        "y": 1600,
        "wires": [
            [
                "6b5fd8b3dab38a83"
            ]
        ]
    },
    {
        "id": "6b5fd8b3dab38a83",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1600,
        "wires": [
            [
                "5f404b34ec917712"
            ]
        ]
    },
    {
        "id": "02ee2514deba4c09",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria v1 tancar",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'v1'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.ci`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.tancada`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime2`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (!comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime2`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria.tancar`, 1);\n    }\n} else if (reset == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime2`, null);\n    global.set(`${thing}.avaria.tancar`, 0);\n    \n} else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime2`, null);\n    global.set(`${thing}.avaria.tancar`, 0);\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "44a3f388aecc9c20",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria v2 oberta (no tancada, proporcional)",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'v2'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.ci`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.tancada`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime1`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (comandament && servei && estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime1`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria.obrir`, 1);\n    }\n} if (reset ==1)  {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime1`, null);\n    global.set(`${thing}.avaria.obrir`, 0);\n    \n} else if (estat == 0) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime1`, null);\n    global.set(`${thing}.avaria.obrir`, 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "bb147fe3a5514daa",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria v2 tancar",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'v2'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.ci`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.tancada`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime2`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (!comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime2`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria.tancar`, 1);\n    }\n} if (reset ==1)  {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime2`, null);\n    global.set(`${thing}.avaria.tancar`, 0);\n} else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime2`, null);\n    global.set(`${thing}.avaria.tancar`, 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "976602bd01d91278",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Vàlvula 3 (By pass) o",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'v3';\nconst concepte = 'obertavalvula3';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria.obrir`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1720,
        "wires": []
    },
    {
        "id": "92c03b943d07d451",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v3.avaria.obrir",
        "payloadType": "global",
        "x": 200,
        "y": 1720,
        "wires": [
            [
                "16d95991119c7f7b"
            ]
        ]
    },
    {
        "id": "16d95991119c7f7b",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1720,
        "wires": [
            [
                "976602bd01d91278"
            ]
        ]
    },
    {
        "id": "7670012336f71662",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "name": "Vàlvula 3 (By pass) t",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'v3';\nconst concepte = 'tancadavalvula3';\n\n// Consignes\nconst avaria = global.get(`${sensor}.avaria.tancar`); // \nconst servei = global.get(`${sensor}.consigna.servei`); // 0=Fora de rang, 1=Operatiu, 2= Anul·lat\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==1 && servei == 1)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '5');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '6');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1760,
        "wires": []
    },
    {
        "id": "9f20b07cf7fc6553",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v3.avaria.tancar",
        "payloadType": "global",
        "x": 210,
        "y": 1760,
        "wires": [
            [
                "d0db07149cf9d694"
            ]
        ]
    },
    {
        "id": "d0db07149cf9d694",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1760,
        "wires": [
            [
                "7670012336f71662"
            ]
        ]
    },
    {
        "id": "45e04f6b17f211b3",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria v3 obrir",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'v3'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.servei`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.oberta`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime1`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime1`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria.obrir`, 1);\n    }\n} else if (reset ==1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime1`, null);\n    global.set(`${thing}.avaria.obrir`, 0);\n    \n } else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime1`, null);\n    global.set(`${thing}.avaria.obrir`, 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "52710fe6f83f43ca",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria v3 tancar",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'v3'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.ci`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.tancada`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime2`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (!comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime2`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria.tancar`, 1);\n    }\n}else if (reset ==1)  {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime2`, null);\n    global.set(`${thing}.avaria.tancar`, 0);\n} else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime2`, null);\n    global.set(`${thing}.avaria.tancar`, 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "e7e9bb48c20f2d63",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1800,
        "wires": [
            [
                "ebadd3178da195ca"
            ]
        ]
    },
    {
        "id": "79cbb6c0405e5104",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1840,
        "wires": [
            [
                "81387e3bce9956aa"
            ]
        ]
    },
    {
        "id": "926b7d3ead2f2dc5",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "plc2.tarja1",
        "payloadType": "global",
        "x": 190,
        "y": 1840,
        "wires": [
            [
                "79cbb6c0405e5104"
            ]
        ]
    },
    {
        "id": "81387e3bce9956aa",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Tarja ampliació 1",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'plc';\nconst concepte = 'tarjaumf1';\n\n// Consignes\nconst avaria = global.get(`${sensor}.tarja1`); // \n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==0)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '13');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '14');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 1840,
        "wires": []
    },
    {
        "id": "f94001df556cbb34",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1880,
        "wires": [
            [
                "4d5875d35b2a8742"
            ]
        ]
    },
    {
        "id": "78e7b0f59c25c76b",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "plc2.tarja1",
        "payloadType": "global",
        "x": 190,
        "y": 1880,
        "wires": [
            [
                "f94001df556cbb34"
            ]
        ]
    },
    {
        "id": "4d5875d35b2a8742",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Tarja ampliació 2",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'plc';\nconst concepte = 'tarjaumf2';\n\n// Consignes\nconst avaria = global.get(`${sensor}.tarja2`); // \n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==0)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '13');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '14');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 1880,
        "wires": []
    },
    {
        "id": "31b0c919dd11519a",
        "type": "smooth",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "15",
        "round": "0",
        "mult": "single",
        "reduce": false,
        "x": 840,
        "y": 1920,
        "wires": [
            [
                "f61594c2625d6b64"
            ]
        ]
    },
    {
        "id": "1b2597b9ee6a918e",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "plc2.tarja1",
        "payloadType": "global",
        "x": 190,
        "y": 1920,
        "wires": [
            [
                "31b0c919dd11519a"
            ]
        ]
    },
    {
        "id": "f61594c2625d6b64",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "Tarja ampliació 3",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'plc';\nconst concepte = 'tarjaumf3';\n\n// Consignes\nconst avaria = global.get(`${sensor}.tarja3`); // \n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (avaria==0)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, '13');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,1);\n} else {\n\n    saveGlobalState(0, valor, '14');\n    global.set(`alarmes.${concepte}.fuxa.avaria`,0);\n}\n",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 1920,
        "wires": []
    },
    {
        "id": "116b939df40db327",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "33361096e981ad94",
        "name": "avaria b1",
        "func": "// Definim el thing d'entrada per poder-lo reutilitzar\nconst thing = 'b1'; // Utilitzem 'msg.payload' per obtenir el thing, per defecte és 'd1'\n\n// Obtenir els valors globals necessaris\nlet servei = global.get(`${thing}.consigna.servei`); // Consigna de servei: actiu o no\nlet estat = global.get(`${thing}.marxa`);            // Estat de marxa: indica si està funcionant\nlet comandament = global.get(`${thing}.comand`);     // Comandament: actiu o no\nlet reset = global.get('reset.consigna');\n\n// Obtenir el temps d'inici d'avaria del context (específic pel thing)\nlet avariaStartTime = context.get(`${thing}_avariaStartTime`);\n\n// Obtenir l'actual temps\nlet now = Date.now();\n\n// Comprovar si tenim comandament i servei, però no tenim marxa\nif (comandament && servei && !estat) {\n    if (!avariaStartTime) {\n        // Si no hi ha un temps d'inici d'avaria, establir-ho ara\n        context.set(`${thing}_avariaStartTime`, now);\n    } else if (now - avariaStartTime >= 30000) {\n        // Si ha passat més d'1 minut des de l'inici de la situació d'avaria\n        global.set(`${thing}.avaria`, 1);\n    }\n} else if (reset ==1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime`, null);\n    global.set(`${thing}.avaria`, 0);\n} else if (estat == 1) {\n    // En qualsevol altre cas, restablir l'avaria i el temporitzador\n    context.set(`${thing}_avariaStartTime`, null);\n    global.set(`${thing}.avaria`, 0);\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "b12b14314a74abc2",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "reset.consigna",
        "payloadType": "global",
        "x": 1040,
        "y": 440,
        "wires": [
            [
                "c12f4135c27a4fe7"
            ]
        ]
    },
    {
        "id": "c12f4135c27a4fe7",
        "type": "change",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset.consigna",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "067a4d719e99ae70",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "reset.consigna",
        "payloadType": "global",
        "x": 1040,
        "y": 480,
        "wires": [
            [
                "485ba5efaed9d66e"
            ]
        ]
    },
    {
        "id": "485ba5efaed9d66e",
        "type": "change",
        "z": "d18f2ebb0dd49b18",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset.consigna",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "912ef5187eb25296",
        "type": "inject",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "plc.alimentacio",
        "payloadType": "global",
        "x": 200,
        "y": 1960,
        "wires": [
            [
                "e049c85ce6305d4a"
            ]
        ]
    },
    {
        "id": "e049c85ce6305d4a",
        "type": "function",
        "z": "d18f2ebb0dd49b18",
        "g": "5b1fd42b76148691",
        "name": "function 52",
        "func": "// Definim les variables del sensor i el concepte\nconst sensor = 'fallada_alimentacio';\nconst concepte = 'falladaalimentacio';\n\n\n\n\n// Dades d'entrada\nconst valor = msg.payload;\n\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.${concepte}.estat`, alarmActive);\n    global.set(`alarmes.${concepte}.lectura`, valor);\n    global.set(`alarmes.${concepte}.missatge`, message);\n}\nif (valor == 0)  {\n    // Si el valor és superior al límit alt i l'alarma no està activa\n    saveGlobalState(1, valor, 5);\n    global.set(`alarmes.${concepte}.fuxa.activa`,1);\n} else {\n\n    saveGlobalState(0, valor, 6);\n    global.set(`alarmes.${concepte}.fuxa.activa`,0);\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "c8e5256f53247cd8",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.0",
        "value": "",
        "name": "reserva",
        "x": 460,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "1fd0653b9084dabe",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.1",
        "value": "",
        "name": "Com. dosificadora pre",
        "x": 500,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "46826c015d39b932",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.2",
        "value": "",
        "name": "reserva",
        "x": 460,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "cb4d00e0cd32d6a5",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.3",
        "value": "",
        "name": "Com. dosificadora post",
        "x": 500,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "f8b180d5673e9f5e",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.4",
        "value": "",
        "name": "Com. dosificadora acid",
        "x": 500,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "6298ba6219eea5e7",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.5",
        "value": "",
        "name": "Comandament b.filtre sorra",
        "x": 520,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "2552f743350cb4a5",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.6",
        "value": "",
        "name": "Com. obrir valvula Cal Esteve Dip. petit",
        "x": 550,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "53b737ac84109d26",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "8d85dfe2ba06b248",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q0.7",
        "value": "",
        "name": "Com. obrir valvula Cal Esteve Dip. gran",
        "x": 560,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "571d619347f63776",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "571e4c9a782e5a6e",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q1.0",
        "value": "",
        "name": "Com. obrir valvula bypass",
        "x": 510,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "cc34bd6a52a5158e",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "571e4c9a782e5a6e",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q1.1",
        "value": "",
        "name": "Com. bomba Gronxadors (reserva)",
        "x": 540,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "e3aa986b559cfd12",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d2.comand",
        "payloadType": "global",
        "x": 190,
        "y": 240,
        "wires": [
            [
                "cb4d00e0cd32d6a5"
            ]
        ]
    },
    {
        "id": "2fdedc5c566f29d7",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d1.comand",
        "payloadType": "global",
        "x": 190,
        "y": 160,
        "wires": [
            [
                "1fd0653b9084dabe"
            ]
        ]
    },
    {
        "id": "dd530ce857ce2ff8",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d3.comand",
        "payloadType": "global",
        "x": 190,
        "y": 280,
        "wires": [
            [
                "f8b180d5673e9f5e"
            ]
        ]
    },
    {
        "id": "27bee515c8b1c476",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "b1.comand",
        "payloadType": "global",
        "x": 190,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "99f7e5793c3c208b",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v1.comand",
        "payloadType": "global",
        "x": 190,
        "y": 360,
        "wires": [
            [
                "2552f743350cb4a5"
            ]
        ]
    },
    {
        "id": "0e71f8209b0742a0",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v2.comand",
        "payloadType": "global",
        "x": 190,
        "y": 400,
        "wires": [
            [
                "53b737ac84109d26"
            ]
        ]
    },
    {
        "id": "9c6f818720c8d1a2",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v3.comand",
        "payloadType": "global",
        "x": 190,
        "y": 500,
        "wires": [
            [
                "571d619347f63776"
            ]
        ]
    },
    {
        "id": "2a767d0b9b1344b3",
        "type": "inject",
        "z": "ef7a0ef305dd237e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "intrusio.acusticqe",
        "payloadType": "global",
        "x": 210,
        "y": 580,
        "wires": [
            [
                "3ce168dec0734a7b"
            ]
        ]
    },
    {
        "id": "3ce168dec0734a7b",
        "type": "rpiplc-digital-write",
        "z": "ef7a0ef305dd237e",
        "g": "571e4c9a782e5a6e",
        "rpiplc": "0fb89c37278c5b07",
        "pin": "Q1.2",
        "value": "",
        "name": "Brunzidor QE",
        "x": 480,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "cc72850f6f3752bd",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Cabal instantani arderiu",
        "topic": "EA 1",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8208",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "43.4536",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 200,
        "y": 2180,
        "wires": [
            [
                "aeafb92202bb68c2"
            ],
            []
        ]
    },
    {
        "id": "4f52e74b53f842af",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Cabal instantani can felix poble",
        "topic": "EA 2",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8207",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "44.453",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 230,
        "y": 2220,
        "wires": [
            [
                "eef78d4a289849c7"
            ],
            []
        ]
    },
    {
        "id": "aeafb92202bb68c2",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "cabal6.ea",
        "rules": [
            {
                "t": "set",
                "p": "cabal6.ea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 2180,
        "wires": [
            [
                "e90cc7aa96138aae"
            ]
        ]
    },
    {
        "id": "eef78d4a289849c7",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "cabal7.ea",
        "rules": [
            {
                "t": "set",
                "p": "cabal7.ea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 2220,
        "wires": [
            [
                "c00560783c1ac154"
            ]
        ]
    },
    {
        "id": "5f99e5cadd934fca",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "UMF3 correcte",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8192",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "25.32",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 1480,
        "wires": [
            [
                "dc193b3db33837fe",
                "007e9eca7c051f6f"
            ],
            []
        ]
    },
    {
        "id": "dc193b3db33837fe",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Tarja ok o no",
        "func": "// si la lectura es 5 la tarja està correcte\nlet lectura = msg.payload[0];\n\nif (lectura == 5) {\n    msg = 1;\n} else {\n    msg = 0;\n}\n\n\n// Guardar el valor combinado como entero en el contexto global\nglobal.set('plc.tarja3', msg);",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "e90cc7aa96138aae",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "minin": "0",
        "maxin": "32767",
        "minout": "0",
        "maxout": "20",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 590,
        "y": 2180,
        "wires": [
            [
                "d3094fccfbc53052"
            ]
        ]
    },
    {
        "id": "c00560783c1ac154",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "minin": "0",
        "maxin": "32767",
        "minout": "0",
        "maxout": "50",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 590,
        "y": 2220,
        "wires": [
            [
                "6e5fc8d172280392"
            ]
        ]
    },
    {
        "id": "94f3684763b1c83a",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Instantani cabal rentat filtre sorra",
        "func": "// Obtener el valor de litros por impulso desde la variable global\nlet L_imp = global.get('cabal4.limp'); \n\n// Obtener los valores del array del payload\nlet period = flow.get('ed14.period');\nlet puls = flow.get('ed14.puls');\nlet cperiod = msg.payload;\n\n// Inicializar la variable aux\nlet aux = 0;\n\n// Cálculo de caudal instantáneo\nif (cperiod > 1 && cperiod < 15000) {\n    aux = (puls * 18000) / period;\n}\n\n\nlet cabal = aux * L_imp/100;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(cabal.toFixed(1));\n\n// Guardar el valor combinado como entero en el contexto global\nglobal.set('cabal4.inst', roundedValue);\n\n// Devolver el mensaje con el caudal instantáneo\nmsg.payload = {\n    period: period,\n    puls: puls,\n    cperiod: cperiod,\n    cabal: roundedValue\n};\n\n// Devolver el mensaje\nreturn msg;\n\n\n\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 800,
        "wires": [
            [
                "d14fdba1d1d63003"
            ]
        ]
    },
    {
        "id": "d14fdba1d1d63003",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 133",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 800,
        "wires": []
    },
    {
        "id": "f9168b180ea0e4f2",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Period ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8223",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "13.13353",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 720,
        "wires": [
            [
                "bf7cb4835af53658"
            ],
            []
        ]
    },
    {
        "id": "98cb96487bd3fecf",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "UMF1 correcte",
        "topic": "t1ok",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8192",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "1.115",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 300,
        "wires": [
            [
                "32de1f20250e2833",
                "6f6046769b6253d4"
            ],
            []
        ]
    },
    {
        "id": "32de1f20250e2833",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Tarja ok o no",
        "func": "// si la lectura es 5 la tarja està correcte\nlet lectura = msg.payload[0];\n\nif (lectura == 5) {\n    msg = 1;\n} else {\n    msg = 0;\n}\n\n\n// Guardar el valor combinado como entero en el contexto global\nglobal.set('plc.tarja1', msg);\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "faa316e39b736737",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Clor pre diposit petit",
        "topic": "EA 1",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8208",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "16.116",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 190,
        "y": 860,
        "wires": [
            [
                "9a3aaf18a5bd0e1d"
            ],
            []
        ]
    },
    {
        "id": "8ad0e9fba9c0fd5f",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Terbolesa",
        "topic": "EA 2",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8207",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "17.117",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 160,
        "y": 900,
        "wires": [
            [
                "92e44a03050101bc"
            ],
            []
        ]
    },
    {
        "id": "c999d4ca421f7cfc",
        "type": "modbus-write",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Proporcional valvula entrada diposit nou",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "8211",
        "quantity": "1",
        "server": "6975f089b473afa8",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 520,
        "y": 960,
        "wires": [
            [
                "1cad5cfa0c91e91e"
            ],
            []
        ]
    },
    {
        "id": "04caea1045385af9",
        "type": "modbus-write",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Proporcional dosificadora acid",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "8212",
        "quantity": "1",
        "server": "6975f089b473afa8",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 490,
        "y": 1040,
        "wires": [
            [
                "4e2fc1a3ccb14648"
            ],
            []
        ]
    },
    {
        "id": "9a3aaf18a5bd0e1d",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "analitzador1.ea",
        "rules": [
            {
                "t": "set",
                "p": "analitzador1.ea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 860,
        "wires": [
            [
                "1919ec360abdb14a"
            ]
        ]
    },
    {
        "id": "92e44a03050101bc",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "analitzador3.ea",
        "rules": [
            {
                "t": "set",
                "p": "analitzador3.ea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 900,
        "wires": [
            [
                "b4eb1fe4239d28f1"
            ]
        ]
    },
    {
        "id": "1919ec360abdb14a",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "minin": "0",
        "maxin": "32767",
        "minout": "0",
        "maxout": "2",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 610,
        "y": 860,
        "wires": [
            [
                "f18f1bd64de377e9"
            ]
        ]
    },
    {
        "id": "b4eb1fe4239d28f1",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "minin": "0",
        "maxin": "32767",
        "minout": "0",
        "maxout": "10",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 610,
        "y": 900,
        "wires": [
            [
                "acf95e42e5160214"
            ]
        ]
    },
    {
        "id": "3c3a9797cc9c9122",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 138",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 860,
        "wires": []
    },
    {
        "id": "01cda01328f69de6",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 139",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 900,
        "wires": []
    },
    {
        "id": "14af1dccbfc83bbd",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "E0, 1, 2, 3 i 4",
        "topic": "acid",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "2",
        "dataType": "Coil",
        "adr": "0",
        "quantity": "5",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "21.678",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 1240,
        "wires": [
            [
                "0fc17e6f705cf533"
            ],
            []
        ]
    },
    {
        "id": "a99632b53d2e59c0",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "Cabal instantani entrada dip. nou",
        "topic": "cabalin_dipnou",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "2",
        "dataType": "InputRegister",
        "adr": "8208",
        "quantity": "1",
        "rate": "30",
        "rateUnit": "s",
        "delayOnStart": true,
        "startDelayTime": "22.4332",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 230,
        "y": 1300,
        "wires": [
            [
                "8bef82416b8800c5"
            ],
            []
        ]
    },
    {
        "id": "b2c8a990a1d7425d",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "Cabal instantani  bypass",
        "topic": "cabal_bypass",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "2",
        "dataType": "InputRegister",
        "adr": "8207",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "23.8221",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 200,
        "y": 1340,
        "wires": [
            [
                "61bfc6b3f0c18d37"
            ],
            []
        ]
    },
    {
        "id": "4848c4f2213139fc",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "UMF2 correcte",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "2",
        "dataType": "InputRegister",
        "adr": "8192",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "20.123",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 1200,
        "wires": [
            [
                "c406e9ce7f02a1f6"
            ],
            []
        ]
    },
    {
        "id": "c406e9ce7f02a1f6",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "Tarja ok o no",
        "func": "// si la lectura es 5 la tarja està correcte\nlet lectura = msg.payload[0];\n\nif (lectura == 5) {\n    msg = 1;\n} else {\n    msg = 0;\n}\n\n\n// Guardar el valor combinado como entero en el contexto global\nglobal.set('plc.tarja2', msg);\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1200,
        "wires": [
            [
                "ee7acd1f498b0c54"
            ]
        ]
    },
    {
        "id": "a936e1cf0b51043e",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "minin": "0",
        "maxin": "32767",
        "minout": "0",
        "maxout": "50",
        "action": "roll",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 570,
        "y": 1300,
        "wires": [
            [
                "4c4c1e8d9d935386"
            ]
        ]
    },
    {
        "id": "45d4bdb60859fe3f",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "minin": "0",
        "maxin": "32767",
        "minout": "0",
        "maxout": "30",
        "action": "roll",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 570,
        "y": 1340,
        "wires": [
            [
                "a9b6dadb02e9660b"
            ]
        ]
    },
    {
        "id": "0fc17e6f705cf533",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "Entrades digitals UMF2",
        "func": "// Obtener los valores de word1 y word2 del array del payload\nlet ed0 = msg.payload[0];\nlet ed1 = msg.payload[1];\nlet ed2 = msg.payload[2];\nlet ed3 = msg.payload[3];\nlet ed4 = msg.payload[4];\n\n// Convertir de booleanos a 0 o 1\ned0 = ed0 ? 1 : 0;\ned1 = ed1 ? 1 : 0;\ned2 = ed2 ? 1 : 0;\ned3 = ed3 ? 1 : 0;\ned4 = ed4 ? 1 : 0;\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('b1.selector', ed0);\nglobal.set('v3.selector', ed1);\nglobal.set('v2.selector', ed2);\nglobal.set('v1.selector', ed3);\nglobal.set('d3.selector', ed4);\n\n// También puedes devolver el mensaje si lo necesitas\nmsg.payload = {\n    dosifacid: ed0,\n    valvdippetit: ed1,\n    valvdipgran: ed2,\n    valvbypass: ed3,\n    bombfiltresorra: ed4\n};\n\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1240,
        "wires": [
            [
                "c83c22f651029e6a"
            ]
        ]
    },
    {
        "id": "cd847ac34958f124",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "debug 142",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 1340,
        "wires": []
    },
    {
        "id": "2d895c362130e849",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "pHA",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "4",
        "dataType": "InputRegister",
        "adr": "4358",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "3",
        "server": "129adc3430aeda3b",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 150,
        "y": 2440,
        "wires": [
            [
                "07d0f684c73b006b"
            ],
            []
        ],
        "outputLabels": [
            "1",
            "2"
        ]
    },
    {
        "id": "749a2cce34a16d74",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "pHB",
        "topic": "pH",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "4",
        "dataType": "InputRegister",
        "adr": "4359",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "4",
        "server": "129adc3430aeda3b",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 150,
        "y": 2480,
        "wires": [
            [
                "f8afea510f09371f"
            ],
            []
        ],
        "outputLabels": [
            "1",
            "2"
        ]
    },
    {
        "id": "55f57ee6678e4303",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clor.baix",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2380,
        "wires": [
            [
                "f0e76529169db28f"
            ]
        ]
    },
    {
        "id": "96ada0a568f14d20",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clor.alt",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2340,
        "wires": [
            []
        ]
    },
    {
        "id": "bf6fd7c055d2fced",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "clorA",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "4",
        "dataType": "InputRegister",
        "adr": "4614",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "1",
        "server": "129adc3430aeda3b",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 150,
        "y": 2340,
        "wires": [
            [
                "96ada0a568f14d20"
            ],
            []
        ],
        "outputLabels": [
            "1",
            "2"
        ]
    },
    {
        "id": "f8afea510f09371f",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pH.baix",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2480,
        "wires": [
            [
                "2b0a8df684974e30"
            ]
        ]
    },
    {
        "id": "07d0f684c73b006b",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pH.alt",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "5d0833a2c377bed1",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "clorB",
        "topic": "clor",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "4",
        "dataType": "InputRegister",
        "adr": "4615",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "2",
        "server": "129adc3430aeda3b",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 150,
        "y": 2380,
        "wires": [
            [
                "55f57ee6678e4303"
            ],
            []
        ],
        "outputLabels": [
            "1",
            "2"
        ]
    },
    {
        "id": "2b0a8df684974e30",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "Convertir a Float",
        "func": "// Obtener los valores de word1 y word2 del array del payload\nlet word1 = flow.get('pH.alt');\nlet word2 = msg.payload;\n\n// Combinar los dos words en un solo entero de 32 bits\nlet combined = (word1 << 16) | word2;\n\n// Crear un buffer para los bytes combinados\nlet buffer = Buffer.alloc(4);\nbuffer.writeUInt32BE(combined, 0);\n\n// Leer el valor de punto flotante del buffer\nlet floatValue = buffer.readFloatBE(0);\n\n// Redondear el valor flotante a tres decimales\nfloatValue = parseFloat(floatValue.toFixed(1));\n\n// Obtener la fecha del contexto global\nglobal.set('analitzador2.ph', floatValue);\n\n// Crear el nuevo payload con los valores deseados\nmsg.payload = {\n    Valor: floatValue\n};\n\n// Devolver el mensaje\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 2480,
        "wires": [
            [
                "ae62d11f90ef6956"
            ]
        ]
    },
    {
        "id": "f0e76529169db28f",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "Convertir a Float",
        "func": "// Obtener los valores de word1 y word2 del array del payload\nlet word1 = flow.get('clor.alt');\nlet word2 = msg.payload;\n\n// Combinar los dos words en un solo entero de 32 bits\nlet combined = (word1 << 16) | word2;\n\n// Crear un buffer para los bytes combinados\nlet buffer = Buffer.alloc(4);\nbuffer.writeUInt32BE(combined, 0);\n\n// Leer el valor de punto flotante del buffer\nlet floatValue = buffer.readFloatBE(0);\n\n// Redondear el valor flotante a tres decimales\nfloatValue = parseFloat(floatValue.toFixed(3));\n\n// Obtener la fecha del contexto global\nglobal.set('analitzador2.clor', floatValue);\n\n// Crear el nuevo payload con los valores deseados\nmsg.payload = {\n    Valor: floatValue\n};\n\n// Devolver el mensaje\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 2380,
        "wires": [
            [
                "d27483b2591442a5"
            ]
        ]
    },
    {
        "id": "d27483b2591442a5",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "debug 143",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 2380,
        "wires": []
    },
    {
        "id": "ae62d11f90ef6956",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "c45707e804209f80",
        "name": "debug 144",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 2480,
        "wires": []
    },
    {
        "id": "ee7acd1f498b0c54",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "debug 146",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1200,
        "wires": []
    },
    {
        "id": "6f6046769b6253d4",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 148",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 300,
        "wires": []
    },
    {
        "id": "007e9eca7c051f6f",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 149",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1480,
        "wires": []
    },
    {
        "id": "3ed18510a3c8d0d9",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Entrades digitals UMF3",
        "func": "// Obtener los valores de word1 y word2 del array del payload\nlet ed1 = msg.payload[1];\nlet ed2 = msg.payload[2];\nlet ed3 = msg.payload[3];\n\n// Convertir de booleanos a 0 o 1\ned1 = ed1 ? 1 : 0;\ned2 = ed2 ? 1 : 0;\ned3 = ed3 ? 1 : 0;\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('filtre.marxa', ed1);\nglobal.set('filtre.pres', ed2);\nglobal.set('b1.marxa', ed3);\n\n// También puedes devolver el mensaje si lo necesitas\nmsg.payload = {\n    maniobrafiltre: ed1,\n    pressostatfiltre: ed2,\n    bomba1filtre: ed3,\n};\n\nreturn msg\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1520,
        "wires": [
            [
                "2069b573f4670348"
            ]
        ]
    },
    {
        "id": "2069b573f4670348",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 156",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1520,
        "wires": []
    },
    {
        "id": "814d5a4510c71a63",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1000",
        "payloadType": "num",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "439d3548645f3dfe"
            ]
        ]
    },
    {
        "id": "439d3548645f3dfe",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "L/imp Cabal diposit2 Cal Esteve",
        "rules": [
            {
                "t": "set",
                "p": "cabal3.limp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "5b351e48f66d3302",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "x": 150,
        "y": 100,
        "wires": [
            [
                "06171cb2d973ff23"
            ]
        ]
    },
    {
        "id": "06171cb2d973ff23",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "L/imp Cabal Arderiu i futbol",
        "rules": [
            {
                "t": "set",
                "p": "cabal6.limp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "f2bbb34f0455641d",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "9a8fbfe7bc1fc7b2"
            ]
        ]
    },
    {
        "id": "9a8fbfe7bc1fc7b2",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "L/imp Cabal Felix i poble",
        "rules": [
            {
                "t": "set",
                "p": "cabal7.limp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "4e1290f183b868b3",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1000",
        "payloadType": "num",
        "x": 150,
        "y": 180,
        "wires": [
            [
                "768a6305ab9d74dc"
            ]
        ]
    },
    {
        "id": "768a6305ab9d74dc",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "L/imp Cabal bypass",
        "rules": [
            {
                "t": "set",
                "p": "cabal5.limp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "21e91e0ba475afdd",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 570,
        "y": 60,
        "wires": [
            [
                "b0793a3d1866d1c6"
            ]
        ]
    },
    {
        "id": "b0793a3d1866d1c6",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "L/imp Cabal rentat filtres",
        "rules": [
            {
                "t": "set",
                "p": "cabal4.limp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "d34a12912135cab5",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10",
        "payloadType": "num",
        "x": 570,
        "y": 100,
        "wires": [
            [
                "1f8384fe6ed02526"
            ]
        ]
    },
    {
        "id": "1f8384fe6ed02526",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "L/imp Cabal diposit1 Cal Esteve",
        "rules": [
            {
                "t": "set",
                "p": "cabal2.limp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "93cf34f05385c29f",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10",
        "payloadType": "num",
        "x": 570,
        "y": 140,
        "wires": [
            [
                "2513aff14b06b452"
            ]
        ]
    },
    {
        "id": "2513aff14b06b452",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "1af84737a891cd02",
        "name": "L/imp Cabal Gronxadors",
        "rules": [
            {
                "t": "set",
                "p": "cabal1.limp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "60e8fc448c532454",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Tensió alim quadre",
        "topic": "t1alim",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8205",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "2.124",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 190,
        "y": 340,
        "wires": [
            [
                "a892b90efe1866f4"
            ],
            []
        ]
    },
    {
        "id": "a892b90efe1866f4",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Convertir a Float",
        "func": "// Obtener los valores de word1 y word2 del array del payload\nlet combined = msg.payload;\n\n// Realizar el cálculo\nlet calcul = 30 * (combined / 32767);\n\n// Redondear el valor flotante a dos decimales\nlet floatValue = parseFloat(calcul.toFixed(2));\n\n// Guardar el valor combinado como flotante en el contexto global\nglobal.set('plc.talim', floatValue);\n\n// Crear el nuevo payload con los valores deseados\nmsg.payload = {\n    Valor: floatValue\n};\n\n// Devolver el mensaje\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 340,
        "wires": [
            [
                "0cfb0f567d1a8920"
            ]
        ]
    },
    {
        "id": "0cfb0f567d1a8920",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 160",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 340,
        "wires": []
    },
    {
        "id": "d77934f20cae1061",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "20 mA",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "32767",
        "payloadType": "num",
        "x": 150,
        "y": 1080,
        "wires": [
            [
                "04caea1045385af9"
            ]
        ]
    },
    {
        "id": "ce6eabe2a6765311",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "4 mA",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "x": 150,
        "y": 1040,
        "wires": [
            [
                "04caea1045385af9"
            ]
        ]
    },
    {
        "id": "2fcdf6e11422de48",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "debug 162",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 1300,
        "wires": []
    },
    {
        "id": "c83c22f651029e6a",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "debug 164",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1240,
        "wires": []
    },
    {
        "id": "a18fc374aa452ba7",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Totalitzadors ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8213",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "3.132",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 400,
        "wires": [
            [
                "0d28c250e46f07f1"
            ],
            []
        ]
    },
    {
        "id": "77fd90961e9582de",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Totalitzadors ED1",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8215",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "5.154",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 460,
        "wires": [
            [
                "c75fe7a88f872952"
            ],
            []
        ]
    },
    {
        "id": "5398652ff646ee52",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Totalitzadors ED2",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8217",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "7.1744",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 520,
        "wires": [
            [
                "3a4f3966dc568f33"
            ],
            []
        ]
    },
    {
        "id": "0825d9b1aeb256f0",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Totalitzadors ED3",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8219",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "9.1956",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 580,
        "wires": [
            [
                "4dc731cac0fd5fca"
            ],
            []
        ]
    },
    {
        "id": "0ff50efd5d9055f9",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Totalitzadors ED4",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8221",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "11.11032",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 640,
        "wires": [
            [
                "b4e39d8d51d7eb45"
            ],
            []
        ]
    },
    {
        "id": "1f5e5434db0c0962",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Puls ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8224",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "14.14481",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 160,
        "y": 760,
        "wires": [
            [
                "c187fab1092b9f26"
            ],
            []
        ]
    },
    {
        "id": "86c48526fd91ad8f",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Cperiod ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "1",
        "dataType": "InputRegister",
        "adr": "8225",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "15.7676",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 800,
        "wires": [
            [
                "ea6988142098c9e6"
            ],
            []
        ]
    },
    {
        "id": "bf7cb4835af53658",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed14.period",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "c187fab1092b9f26",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed14.puls",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 760,
        "wires": [
            [
                "ce9ba80c23329bc0"
            ]
        ]
    },
    {
        "id": "ea6988142098c9e6",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed14.cperiod",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 800,
        "wires": [
            [
                "94f3684763b1c83a"
            ]
        ]
    },
    {
        "id": "bf043b459aade923",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "E0, 1, 2, 3 i 4",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "3",
        "dataType": "Coil",
        "adr": "0",
        "quantity": "5",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "26.452",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 1520,
        "wires": [
            [
                "3ed18510a3c8d0d9"
            ],
            []
        ]
    },
    {
        "id": "07353153e3f2f085",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Instantani Cabal Gronxadors",
        "func": "// Obtener el valor de litros por impulso desde la variable global\nlet L_imp = global.get('cabal1.limp'); // Asegúrate de que 'cabal1.limp' existe y es un número válido\nlet estat = global.get('bgronxadors.estat');\n\n// Obtener los valores del contexto del flow\nlet period = flow.get('ed34.period');\nlet puls = flow.get('ed34.puls');\nlet cperiod = msg.payload;\n\n// Inicializar la variable aux y cabal\nlet aux = 0;\nlet cabal = 0;\n\n// Cálculo de caudal instantáneo\nif (cperiod > 1 && cperiod < 15000) {\n    aux = (puls * 18000) / period;\n}\n\n// Determinar el valor de 'cabal' dependiendo del estado 'estat'\nif (estat === 0) {\n    cabal = 0;\n} else {\n    cabal = aux * L_imp / 100;\n}\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(cabal.toFixed(1));\n\n// Guardar el valor combinado como entero en el contexto global\nglobal.set('cabal1.inst', roundedValue);\n\n// Devolver el mensaje con el caudal instantáneo\nmsg.payload = {\n    period: period,\n    puls: puls,\n    cperiod: cperiod,\n    cabal: roundedValue\n};\n\n// Devolver el mensaje\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 2100,
        "wires": [
            [
                "bd2285d20773e9b8"
            ]
        ]
    },
    {
        "id": "bd2285d20773e9b8",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 165",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 2100,
        "wires": []
    },
    {
        "id": "da85d9fe9bae8baf",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Period ED4",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8235",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "40.432",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 2020,
        "wires": [
            [
                "9b9980aee8ad4ae2"
            ],
            []
        ]
    },
    {
        "id": "406f92387106f109",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Totalitzadors ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8213",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "27.324",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 1580,
        "wires": [
            [
                "e3062c8453336511"
            ],
            []
        ]
    },
    {
        "id": "a10dc5d7b31fab9c",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Totalitzadors ED1",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8215",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "29.435",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 1640,
        "wires": [
            [
                "3c6fe822f6374303"
            ],
            []
        ]
    },
    {
        "id": "1470d92199319171",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Totalitzadors ED2",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8217",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "31.574",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 1700,
        "wires": [
            [
                "01ff2d47b01f76ec"
            ],
            []
        ]
    },
    {
        "id": "641e52862bc7933e",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Totalitzadors ED3",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8219",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "33.435",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 1760,
        "wires": [
            [
                "f39d868ab284f023"
            ],
            []
        ]
    },
    {
        "id": "b466fa669edbfb83",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Totalitzadors ED4",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8221",
        "quantity": "2",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "35.453",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 180,
        "y": 1820,
        "wires": [
            [
                "aaab559685211d5e"
            ],
            []
        ]
    },
    {
        "id": "ad73d76acf6c73a3",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Puls ED4",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8236",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "41.5433",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 160,
        "y": 2060,
        "wires": [
            [
                "57b1fa0e311759be"
            ],
            []
        ]
    },
    {
        "id": "3494f2549b23df41",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Cperiod ED4",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8237",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "42.433",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 2100,
        "wires": [
            [
                "b10f26b4dab72ee0"
            ],
            []
        ]
    },
    {
        "id": "9b9980aee8ad4ae2",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed34.period",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "57b1fa0e311759be",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed34.puls",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "b10f26b4dab72ee0",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed34.cperiod",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 2100,
        "wires": [
            [
                "07353153e3f2f085"
            ]
        ]
    },
    {
        "id": "4d21453f032a7021",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Period ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8223",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "37.453",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 1900,
        "wires": [
            [
                "770f87e3079d5ac9"
            ],
            []
        ]
    },
    {
        "id": "f60b957c17b696dd",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Instantani Cabal Cal Esteve dip petit",
        "func": "// Obtener el valor de litros por impulso desde la variable global\nlet L_imp = global.get('cabal2.limp'); // Asegúrate de que 'cabal2.limp' existe y es un número válido\nlet estat = global.get('v1.oberta');\n\n// Obtener los valores del contexto del flow\nlet period = flow.get('ed30.period');\nlet puls = flow.get('ed30.puls');\nlet cperiod = msg.payload;\n\n// Inicializar la variable aux y cabal\nlet aux = 0;\nlet cabal = 0;\n\n// Cálculo de caudal instantáneo\nif (cperiod > 1 && cperiod < 15000) {\n    aux = (puls * 18000) / period;\n}\n\n// Determinar el valor de 'cabal' dependiendo del estado 'estat'\nif (estat === 0) {\n    cabal = 0;\n} else {\n    cabal = aux * L_imp / 100;\n}\n\n// Redondear el valor a dos decimales\nlet roundedValue = parseFloat(cabal.toFixed(2));\n\n// Guardar el valor combinado como entero en el contexto global\nglobal.set('cabal2.inst', roundedValue);\n\n// Devolver el mensaje con el caudal instantáneo\nmsg.payload = {\n    period: period,\n    puls: puls,\n    cperiod: cperiod,\n    cabal: roundedValue\n};\n\n// Devolver el mensaje\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 1980,
        "wires": [
            [
                "2cf7b3ca79860cd1"
            ]
        ]
    },
    {
        "id": "2cf7b3ca79860cd1",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 166",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1980,
        "wires": []
    },
    {
        "id": "04fd3c1cee533414",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Puls ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8224",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "38.434",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 160,
        "y": 1940,
        "wires": [
            [
                "f33c0f31d9da3191"
            ],
            []
        ]
    },
    {
        "id": "1684eb5985d85c07",
        "type": "modbus-read",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Cperiod ED0",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "unitid": "3",
        "dataType": "InputRegister",
        "adr": "8225",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": true,
        "startDelayTime": "39.543",
        "server": "6975f089b473afa8",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 1980,
        "wires": [
            [
                "ba1d108fd5547fe4"
            ],
            []
        ]
    },
    {
        "id": "770f87e3079d5ac9",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed30.period",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 1900,
        "wires": [
            [
                "eedb9f8e6203f121"
            ]
        ]
    },
    {
        "id": "f33c0f31d9da3191",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed30.puls",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 1940,
        "wires": [
            [
                "87fb7338225ab238"
            ]
        ]
    },
    {
        "id": "ba1d108fd5547fe4",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ed30.cperiod",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 1980,
        "wires": [
            [
                "f60b957c17b696dd"
            ]
        ]
    },
    {
        "id": "ccf252ad74f50700",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 167",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 400,
        "wires": []
    },
    {
        "id": "05d880f5d9079463",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 168",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 460,
        "wires": []
    },
    {
        "id": "eb5c1d43bd49d27c",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 169",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 520,
        "wires": []
    },
    {
        "id": "f738bd26e7c25dc9",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 170",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 580,
        "wires": []
    },
    {
        "id": "5aa89d80589e7fef",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 171",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 640,
        "wires": []
    },
    {
        "id": "8bef82416b8800c5",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "ea",
        "rules": [
            {
                "t": "set",
                "p": "cabal3.ea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 1300,
        "wires": [
            [
                "a936e1cf0b51043e"
            ]
        ]
    },
    {
        "id": "61bfc6b3f0c18d37",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "ea",
        "rules": [
            {
                "t": "set",
                "p": "cabal5.ea",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 1340,
        "wires": [
            [
                "45d4bdb60859fe3f"
            ]
        ]
    },
    {
        "id": "2a124257113345fe",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 172",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 2180,
        "wires": []
    },
    {
        "id": "c24a1b1d28aedd99",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 173",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 2220,
        "wires": []
    },
    {
        "id": "f18f1bd64de377e9",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "analitzador1.clor",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(2));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('analitzador1.clor', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 860,
        "wires": [
            [
                "3c3a9797cc9c9122"
            ]
        ]
    },
    {
        "id": "acf95e42e5160214",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "analitzador3.terb",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(2));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('analitzador3.terb', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 900,
        "wires": [
            [
                "01cda01328f69de6"
            ]
        ]
    },
    {
        "id": "ce9ba80c23329bc0",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "debug 174",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 760,
        "wires": []
    },
    {
        "id": "cecf33eb5c422d79",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 175",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1700,
        "wires": []
    },
    {
        "id": "9b82113eecf059e2",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 179",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1580,
        "wires": []
    },
    {
        "id": "eedb9f8e6203f121",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 180",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1900,
        "wires": []
    },
    {
        "id": "87fb7338225ab238",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 181",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1940,
        "wires": []
    },
    {
        "id": "7254f01a2ba46baf",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "cabal3.inst",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(2));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('cabal3.inst', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1300,
        "wires": [
            [
                "2fcdf6e11422de48"
            ]
        ]
    },
    {
        "id": "a9b6dadb02e9660b",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "cabal5.inst",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(2));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('cabal5.inst', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1340,
        "wires": [
            [
                "cd847ac34958f124"
            ]
        ]
    },
    {
        "id": "d3094fccfbc53052",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "cabal6.inst",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(2));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('cabal6.inst', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 2180,
        "wires": [
            [
                "2a124257113345fe"
            ]
        ]
    },
    {
        "id": "6e5fc8d172280392",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "cabal7.inst",
        "func": "// Obtener el valor del payload\nlet value = msg.payload;\n\n// Redondear el valor a un decimal\nlet roundedValue = parseFloat(value.toFixed(2));\n\n// Guardar el valor redondeado en el contexto global\nglobal.set('cabal7.inst', roundedValue);\n\n// Devolver el mensaje con el nuevo valor\nmsg.payload = roundedValue;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 2220,
        "wires": [
            [
                "c24a1b1d28aedd99"
            ]
        ]
    },
    {
        "id": "4c4c1e8d9d935386",
        "type": "switch",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0.2",
                "vt": "num"
            },
            {
                "t": "lte",
                "v": "0.2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 710,
        "y": 1300,
        "wires": [
            [
                "7254f01a2ba46baf"
            ],
            [
                "79733c6749eabcb8"
            ]
        ]
    },
    {
        "id": "79733c6749eabcb8",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 935,
        "y": 1320,
        "wires": [
            [
                "7254f01a2ba46baf"
            ]
        ],
        "l": false
    },
    {
        "id": "93f0043dc20ced01",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 935,
        "y": 1360,
        "wires": [
            [
                "a9b6dadb02e9660b"
            ]
        ],
        "l": false
    },
    {
        "id": "af99dee93aebaf60",
        "type": "switch",
        "z": "fc4592acfe4a957a",
        "g": "3d3d5d7c2a056bfc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0.2",
                "vt": "num"
            },
            {
                "t": "lte",
                "v": "0.2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 710,
        "y": 1340,
        "wires": [
            [],
            [
                "93f0043dc20ced01"
            ]
        ]
    },
    {
        "id": "210afc3dab0a138d",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "minin": "100",
        "maxin": "32767",
        "minout": "0",
        "maxout": "4",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 790,
        "y": 1040,
        "wires": [
            [
                "9d801473557daee7"
            ]
        ]
    },
    {
        "id": "9d801473557daee7",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d3.proporcio",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "e032bf41fe585d41",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v2.posicio",
                "pt": "global",
                "to": "100",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "8c403e48eb8ed1bf",
        "type": "range",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "minin": "100",
        "maxin": "32767",
        "minout": "0",
        "maxout": "100",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 820,
        "y": 960,
        "wires": [
            [
                "dfdf734cea7e16a8"
            ]
        ]
    },
    {
        "id": "1cad5cfa0c91e91e",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 715,
        "y": 960,
        "wires": [
            [
                "8c403e48eb8ed1bf"
            ]
        ],
        "l": false
    },
    {
        "id": "4e2fc1a3ccb14648",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 685,
        "y": 1040,
        "wires": [
            [
                "210afc3dab0a138d"
            ]
        ],
        "l": false
    },
    {
        "id": "2e8b1b91881c3560",
        "type": "inject",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "v2.consigna.posicio",
        "payloadType": "global",
        "x": 220,
        "y": 960,
        "wires": [
            [
                "c999d4ca421f7cfc"
            ]
        ]
    },
    {
        "id": "dfdf734cea7e16a8",
        "type": "switch",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "property": "v2.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 960,
        "wires": [
            [
                "e032bf41fe585d41"
            ],
            [
                "98a71e3f420a438f"
            ]
        ]
    },
    {
        "id": "98a71e3f420a438f",
        "type": "switch",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "property": "v2.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1070,
        "y": 1000,
        "wires": [
            [
                "2e36525c1bf8df64"
            ],
            [
                "110cb313f288cd3f"
            ]
        ]
    },
    {
        "id": "2e36525c1bf8df64",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v2.posicio",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "110cb313f288cd3f",
        "type": "change",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "v2.posicio",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "0d28c250e46f07f1",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Cabal total rentat filtre sorra",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Obtener el valor de litros por impulso desde la variable global\nlet litrosPorImpulso = global.get('cabal4.limp');\n\n\n// Convertir el volumen total a metros cúbicos\nlet volumenTotalMetrosCubicos = (finalValue/1000)*litrosPorImpulso;\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nvolumenTotalMetrosCubicos = parseFloat(volumenTotalMetrosCubicos.toFixed(1));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('cabal4.acum', volumenTotalMetrosCubicos);\n\n\n// Asignar el valor final a msg.payload\nmsg.payload = volumenTotalMetrosCubicos;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 400,
        "wires": [
            [
                "ccf252ad74f50700"
            ]
        ]
    },
    {
        "id": "c75fe7a88f872952",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Cabal total bypass",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Obtener el valor de litros por impulso desde la variable global\nlet litrosPorImpulso = global.get('cabal5.limp');\n\n\n// Convertir el volumen total a metros cúbicos\nlet volumenTotalMetrosCubicos = (finalValue*litrosPorImpulso)/1000;\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nvolumenTotalMetrosCubicos = parseFloat(volumenTotalMetrosCubicos.toFixed(1));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('cabal5.acum', volumenTotalMetrosCubicos);\n\n\n// Asignar el valor final a msg.payload\nmsg.payload = volumenTotalMetrosCubicos;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 460,
        "wires": [
            [
                "05d880f5d9079463"
            ]
        ]
    },
    {
        "id": "3a4f3966dc568f33",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Cabal total sortida Can Felix-poble",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Obtener el valor de litros por impulso desde la variable global\nlet litrosPorImpulso = global.get('cabal7.limp');\n\n\n\n// Convertir el volumen total a metros cúbicos\nlet volumenTotalMetrosCubicos = (finalValue*litrosPorImpulso)/1000\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nvolumenTotalMetrosCubicos = parseFloat(volumenTotalMetrosCubicos.toFixed(1));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('cabal7.acum', volumenTotalMetrosCubicos);\n\n\n// Asignar el valor final a msg.payload\nmsg.payload = volumenTotalMetrosCubicos;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 520,
        "wires": [
            [
                "eb5c1d43bd49d27c"
            ]
        ]
    },
    {
        "id": "4dc731cac0fd5fca",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Cabal total sortida Arderiu-camp futbol ",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Obtener el valor de litros por impulso desde la variable global\nlet litrosPorImpulso = global.get('cabal6.limp');\n\n\n// Convertir el volumen total a metros cúbicos\nlet volumenTotalMetrosCubicos = (finalValue*litrosPorImpulso)/1000\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nvolumenTotalMetrosCubicos = parseFloat(volumenTotalMetrosCubicos.toFixed(1));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('cabal6.acum', volumenTotalMetrosCubicos);\n\n\n// Asignar el valor final a msg.payload\nmsg.payload = volumenTotalMetrosCubicos;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 580,
        "wires": [
            [
                "f738bd26e7c25dc9"
            ]
        ]
    },
    {
        "id": "b4e39d8d51d7eb45",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "0af86376f01f059b",
        "name": "Cabal total entrada dip.gran",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Obtener el valor de litros por impulso desde la variable global\nlet litrosPorImpulso = global.get('cabal3.limp');\n\n\n// Convertir el volumen total a metros cúbicos\nlet volumenTotalMetrosCubicos = (finalValue*litrosPorImpulso)/1000\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nvolumenTotalMetrosCubicos = parseFloat(volumenTotalMetrosCubicos.toFixed(1));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('cabal3.acum', volumenTotalMetrosCubicos);\n\n\n// Asignar el valor final a msg.payload\nmsg.payload = volumenTotalMetrosCubicos;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 640,
        "wires": [
            [
                "5aa89d80589e7fef"
            ]
        ]
    },
    {
        "id": "e3062c8453336511",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Cabal entrada Cal Esteve vell",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Obtener el valor de litros por impulso desde la variable global\nlet litrosPorImpulso = global.get('cabal2.limp');\n\n\n// Convertir el volumen total a metros cúbicos\nlet volumenTotalMetrosCubicos = (finalValue*litrosPorImpulso)/1000;\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nvolumenTotalMetrosCubicos = parseFloat(volumenTotalMetrosCubicos.toFixed(1));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('cabal2.acum', volumenTotalMetrosCubicos);\n\n// Asignar el valor final a msg.payload\nmsg.payload = volumenTotalMetrosCubicos;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 1580,
        "wires": [
            [
                "9b82113eecf059e2"
            ]
        ]
    },
    {
        "id": "3c6fe822f6374303",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Paro bomba filtre rentat",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Convertir el volumen total a metros cúbicos\nlet maniobres = finalValue;\nlet rentats = finalValue/2;\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nmaniobres = parseFloat(maniobres.toFixed(0));\nrentats = parseFloat(rentats.toFixed(0));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('filtre.mani', maniobres);\nglobal.set('filtre.rentatacum', rentats);\n\n// Devolver el mensaje\nmsg.payload = {\n    maniobres: maniobres,\n    rentats: rentats\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1640,
        "wires": [
            [
                "45831b0a736fdc76"
            ]
        ]
    },
    {
        "id": "01ff2d47b01f76ec",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Pressostat seguretat filtre",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Convertir el volumen total a metros cúbicos\nlet maniobres = finalValue;\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nmaniobres = parseFloat(maniobres.toFixed(0));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('filtre.pressacum', maniobres);\n\n// Devolver el mensaje\nmsg.payload = {\n    maniobres: maniobres\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1700,
        "wires": [
            [
                "cecf33eb5c422d79"
            ]
        ]
    },
    {
        "id": "f39d868ab284f023",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Estat bomba filtre",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Convertir el volumen total a metros cúbicos\nlet maniobres = finalValue;\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nmaniobres = parseFloat(maniobres.toFixed(0));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('b1.mani', maniobres);\n\n// Devolver el mensaje\nmsg.payload = {\n    maniobres: maniobres\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1760,
        "wires": [
            [
                "e9ceb38dbadc5c1d"
            ]
        ]
    },
    {
        "id": "aaab559685211d5e",
        "type": "function",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "Cabal entrada Gronxadors",
        "func": "// Supongamos que los valores BCD están en msg.payload, donde \n// msg.payload es un arreglo con 2 elementos: \n// El primer elemento contiene los 2 bytes de 2015H (byte alto y bajo),\n// El segundo elemento contiene los 2 bytes de 2016H (byte alto y bajo).\n\nvar bcd1 = msg.payload[0];  // Primer elemento: 2 bytes BCD de 2015H\nvar bcd2 = msg.payload[1];  // Segundo elemento: 2 bytes BCD de 2016H\n\n// Función para convertir un valor BCD (de 1 byte) a decimal\nfunction bcdToDecimal(bcd) {\n    var digit1 = (bcd >> 4) & 0x0F;  // Cifra más significativa (4 bits)\n    var digit2 = bcd & 0x0F;         // Cifra menos significativa (4 bits)\n    return digit1 * 10 + digit2;     // Convertir el valor BCD a decimal\n}\n\n// Convertir la primera parte (2015H) usando los dos bytes BCD\nvar value1 = bcdToDecimal(bcd1 >> 8) * 100 + bcdToDecimal(bcd1 & 0xFF);  // Para los 2 bytes de 2015H\n\n// Convertir la segunda parte (2016H) usando los dos bytes BCD\nvar value2 = bcdToDecimal(bcd2 >> 8) * 100 + bcdToDecimal(bcd2 & 0xFF);    // Para los 2 bytes de 2016H\n\n// Combinar ambos valores (value1 y value2) para obtener el número completo\nvar finalValue = value1 * 10000 + value2;  // Esto da el número final\n\n\n// Obtener el valor de litros por impulso desde la variable global\nlet litrosPorImpulso = global.get('cabal1.limp');\n\n\n// Convertir el volumen total a metros cúbicos\nlet volumenTotalMetrosCubicos = (finalValue*litrosPorImpulso)/1000;\n\n// Redondear volumenTotalMetrosCubicos a 1 decimal\nvolumenTotalMetrosCubicos = parseFloat(volumenTotalMetrosCubicos.toFixed(1));\n\n// Guardar el valor combinado y el volumen total en el contexto global\nglobal.set('cabal1.acum', volumenTotalMetrosCubicos);\n\n// Asignar el valor final a msg.payload\nmsg.payload = volumenTotalMetrosCubicos;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1820,
        "wires": [
            [
                "ab0abab9fe46a60a"
            ]
        ]
    },
    {
        "id": "45831b0a736fdc76",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 206",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1640,
        "wires": []
    },
    {
        "id": "e9ceb38dbadc5c1d",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 207",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1760,
        "wires": []
    },
    {
        "id": "ab0abab9fe46a60a",
        "type": "debug",
        "z": "fc4592acfe4a957a",
        "g": "9f9cc9de8822527d",
        "name": "debug 208",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1820,
        "wires": []
    },
    {
        "id": "b7e684e429596127",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.vall1.on",
        "payloadType": "global",
        "x": 260,
        "y": 160,
        "wires": [
            [
                "206797ad850874c4"
            ]
        ]
    },
    {
        "id": "be573dfc4d2b591b",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.vall1.off",
        "payloadType": "global",
        "x": 260,
        "y": 220,
        "wires": [
            [
                "18c18c2448cd6f9d"
            ]
        ]
    },
    {
        "id": "0a939f855ae02809",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.plana1.on",
        "payloadType": "global",
        "x": 260,
        "y": 280,
        "wires": [
            [
                "f7517a36ecf8a9dc"
            ]
        ]
    },
    {
        "id": "369ae52e332674d0",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.plana1.off",
        "payloadType": "global",
        "x": 260,
        "y": 340,
        "wires": [
            [
                "3397089ea5633f23"
            ]
        ]
    },
    {
        "id": "84a7ab677a13b7bc",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.plana2.on",
        "payloadType": "global",
        "x": 260,
        "y": 400,
        "wires": [
            [
                "963a44eaea22671f"
            ]
        ]
    },
    {
        "id": "e9b57f84ce9214ee",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.plana2.off",
        "payloadType": "global",
        "x": 260,
        "y": 460,
        "wires": [
            [
                "8d1758299f39521e"
            ]
        ]
    },
    {
        "id": "4751cddaddd3e859",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.plana3.on",
        "payloadType": "global",
        "x": 260,
        "y": 520,
        "wires": [
            [
                "a38aa2bb1d723e05"
            ]
        ]
    },
    {
        "id": "4a478816f0cc719a",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.plana3.off",
        "payloadType": "global",
        "x": 260,
        "y": 580,
        "wires": [
            [
                "af810a858a78a216"
            ]
        ]
    },
    {
        "id": "05d4bac89bafedad",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.punta1.on",
        "payloadType": "global",
        "x": 260,
        "y": 640,
        "wires": [
            [
                "e72ec901f4896f78"
            ]
        ]
    },
    {
        "id": "206797ad850874c4",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.vall1.on",
                "pt": "global",
                "to": "00",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "18c18c2448cd6f9d",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.vall1.off",
                "pt": "global",
                "to": "08",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "3be2780e0dbf2d29",
        "type": "comment",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "Declarar Globals genèriques",
        "info": "",
        "x": 200,
        "y": 100,
        "wires": []
    },
    {
        "id": "f7517a36ecf8a9dc",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana1.on",
                "pt": "global",
                "to": "08",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "3397089ea5633f23",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana1.off",
                "pt": "global",
                "to": "10",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "963a44eaea22671f",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana2.on",
                "pt": "global",
                "to": "14",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "8d1758299f39521e",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana2.off",
                "pt": "global",
                "to": "18",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "a38aa2bb1d723e05",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana3.on",
                "pt": "global",
                "to": "22",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "af810a858a78a216",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana3.off",
                "pt": "global",
                "to": "00",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "e72ec901f4896f78",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.punta1.on",
                "pt": "global",
                "to": "10",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "b71786898ded190b",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.punta1.off",
        "payloadType": "global",
        "x": 260,
        "y": 700,
        "wires": [
            [
                "3ef0d30e74135c18"
            ]
        ]
    },
    {
        "id": "29547304faaaad1e",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.punta2.on",
        "payloadType": "global",
        "x": 260,
        "y": 760,
        "wires": [
            [
                "4d42cdf2c783f393"
            ]
        ]
    },
    {
        "id": "b12a30a1ae9a60ff",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "horaritarifa.punta2.off",
        "payloadType": "global",
        "x": 260,
        "y": 820,
        "wires": [
            [
                "6892330dbf87dee6"
            ]
        ]
    },
    {
        "id": "3ef0d30e74135c18",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.punta1.off",
                "pt": "global",
                "to": "14",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "4d42cdf2c783f393",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.punta2.on",
                "pt": "global",
                "to": "18",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "6892330dbf87dee6",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "a712dd8b257c8e86",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.punta2.off",
                "pt": "global",
                "to": "22",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "cfed5fda317bd14b",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 1000,
        "wires": [
            [
                "ab77213ae3bfea3c"
            ]
        ]
    },
    {
        "id": "d77eed99aa02e76c",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "treball1",
        "rules": [
            {
                "t": "set",
                "p": "diposits.treball1",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1820,
        "wires": [
            []
        ]
    },
    {
        "id": "271f5abe19fded0c",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposits.consigna.treball1",
        "payloadType": "global",
        "x": 300,
        "y": 1860,
        "wires": [
            [
                "d77eed99aa02e76c",
                "180d881496a243ca"
            ]
        ]
    },
    {
        "id": "4df7010725549e38",
        "type": "comment",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "Tarifes vàlvules Ca l'Esteve  (tarifa 1)",
        "info": "",
        "x": 220,
        "y": 920,
        "wires": []
    },
    {
        "id": "180d881496a243ca",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "sel diposit",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 520,
        "y": 1860,
        "wires": [
            [
                "327594619ddb9dad",
                "aa32301e283303ca"
            ],
            [
                "d59cb02be0e850b3",
                "547b5d0daa89f799"
            ]
        ],
        "outputLabels": [
            "diposit 1",
            "diposit 2"
        ]
    },
    {
        "id": "327594619ddb9dad",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "3e8c794b53f57f8c",
        "name": "estiu/hivern",
        "property": "diposits.consigna.tarifa1.estiuhivern",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 1560,
        "wires": [
            [
                "a90f0da08743fbf2",
                "a366e67e0e586d6e",
                "471ac6f85b1f19b0"
            ],
            [
                "c5199db2b7325552",
                "3445228d68550abd",
                "f8e5251aafe249b2"
            ]
        ]
    },
    {
        "id": "a90f0da08743fbf2",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.estiu.vall.on\"\t   ) or $flowContext(\"tarifa1.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.estiu.vall.off\"\t   ) or $globalContext(\"diposit1.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 1420,
        "wires": [
            [
                "b4a3d7e7ebdbf962"
            ],
            [
                "02ac5a41f46f6480"
            ]
        ]
    },
    {
        "id": "b4a3d7e7ebdbf962",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1140,
        "y": 1400,
        "wires": [
            [
                "89d5f9cf1db8308b"
            ],
            [
                "02ac5a41f46f6480"
            ]
        ]
    },
    {
        "id": "89d5f9cf1db8308b",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "tarifa1.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "02ac5a41f46f6480",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "tarifa1.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "a366e67e0e586d6e",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.estiu.plana.on\"\t   ) or $flowContext(\"tarifa1.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.estiu.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1520,
        "wires": [
            [
                "03ab7a4851f647ed"
            ],
            [
                "6a1c742da348d703"
            ]
        ]
    },
    {
        "id": "03ab7a4851f647ed",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 1500,
        "wires": [
            [
                "bce18556eb1078ed"
            ],
            [
                "6a1c742da348d703"
            ]
        ]
    },
    {
        "id": "6a1c742da348d703",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "tarifa1.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "471ac6f85b1f19b0",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.estiu.punta.on\"\t   ) or $flowContext(\"tarifa1.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.estiu.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1600,
        "wires": [
            [
                "2ce34d4bf6972d28"
            ],
            [
                "9952ac00a2403b10"
            ]
        ]
    },
    {
        "id": "2ce34d4bf6972d28",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 1580,
        "wires": [
            [
                "ac1653894dd34e92"
            ],
            [
                "9952ac00a2403b10"
            ]
        ]
    },
    {
        "id": "9952ac00a2403b10",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "tarifa1.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "bce18556eb1078ed",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "tarifa1.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "ac1653894dd34e92",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "5ece3380e8a58b91",
        "name": "tarifa1.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "c5199db2b7325552",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.hivern.vall.on\"\t   ) or $flowContext(\"tarifa1.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.hivern.vall.off\"\t   ) or $globalContext(\"diposit1.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 1720,
        "wires": [
            [
                "fe46476f3662ef15"
            ],
            [
                "ea2c5936b5160db5"
            ]
        ]
    },
    {
        "id": "fe46476f3662ef15",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1140,
        "y": 1700,
        "wires": [
            [
                "8c21e302d6885e49"
            ],
            [
                "ea2c5936b5160db5"
            ]
        ]
    },
    {
        "id": "8c21e302d6885e49",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "tarifa1.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "ea2c5936b5160db5",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "tarifa1.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "3445228d68550abd",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.hivern.plana.on\"\t   ) or $flowContext(\"tarifa1.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.hivern.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1820,
        "wires": [
            [
                "e56530dcab55652e"
            ],
            [
                "8a779688e96d6cf8"
            ]
        ]
    },
    {
        "id": "e56530dcab55652e",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 1800,
        "wires": [
            [
                "8ea568b05ad7192e"
            ],
            [
                "8a779688e96d6cf8"
            ]
        ]
    },
    {
        "id": "8a779688e96d6cf8",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "tarifa1.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1820,
        "wires": [
            []
        ]
    },
    {
        "id": "f8e5251aafe249b2",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.hivern.punta.on\"\t   ) or $flowContext(\"tarifa1.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.hivern.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1900,
        "wires": [
            [
                "6b4c8e3afb127695"
            ],
            [
                "7f3d2623575c4775"
            ]
        ]
    },
    {
        "id": "6b4c8e3afb127695",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 1880,
        "wires": [
            [
                "51516c7bf95661c0"
            ],
            [
                "7f3d2623575c4775"
            ]
        ]
    },
    {
        "id": "7f3d2623575c4775",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "tarifa1.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "8ea568b05ad7192e",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "tarifa1.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "51516c7bf95661c0",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "cec8714353811125",
        "name": "tarifa1.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "d59cb02be0e850b3",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "9afc1104e379bff5",
        "name": "estiu/hivern",
        "property": "diposits.consigna.tarifa1.estiuhivern",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 2220,
        "wires": [
            [
                "dba19fd762ff8a06",
                "136795241fd91158",
                "4725bf42d8ee0d83"
            ],
            [
                "c7c657f2d2addb5e",
                "f8afdfb6890b1797",
                "003ea8c56fad23e7"
            ]
        ]
    },
    {
        "id": "dba19fd762ff8a06",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.estiu.vall.on\"\t   ) or $flowContext(\"tarifa1.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.estiu.vall.off\"\t   ) or $globalContext(\"diposit2.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 2080,
        "wires": [
            [
                "4a323e10da5837e3"
            ],
            [
                "2fd98b4ab1d93e4c"
            ]
        ]
    },
    {
        "id": "4a323e10da5837e3",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1140,
        "y": 2060,
        "wires": [
            [
                "767d40f753b369da"
            ],
            [
                "2fd98b4ab1d93e4c"
            ]
        ]
    },
    {
        "id": "767d40f753b369da",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "tarifa1.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "2fd98b4ab1d93e4c",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "tarifa1.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "136795241fd91158",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.estiu.plana.on\"\t   ) or $flowContext(\"tarifa1.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.estiu.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 2180,
        "wires": [
            [
                "5e56be75c7ec6651"
            ],
            [
                "7597064351c49ad6"
            ]
        ]
    },
    {
        "id": "5e56be75c7ec6651",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 2160,
        "wires": [
            [
                "3acb31294159e642"
            ],
            [
                "7597064351c49ad6"
            ]
        ]
    },
    {
        "id": "7597064351c49ad6",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "tarifa1.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "4725bf42d8ee0d83",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.estiu.punta.on\"\t   ) or $flowContext(\"tarifa1.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.estiu.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 2260,
        "wires": [
            [
                "ea0d058132e917d9"
            ],
            [
                "8aab9a861f735984"
            ]
        ]
    },
    {
        "id": "ea0d058132e917d9",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 2240,
        "wires": [
            [
                "5728e2d84958d41c"
            ],
            [
                "8aab9a861f735984"
            ]
        ]
    },
    {
        "id": "8aab9a861f735984",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "tarifa1.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "3acb31294159e642",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "tarifa1.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "5728e2d84958d41c",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "d72fd464c0ef7527",
        "name": "tarifa1.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "c7c657f2d2addb5e",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.hivern.vall.on\"\t   ) or $flowContext(\"tarifa1.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.hivern.vall.off\"\t   ) or $globalContext(\"diposit2.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 2340,
        "wires": [
            [
                "4224a661a3c48ad3"
            ],
            [
                "f69ca7ae607693ec"
            ]
        ]
    },
    {
        "id": "4224a661a3c48ad3",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1140,
        "y": 2320,
        "wires": [
            [
                "43abb3904da34bad"
            ],
            [
                "f69ca7ae607693ec"
            ]
        ]
    },
    {
        "id": "43abb3904da34bad",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa1.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "f69ca7ae607693ec",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa1.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2360,
        "wires": [
            []
        ]
    },
    {
        "id": "f8afdfb6890b1797",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.hivern.plana.on\"\t   ) or $flowContext(\"tarifa1.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.hivern.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 2440,
        "wires": [
            [
                "db93f1b24c56c75f"
            ],
            [
                "3633bc26cefc7857"
            ]
        ]
    },
    {
        "id": "db93f1b24c56c75f",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 2420,
        "wires": [
            [
                "3fef53cc9f96f4bb"
            ],
            [
                "3633bc26cefc7857"
            ]
        ]
    },
    {
        "id": "3633bc26cefc7857",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa1.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "003ea8c56fad23e7",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa1.hivern.punta.on\"\t   ) or $flowContext(\"tarifa1.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa1.hivern.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 2520,
        "wires": [
            [
                "5d35244b32a8ea92"
            ],
            [
                "b48afb7e42cc766c"
            ]
        ]
    },
    {
        "id": "5d35244b32a8ea92",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 2500,
        "wires": [
            [
                "f13bff07296f96d4"
            ],
            [
                "b48afb7e42cc766c"
            ]
        ]
    },
    {
        "id": "b48afb7e42cc766c",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa1.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 2520,
        "wires": [
            []
        ]
    },
    {
        "id": "3fef53cc9f96f4bb",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa1.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2400,
        "wires": [
            []
        ]
    },
    {
        "id": "f13bff07296f96d4",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa1.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa1.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa1.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 2480,
        "wires": [
            []
        ]
    },
    {
        "id": "de8163150711ca15",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "tarifa1.auxvall",
        "property": "tarifa1.auxvall",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 520,
        "y": 2640,
        "wires": [
            [
                "5b1cdf0e5c62d6a5"
            ],
            [
                "10915b5eaad452ca"
            ]
        ]
    },
    {
        "id": "10915b5eaad452ca",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "tarifa1.auxplana",
        "property": "tarifa1.auxplana",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 720,
        "y": 2660,
        "wires": [
            [
                "5b1cdf0e5c62d6a5"
            ],
            [
                "15bff8b04cabf591"
            ]
        ]
    },
    {
        "id": "15bff8b04cabf591",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "tarifa1.auxpunta",
        "property": "tarifa1.auxpunta",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 900,
        "y": 2680,
        "wires": [
            [
                "5b1cdf0e5c62d6a5"
            ],
            [
                "b2ce1236ce0bf052"
            ]
        ]
    },
    {
        "id": "6ea4871330afd57c",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "diposit1.servei",
        "property": "diposit1.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 300,
        "y": 2660,
        "wires": [
            [
                "de8163150711ca15"
            ],
            [
                "b2ce1236ce0bf052"
            ]
        ]
    },
    {
        "id": "210561599986f771",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "diposit2.servei",
        "property": "diposit2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 300,
        "y": 2840,
        "wires": [
            [
                "1a795361bd83e434"
            ],
            [
                "882fac419d612ec4"
            ]
        ]
    },
    {
        "id": "b2ce1236ce0bf052",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "v1.tarifes = 0",
        "rules": [
            {
                "t": "set",
                "p": "v1.tarifes",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "882fac419d612ec4",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "v2.tarifes = 0",
        "rules": [
            {
                "t": "set",
                "p": "v2.tarifes",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 2900,
        "wires": [
            []
        ]
    },
    {
        "id": "5b1cdf0e5c62d6a5",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "v1.tarifes = 1 i v2.tarifes = 0",
        "rules": [
            {
                "t": "set",
                "p": "v1.tarifes",
                "pt": "global",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "v2.tarifes",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "1f91fa6d48882425",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "v1.tarifes = 0 i v2.tarifes = 1",
        "rules": [
            {
                "t": "set",
                "p": "v1.tarifes",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "v2.tarifes",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 2820,
        "wires": [
            []
        ]
    },
    {
        "id": "1a795361bd83e434",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "tarifa1.auxvall",
        "property": "tarifa1.auxvall",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 500,
        "y": 2820,
        "wires": [
            [
                "1f91fa6d48882425"
            ],
            [
                "26772bb4b6611d30"
            ]
        ]
    },
    {
        "id": "26772bb4b6611d30",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "tarifa1.auxplana",
        "property": "tarifa1.auxplana",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 700,
        "y": 2840,
        "wires": [
            [
                "1f91fa6d48882425"
            ],
            [
                "9b6861ea17c1bfcb"
            ]
        ]
    },
    {
        "id": "9b6861ea17c1bfcb",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "88010a504113ec9e",
        "name": "tarifa1.auxpunta",
        "property": "tarifa1.auxpunta",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 880,
        "y": 2860,
        "wires": [
            [
                "1f91fa6d48882425"
            ],
            [
                "882fac419d612ec4"
            ]
        ]
    },
    {
        "id": "3f0568e01967c718",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "Vall",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "horaritarifa.vall1.on",
                "vt": "global",
                "v2": "horaritarifa.vall1.off",
                "v2t": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1010,
        "y": 1080,
        "wires": [
            [
                "2d161c1ee5ee8c5d"
            ]
        ]
    },
    {
        "id": "067cc3e74e0af4eb",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "Plana",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "horaritarifa.plana1.on",
                "vt": "global",
                "v2": "horaritarifa.plana1.off",
                "v2t": "global"
            },
            {
                "t": "btwn",
                "v": "horaritarifa.plana2.on",
                "vt": "global",
                "v2": "horaritarifa.plana2.off",
                "v2t": "global"
            },
            {
                "t": "btwn",
                "v": "horaritarifa.plana3.on",
                "vt": "global",
                "v2": "horaritarifa.plana3.off",
                "v2t": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1010,
        "y": 1140,
        "wires": [
            [
                "d3c1c5fa026ef173"
            ],
            [
                "049aceb3ef48c63b"
            ],
            [
                "f9ebc10fda039ab0"
            ]
        ]
    },
    {
        "id": "e21fd0c0daba2060",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "Punta",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "horaritarifa.punta1.on",
                "vt": "global",
                "v2": "horaritarifa.punta1.off",
                "v2t": "global"
            },
            {
                "t": "btwn",
                "v": "horaritarifa.punta2.on",
                "vt": "global",
                "v2": "horaritarifa.punta2.off",
                "v2t": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1010,
        "y": 1240,
        "wires": [
            [
                "83f22432830419ef"
            ],
            [
                "314a5418a82771dc"
            ]
        ]
    },
    {
        "id": "7b3e0b8e6384ccfe",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "Laboral",
        "property": "plc.mDiaLocal",
        "propertyType": "global",
        "rules": [
            {
                "t": "btwn",
                "v": "1",
                "vt": "num",
                "v2": "5",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 1140,
        "wires": [
            [
                "e6e50a2d2882c50e"
            ]
        ]
    },
    {
        "id": "b85af6dc0a4f5396",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "vall",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.vall",
                "pt": "global",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.plana",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.punta",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "73da721737fa5282",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "plana",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana",
                "pt": "global",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.vall",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.punta",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "20d0cc62df7a2282",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "punta",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.punta",
                "pt": "global",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.vall",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.plana",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "d4faaaa6b8993ac8",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "Cap Setmana",
        "property": "plc.mDiaLocal",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1100,
        "y": 1020,
        "wires": [
            [
                "b85af6dc0a4f5396"
            ],
            [
                "b85af6dc0a4f5396"
            ]
        ]
    },
    {
        "id": "e6e50a2d2882c50e",
        "type": "function",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "HH",
        "func": "var entrada=global.get(\"plc.mHoraLocal\");\n\nseccionar=entrada.split(\":\",);\n\nhora=seccionar[0];\n\nmsg.payload=[hora];\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1140,
        "wires": [
            [
                "3f0568e01967c718",
                "067cc3e74e0af4eb",
                "e21fd0c0daba2060"
            ]
        ]
    },
    {
        "id": "ab77213ae3bfea3c",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "Mode Dipòsits Auto/ Forçar Vall ",
        "property": "diposits.consigna.tarifa1.manual",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 1000,
        "wires": [
            [
                "7c80da2c2f6e8e3b"
            ],
            [
                "544d3002a910df1d"
            ]
        ]
    },
    {
        "id": "d3c1c5fa026ef173",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.plana1.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 1100,
        "wires": [
            [
                "73da721737fa5282"
            ]
        ]
    },
    {
        "id": "049aceb3ef48c63b",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.plana2.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 1140,
        "wires": [
            [
                "73da721737fa5282"
            ]
        ]
    },
    {
        "id": "f9ebc10fda039ab0",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.plana3.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 1180,
        "wires": [
            [
                "73da721737fa5282"
            ]
        ]
    },
    {
        "id": "83f22432830419ef",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.punta1.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 1220,
        "wires": [
            [
                "20d0cc62df7a2282"
            ]
        ]
    },
    {
        "id": "314a5418a82771dc",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.punta2.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 1260,
        "wires": [
            [
                "20d0cc62df7a2282"
            ]
        ]
    },
    {
        "id": "2d161c1ee5ee8c5d",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "1c5d544f2907841e",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.vall1.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 1060,
        "wires": [
            [
                "b85af6dc0a4f5396"
            ]
        ]
    },
    {
        "id": "3f43c11f7e1df0a5",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "treball2",
        "rules": [
            {
                "t": "set",
                "p": "diposits.treball2",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 3920,
        "wires": [
            []
        ]
    },
    {
        "id": "95d64cdbdf4f9c26",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposits.consigna.treball2",
        "payloadType": "global",
        "x": 300,
        "y": 3960,
        "wires": [
            [
                "3f43c11f7e1df0a5",
                "3c89f3b4a2805c1b"
            ]
        ]
    },
    {
        "id": "703f055e9a59a8ba",
        "type": "comment",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "Tarifes Bombament Gronxadors  (tarifa 2)",
        "info": "",
        "x": 240,
        "y": 3020,
        "wires": []
    },
    {
        "id": "3c89f3b4a2805c1b",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "sel diposit",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 520,
        "y": 3960,
        "wires": [
            [
                "80421fe9a32fb903",
                "6308aea184cd9837"
            ],
            [
                "0b5ca5159c636e50",
                "3a5a57e1bc72067d"
            ]
        ],
        "outputLabels": [
            "diposit 1",
            "diposit 2"
        ]
    },
    {
        "id": "91bfb25de9571ab3",
        "type": "inject",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 3100,
        "wires": [
            [
                "26d86fade7720796"
            ]
        ]
    },
    {
        "id": "26d86fade7720796",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "Mode Dipòsits Auto/ Forçar Vall ",
        "property": "diposits.consigna.tarifa2.manual",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 3100,
        "wires": [
            [
                "ad1ff4d00ec3c415"
            ],
            [
                "5ca48b55ea6252d0"
            ]
        ]
    },
    {
        "id": "ca5c1e6f32f7b949",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "Vall",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "horaritarifa.vall1.on",
                "vt": "global",
                "v2": "horaritarifa.vall1.off",
                "v2t": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1010,
        "y": 3180,
        "wires": [
            [
                "a2ca08f3f4de84d6"
            ]
        ]
    },
    {
        "id": "0be5df2983351baf",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "Plana",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "horaritarifa.plana1.on",
                "vt": "global",
                "v2": "horaritarifa.plana1.off",
                "v2t": "global"
            },
            {
                "t": "btwn",
                "v": "horaritarifa.plana2.on",
                "vt": "global",
                "v2": "horaritarifa.plana2.off",
                "v2t": "global"
            },
            {
                "t": "btwn",
                "v": "horaritarifa.plana3.on",
                "vt": "global",
                "v2": "horaritarifa.plana3.off",
                "v2t": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1010,
        "y": 3240,
        "wires": [
            [
                "f9e9dd8717bcfba8"
            ],
            [
                "b8e2e4b3d18379bf"
            ],
            [
                "1a3ac9eebcea46e3"
            ]
        ]
    },
    {
        "id": "91505f49d04be116",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "Punta",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "horaritarifa.punta1.on",
                "vt": "global",
                "v2": "horaritarifa.punta1.off",
                "v2t": "global"
            },
            {
                "t": "btwn",
                "v": "horaritarifa.punta2.on",
                "vt": "global",
                "v2": "horaritarifa.punta2.off",
                "v2t": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1010,
        "y": 3340,
        "wires": [
            [
                "ea88459cda2633df"
            ],
            [
                "99521499dfec490e"
            ]
        ]
    },
    {
        "id": "5713319853ae2b3d",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "Laboral",
        "property": "plc.mDiaLocal",
        "propertyType": "global",
        "rules": [
            {
                "t": "btwn",
                "v": "1",
                "vt": "num",
                "v2": "5",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 3240,
        "wires": [
            [
                "e7c9dbd2f3e074e3"
            ]
        ]
    },
    {
        "id": "27ccc78a8c6375ca",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "Cap Setmana",
        "property": "plc.mDiaLocal",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1100,
        "y": 3120,
        "wires": [
            [
                "33246b0567f06e20"
            ],
            [
                "33246b0567f06e20"
            ]
        ]
    },
    {
        "id": "e7c9dbd2f3e074e3",
        "type": "function",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "HH",
        "func": "var entrada=global.get(\"plc.mHoraLocal\");\n\nseccionar=entrada.split(\":\",);\n\nhora=seccionar[0];\n\nmsg.payload=[hora];\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 3240,
        "wires": [
            [
                "ca5c1e6f32f7b949",
                "0be5df2983351baf",
                "91505f49d04be116"
            ]
        ]
    },
    {
        "id": "f9e9dd8717bcfba8",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.plana1.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 3200,
        "wires": [
            [
                "9985aa6372fdbbe5"
            ]
        ]
    },
    {
        "id": "b8e2e4b3d18379bf",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.plana2.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 3240,
        "wires": [
            [
                "9985aa6372fdbbe5"
            ]
        ]
    },
    {
        "id": "1a3ac9eebcea46e3",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.plana3.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 3280,
        "wires": [
            [
                "9985aa6372fdbbe5"
            ]
        ]
    },
    {
        "id": "ea88459cda2633df",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.punta1.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 3320,
        "wires": [
            [
                "e07e89cc901e91bd"
            ]
        ]
    },
    {
        "id": "99521499dfec490e",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.punta2.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 3360,
        "wires": [
            [
                "e07e89cc901e91bd"
            ]
        ]
    },
    {
        "id": "a2ca08f3f4de84d6",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "<h.off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "horaritarifa.vall1.off",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 3160,
        "wires": [
            [
                "33246b0567f06e20"
            ]
        ]
    },
    {
        "id": "e07e89cc901e91bd",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "punta",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.punta",
                "pt": "global",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.vall",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.plana",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 3340,
        "wires": [
            []
        ]
    },
    {
        "id": "9985aa6372fdbbe5",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "plana",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.plana",
                "pt": "global",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.vall",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.punta",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 3240,
        "wires": [
            []
        ]
    },
    {
        "id": "33246b0567f06e20",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7801467ccf18bf07",
        "name": "vall",
        "rules": [
            {
                "t": "set",
                "p": "horaritarifa.vall",
                "pt": "global",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.plana",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "horaritarifa.punta",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 3120,
        "wires": [
            []
        ]
    },
    {
        "id": "80421fe9a32fb903",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "estiu/hivern",
        "property": "diposits.consigna.tarifa2.estiuhivern",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 750,
        "y": 3660,
        "wires": [
            [
                "4bb1add558e8ce3a",
                "197aa9468c2137a6",
                "9efbbf3696d9611b"
            ],
            [
                "aa6befa6595eda8d",
                "f0b759f314405697",
                "c4db7b9d968bd48b"
            ]
        ]
    },
    {
        "id": "4bb1add558e8ce3a",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.estiu.vall.on\"\t   ) or $flowContext(\"tarifa2.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.estiu.vall.off\"\t   ) or $globalContext(\"diposit2.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 980,
        "y": 3520,
        "wires": [
            [
                "bc9986b1f072ed6d",
                "36cc6c8f4df7600b"
            ],
            [
                "9ec3cd71a1ac640a"
            ]
        ]
    },
    {
        "id": "bc9986b1f072ed6d",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1160,
        "y": 3500,
        "wires": [
            [
                "c4a83ee316365db7"
            ],
            [
                "9ec3cd71a1ac640a"
            ]
        ]
    },
    {
        "id": "c4a83ee316365db7",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3500,
        "wires": [
            []
        ]
    },
    {
        "id": "9ec3cd71a1ac640a",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3540,
        "wires": [
            []
        ]
    },
    {
        "id": "197aa9468c2137a6",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.estiu.plana.on\"\t   ) or $flowContext(\"tarifa2.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.estiu.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 3620,
        "wires": [
            [
                "6f9edb21363d0858",
                "4b9d1d12e3c2dad0"
            ],
            [
                "602f1421476a8354"
            ]
        ]
    },
    {
        "id": "6f9edb21363d0858",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 3600,
        "wires": [
            [
                "f3d4f9d1a65c2a77"
            ],
            [
                "602f1421476a8354"
            ]
        ]
    },
    {
        "id": "602f1421476a8354",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3620,
        "wires": [
            []
        ]
    },
    {
        "id": "9efbbf3696d9611b",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.estiu.punta.on\"\t   ) or $flowContext(\"tarifa2.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.estiu.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 3700,
        "wires": [
            [
                "e5f49e8da89ac920",
                "cdc5b71b2c1efe07"
            ],
            [
                "6b5d7defcb4c558d"
            ]
        ]
    },
    {
        "id": "e5f49e8da89ac920",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 3680,
        "wires": [
            [
                "4e53a9e1795971f3"
            ],
            [
                "6b5d7defcb4c558d"
            ]
        ]
    },
    {
        "id": "6b5d7defcb4c558d",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 3700,
        "wires": [
            []
        ]
    },
    {
        "id": "f3d4f9d1a65c2a77",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3580,
        "wires": [
            []
        ]
    },
    {
        "id": "4e53a9e1795971f3",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 3660,
        "wires": [
            []
        ]
    },
    {
        "id": "aa6befa6595eda8d",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.hivern.vall.on\"\t   ) or $flowContext(\"tarifa2.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.hivern.vall.off\"\t   ) or $globalContext(\"diposit1.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 980,
        "y": 3820,
        "wires": [
            [
                "abe0070d43c2f0da"
            ],
            [
                "fb754e9aec8838ca"
            ]
        ]
    },
    {
        "id": "abe0070d43c2f0da",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1180,
        "y": 3800,
        "wires": [
            [
                "96aa502d66ad4d23"
            ],
            [
                "fb754e9aec8838ca"
            ]
        ]
    },
    {
        "id": "96aa502d66ad4d23",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3800,
        "wires": [
            []
        ]
    },
    {
        "id": "fb754e9aec8838ca",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3840,
        "wires": [
            []
        ]
    },
    {
        "id": "f0b759f314405697",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.hivern.plana.on\"\t   ) or $flowContext(\"tarifa2.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.hivern.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 3920,
        "wires": [
            [
                "0b01b2ab8f2789fb"
            ],
            [
                "2193fb2d309f725a"
            ]
        ]
    },
    {
        "id": "0b01b2ab8f2789fb",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 3900,
        "wires": [
            [
                "fb3a32431880bbdc"
            ],
            [
                "2193fb2d309f725a"
            ]
        ]
    },
    {
        "id": "2193fb2d309f725a",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3920,
        "wires": [
            []
        ]
    },
    {
        "id": "c4db7b9d968bd48b",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit1.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.hivern.punta.on\"\t   ) or $flowContext(\"tarifa2.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit1.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.hivern.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 4000,
        "wires": [
            [
                "03b41ad9df33d3e6"
            ],
            [
                "84e8fc898c3bf66f"
            ]
        ]
    },
    {
        "id": "03b41ad9df33d3e6",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 3980,
        "wires": [
            [
                "a0916b49be1ab023"
            ],
            [
                "84e8fc898c3bf66f"
            ]
        ]
    },
    {
        "id": "84e8fc898c3bf66f",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 4000,
        "wires": [
            []
        ]
    },
    {
        "id": "fb3a32431880bbdc",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3880,
        "wires": [
            []
        ]
    },
    {
        "id": "a0916b49be1ab023",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "name": "tarifa2.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 3960,
        "wires": [
            []
        ]
    },
    {
        "id": "0b5ca5159c636e50",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7de9cdab3affadba",
        "name": "estiu/hivern",
        "property": "diposits.consigna.tarifa2.estiuhivern",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 4320,
        "wires": [
            [
                "6e022686fe68340d",
                "ba515348cd99b405",
                "3e79ee1c96e0e26f"
            ],
            [
                "29279d327a751e7b",
                "a8e9e19f153ec716",
                "0bd4774426cf9782"
            ]
        ]
    },
    {
        "id": "6e022686fe68340d",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.estiu.vall.on\"\t   ) or $flowContext(\"tarifa2.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.estiu.vall.off\"\t   ) or $globalContext(\"diposit2.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 4180,
        "wires": [
            [
                "8e444bbc9ed99813"
            ],
            [
                "9845c2151afc05b8"
            ]
        ]
    },
    {
        "id": "8e444bbc9ed99813",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1140,
        "y": 4160,
        "wires": [
            [
                "2247c07c8dbca0ab"
            ],
            [
                "9845c2151afc05b8"
            ]
        ]
    },
    {
        "id": "2247c07c8dbca0ab",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "tarifa2.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4160,
        "wires": [
            []
        ]
    },
    {
        "id": "9845c2151afc05b8",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "tarifa2.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4200,
        "wires": [
            []
        ]
    },
    {
        "id": "ba515348cd99b405",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.estiu.plana.on\"\t   ) or $flowContext(\"tarifa2.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.estiu.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 4280,
        "wires": [
            [
                "303111a29d843174"
            ],
            [
                "f89dfce910632cf9"
            ]
        ]
    },
    {
        "id": "303111a29d843174",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 4260,
        "wires": [
            [
                "d734a1b9ac8017f6"
            ],
            [
                "f89dfce910632cf9"
            ]
        ]
    },
    {
        "id": "f89dfce910632cf9",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "tarifa2.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4280,
        "wires": [
            []
        ]
    },
    {
        "id": "3e79ee1c96e0e26f",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.estiu.punta.on\"\t   ) or $flowContext(\"tarifa2.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.estiu.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 4360,
        "wires": [
            [
                "bf21e39b961ee4db"
            ],
            [
                "a0dc938a24a46a3b"
            ]
        ]
    },
    {
        "id": "bf21e39b961ee4db",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 4340,
        "wires": [
            [
                "3d28013ffecd5b27"
            ],
            [
                "a0dc938a24a46a3b"
            ]
        ]
    },
    {
        "id": "a0dc938a24a46a3b",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "tarifa2.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 4360,
        "wires": [
            []
        ]
    },
    {
        "id": "d734a1b9ac8017f6",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "tarifa2.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4240,
        "wires": [
            []
        ]
    },
    {
        "id": "3d28013ffecd5b27",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "05ab6833a2e8eaac",
        "name": "tarifa2.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 4320,
        "wires": [
            []
        ]
    },
    {
        "id": "bcbb09422db294e6",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "tarifa2.auxvall",
        "property": "tarifa2.auxvall",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 520,
        "y": 4780,
        "wires": [
            [
                "19ace7ffd213ca48"
            ],
            [
                "ed5c4208d1f33df7"
            ]
        ]
    },
    {
        "id": "ed5c4208d1f33df7",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "tarifa2.auxplana",
        "property": "tarifa2.auxplana",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 700,
        "y": 4820,
        "wires": [
            [
                "19ace7ffd213ca48"
            ],
            [
                "6ff6421b2ad99fdf"
            ]
        ]
    },
    {
        "id": "6ff6421b2ad99fdf",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "tarifa2.auxpunta",
        "property": "tarifa2.auxpunta",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 900,
        "y": 4820,
        "wires": [
            [
                "19ace7ffd213ca48"
            ],
            [
                "0ef6cb2ba63b427b"
            ]
        ]
    },
    {
        "id": "8b5f4a1b90dab8a5",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "diposit1.servei",
        "property": "diposit1.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 300,
        "y": 4800,
        "wires": [
            [
                "bcbb09422db294e6"
            ],
            [
                "0ef6cb2ba63b427b"
            ]
        ]
    },
    {
        "id": "85889f3744b02e66",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "diposit2.servei",
        "property": "diposit2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 300,
        "y": 4940,
        "wires": [
            [
                "942d7d7912449075"
            ],
            [
                "c88ced4cbcdd4e01"
            ]
        ]
    },
    {
        "id": "c597db9a0c089032",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "bgronxadors.tarifes = 0",
        "rules": [
            {
                "t": "set",
                "p": "bgronxadors.tarifes",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 5020,
        "wires": [
            [
                "d48c937c4e191216"
            ]
        ]
    },
    {
        "id": "23a504b4cb3295f3",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "bgronxadors.tarifes = 1",
        "rules": [
            {
                "t": "set",
                "p": "bgronxadors.tarifes",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 4740,
        "wires": [
            [
                "a105ab66b8f3c394"
            ]
        ]
    },
    {
        "id": "942d7d7912449075",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "tarifa2.auxvall",
        "property": "tarifa2.auxvall",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 500,
        "y": 4920,
        "wires": [
            [
                "6bd566e482ef5572"
            ],
            [
                "aee1904ad09e3b98"
            ]
        ]
    },
    {
        "id": "aee1904ad09e3b98",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "tarifa2.auxplana",
        "property": "tarifa2.auxplana",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 700,
        "y": 4940,
        "wires": [
            [
                "6bd566e482ef5572"
            ],
            [
                "3acd07d984b0065d"
            ]
        ]
    },
    {
        "id": "3acd07d984b0065d",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "tarifa2.auxpunta",
        "property": "tarifa2.auxpunta",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 900,
        "y": 4960,
        "wires": [
            [
                "6bd566e482ef5572"
            ],
            [
                "ba7f9b20aa769784"
            ]
        ]
    },
    {
        "id": "29279d327a751e7b",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "condicions vall",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.hivern.vall.on\"\t   ) or $flowContext(\"tarifa2.auxvall\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.hivern.vall.off\"\t   ) or $globalContext(\"diposit2.nivell\") >= 100\t)\t\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 4460,
        "wires": [
            [
                "80deeba20765c6f7"
            ],
            [
                "d9ba2683fc099a82"
            ]
        ]
    },
    {
        "id": "80deeba20765c6f7",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "horaritarifa.vall",
        "property": "horaritarifa.vall",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1140,
        "y": 4440,
        "wires": [
            [
                "742f81d4d4a203ac"
            ],
            [
                "d9ba2683fc099a82"
            ]
        ]
    },
    {
        "id": "742f81d4d4a203ac",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "tarifa2.auxvall = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4440,
        "wires": [
            []
        ]
    },
    {
        "id": "d9ba2683fc099a82",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "tarifa2.auxvall = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4480,
        "wires": [
            []
        ]
    },
    {
        "id": "a8e9e19f153ec716",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "condicions plana",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.hivern.plana.on\"\t   ) or $flowContext(\"tarifa2.auxplana\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.hivern.plana.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 4560,
        "wires": [
            [
                "bbafafeb3f18e823"
            ],
            [
                "f2c60cd3ce1d35ce"
            ]
        ]
    },
    {
        "id": "bbafafeb3f18e823",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "horaritarifa.plana",
        "property": "horaritarifa.plana",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 4540,
        "wires": [
            [
                "38e18f0bdb5e518d"
            ],
            [
                "f2c60cd3ce1d35ce"
            ]
        ]
    },
    {
        "id": "f2c60cd3ce1d35ce",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "tarifa2.auxplana = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4560,
        "wires": [
            []
        ]
    },
    {
        "id": "0bd4774426cf9782",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "condicions punta",
        "property": "(\t   $globalContext(\"diposit2.nivell\") <= $globalContext(\t       \"diposits.consigna.tarifa2.hivern.punta.on\"\t   ) or $flowContext(\"tarifa2.auxpunta\")\t)\tand\t(\t   $globalContext(\"diposit2.nivell\") < $globalContext(\t       \"diposits.consigna.tarifa2.hivern.punta.off\"\t   )\t)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 4640,
        "wires": [
            [
                "d54998289403d7eb"
            ],
            [
                "d19c33f3ce24bcbe"
            ]
        ]
    },
    {
        "id": "d54998289403d7eb",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "horaritarifa.punta",
        "property": "horaritarifa.punta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 4620,
        "wires": [
            [
                "d8fe78a93aec3ebc"
            ],
            [
                "d19c33f3ce24bcbe"
            ]
        ]
    },
    {
        "id": "d19c33f3ce24bcbe",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "tarifa2.auxpunta = 0",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 4640,
        "wires": [
            []
        ]
    },
    {
        "id": "38e18f0bdb5e518d",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "tarifa2.auxplana = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 4520,
        "wires": [
            []
        ]
    },
    {
        "id": "d8fe78a93aec3ebc",
        "type": "change",
        "z": "eb9b13ea99aacf08",
        "g": "7adb6c2d9bd6c84d",
        "name": "tarifa2.auxpunta = 1",
        "rules": [
            {
                "t": "set",
                "p": "tarifa2.auxvall",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxplana",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tarifa2.auxpunta",
                "pt": "flow",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 4600,
        "wires": [
            []
        ]
    },
    {
        "id": "19ace7ffd213ca48",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "dip1.maxima",
        "property": "diposit1.bmaxim",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1070,
        "y": 4780,
        "wires": [
            [
                "2ef041f398de2603"
            ],
            [
                "0ef6cb2ba63b427b"
            ]
        ]
    },
    {
        "id": "6bd566e482ef5572",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "dip2.maxima",
        "property": "diposit2.bmaxim",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1070,
        "y": 4920,
        "wires": [
            [
                "1acba6be2522903d"
            ],
            [
                "c597db9a0c089032"
            ]
        ]
    },
    {
        "id": "1acba6be2522903d",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "dip1.maxima",
        "property": "diposit1.bmaxim",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1230,
        "y": 4900,
        "wires": [
            [
                "23a504b4cb3295f3"
            ],
            [
                "919ccdf52fef9d5c"
            ]
        ]
    },
    {
        "id": "2ef041f398de2603",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "dip2.maxima",
        "property": "diposit2.bmaxim",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1230,
        "y": 4760,
        "wires": [
            [
                "23a504b4cb3295f3"
            ],
            [
                "5f64ed2d85c8ec46"
            ]
        ]
    },
    {
        "id": "d48c937c4e191216",
        "type": "debug",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "debug 196",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1790,
        "y": 5020,
        "wires": []
    },
    {
        "id": "a105ab66b8f3c394",
        "type": "debug",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "debug 197",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1790,
        "y": 4740,
        "wires": []
    },
    {
        "id": "919ccdf52fef9d5c",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "diposit1.servei",
        "property": "diposit1.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1400,
        "y": 4920,
        "wires": [
            [
                "23a504b4cb3295f3"
            ],
            [
                "c597db9a0c089032"
            ]
        ]
    },
    {
        "id": "5f64ed2d85c8ec46",
        "type": "switch",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "diposit2.servei",
        "property": "diposit2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1400,
        "y": 4780,
        "wires": [
            [
                "23a504b4cb3295f3"
            ],
            [
                "c597db9a0c089032"
            ]
        ]
    },
    {
        "id": "4b9d1d12e3c2dad0",
        "type": "debug",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "debug 203",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 3400,
        "wires": []
    },
    {
        "id": "36cc6c8f4df7600b",
        "type": "debug",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "debug 204",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 3360,
        "wires": []
    },
    {
        "id": "cdc5b71b2c1efe07",
        "type": "debug",
        "z": "eb9b13ea99aacf08",
        "g": "908439d0cf7debb6",
        "name": "debug 205",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1560,
        "y": 3440,
        "wires": []
    },
    {
        "id": "04fc45b459865162",
        "type": "mqtt out",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "FUXA",
        "topic": "",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "be25cdc18f19b7bc",
        "x": 490,
        "y": 220,
        "wires": []
    },
    {
        "id": "ae461e4102ccfa6b",
        "type": "mqtt in",
        "z": "40e18b1fe1f3daf0",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "be25cdc18f19b7bc",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 90,
        "y": 60,
        "wires": [
            [
                "845bcdb8b8a278b2"
            ]
        ]
    },
    {
        "id": "845bcdb8b8a278b2",
        "type": "debug",
        "z": "40e18b1fe1f3daf0",
        "name": "escolta MQTT rebuts",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 60,
        "wires": []
    },
    {
        "id": "d2919c6e39dd32a0",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/analitzador1",
        "payload": "analitzador1",
        "payloadType": "global",
        "x": 180,
        "y": 220,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "a7d7bf97d5b09072",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/analitzador2",
        "payload": "analitzador2",
        "payloadType": "global",
        "x": 180,
        "y": 260,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "19ff3bc73b0a78ad",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/analitzador3",
        "payload": "analitzador3",
        "payloadType": "global",
        "x": 180,
        "y": 300,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "3dac1e306cd03dda",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/b1",
        "payload": "b1",
        "payloadType": "global",
        "x": 150,
        "y": 340,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "8f3a7ee1892e2dbc",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/br1",
        "payload": "br1",
        "payloadType": "global",
        "x": 150,
        "y": 380,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "23d9f608fc7a5dc5",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/br2",
        "payload": "br2",
        "payloadType": "global",
        "x": 150,
        "y": 420,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "7f47caed5f5d3238",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/cabal1",
        "payload": "cabal1",
        "payloadType": "global",
        "x": 160,
        "y": 460,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "e40fbc658e86ae6e",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/cabal2",
        "payload": "cabal2",
        "payloadType": "global",
        "x": 160,
        "y": 500,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "262a494857426b31",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/cabal3",
        "payload": "cabal3",
        "payloadType": "global",
        "x": 160,
        "y": 540,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "b5c2c0cad4e07807",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/cabal4",
        "payload": "cabal4",
        "payloadType": "global",
        "x": 160,
        "y": 580,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "74633c378cf9c346",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/cabal5",
        "payload": "cabal5",
        "payloadType": "global",
        "x": 160,
        "y": 620,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "a406553517367c83",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/cabal6",
        "payload": "cabal6",
        "payloadType": "global",
        "x": 160,
        "y": 660,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "d33d91b3ec104220",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/cabal7",
        "payload": "cabal7",
        "payloadType": "global",
        "x": 160,
        "y": 700,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "94396212841e66c0",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/d1",
        "payload": "d1",
        "payloadType": "global",
        "x": 150,
        "y": 740,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "fb2929d25a504084",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/d2",
        "payload": "d2",
        "payloadType": "global",
        "x": 150,
        "y": 780,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "ab0ba175788d46bc",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/d3",
        "payload": "d3",
        "payloadType": "global",
        "x": 150,
        "y": 820,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "eb1d138b205f94ff",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/diposit1",
        "payload": "diposit1",
        "payloadType": "global",
        "x": 160,
        "y": 860,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "6777f7904103cb6b",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/diposit2",
        "payload": "diposit2",
        "payloadType": "global",
        "x": 160,
        "y": 900,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "b562dc251e5acd73",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/v1",
        "payload": "v1",
        "payloadType": "global",
        "x": 150,
        "y": 940,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "66cd77d6d302aa9a",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/v2",
        "payload": "v2",
        "payloadType": "global",
        "x": 150,
        "y": 980,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "31d3d976e537b1cc",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/v3",
        "payload": "v3",
        "payloadType": "global",
        "x": 150,
        "y": 1020,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "753aa89ed9093bc1",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/plc",
        "payload": "plc",
        "payloadType": "global",
        "x": 150,
        "y": 1060,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "aeeacf7c01a35926",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "parada",
        "rules": [
            {
                "t": "set",
                "p": "br1.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "424466ba0116847a",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "br1.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1420,
        "wires": [
            [
                "bde60443c61fba26"
            ],
            [
                "aeeacf7c01a35926"
            ]
        ]
    },
    {
        "id": "bde60443c61fba26",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "rules": [
            {
                "t": "set",
                "p": "br1.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "598776789d6d7398",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "parada",
        "rules": [
            {
                "t": "set",
                "p": "br2.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "2b11395eb3163ce0",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "rules": [
            {
                "t": "set",
                "p": "br2.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "0f78d7bb1dc31819",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "rules": [
            {
                "t": "set",
                "p": "b1.estat",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "eaa365e88ca7fec8",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "parada",
        "rules": [
            {
                "t": "set",
                "p": "b1.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "d78042691c6b5106",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "rules": [
            {
                "t": "set",
                "p": "b1.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "f91db0aeec5c2461",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "estats/filtre",
        "payload": "filtre",
        "payloadType": "global",
        "x": 150,
        "y": 1100,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "fdf211275312083f",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "oberta",
        "property": "v1.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 2140,
        "wires": [
            [
                "5a0aa88a34e300cf"
            ]
        ]
    },
    {
        "id": "7c2117af6ffa5e1f",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "indefinida",
        "rules": [
            {
                "t": "set",
                "p": "v1.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "82ac2b5809546802",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "rules": [
            {
                "t": "set",
                "p": "v1.estat",
                "pt": "global",
                "to": "3",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "a6426f54e64e5c5f",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "oberta",
        "rules": [
            {
                "t": "set",
                "p": "v1.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "d639ddfbdddd5d8d",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!tancada",
        "property": "v1.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 2140,
        "wires": [
            [
                "fdf211275312083f"
            ]
        ]
    },
    {
        "id": "22204fce814e324c",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!tancada",
        "property": "v1.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 2100,
        "wires": [
            [
                "b61faa7a1e44d363"
            ]
        ]
    },
    {
        "id": "b61faa7a1e44d363",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!oberta",
        "property": "v1.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 2100,
        "wires": [
            [
                "602b57748f526616"
            ]
        ]
    },
    {
        "id": "e82d38e9874c4fed",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria.obrir",
        "property": "v1.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 2220,
        "wires": [
            [
                "82ac2b5809546802"
            ],
            [
                "ea04c7dba23a18e7"
            ]
        ]
    },
    {
        "id": "ded19ab0b96ce00e",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!oberta",
        "property": "v1.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 2180,
        "wires": [
            [
                "1ff441b2af3c8acb"
            ]
        ]
    },
    {
        "id": "4dc224b742881706",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "tancada",
        "property": "v1.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 2180,
        "wires": [
            [
                "ded19ab0b96ce00e"
            ]
        ]
    },
    {
        "id": "70af1b8d33229058",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "tancada",
        "rules": [
            {
                "t": "set",
                "p": "v1.estat",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "c036382d6301a932",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "indefinida",
        "rules": [
            {
                "t": "set",
                "p": "v2.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "1365ad359f498a50",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "rules": [
            {
                "t": "set",
                "p": "v2.estat",
                "pt": "global",
                "to": "3",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "c4f3543a077fc107",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "oberta",
        "rules": [
            {
                "t": "set",
                "p": "v2.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2360,
        "wires": [
            []
        ]
    },
    {
        "id": "84253d667c92c4ab",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "tancada",
        "rules": [
            {
                "t": "set",
                "p": "v2.estat",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 2400,
        "wires": [
            []
        ]
    },
    {
        "id": "86d5a60c62150951",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "indefinida",
        "rules": [
            {
                "t": "set",
                "p": "v3.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 2540,
        "wires": [
            []
        ]
    },
    {
        "id": "d94bd775abfefe7d",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "rules": [
            {
                "t": "set",
                "p": "v3.estat",
                "pt": "global",
                "to": "3",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2660,
        "wires": [
            []
        ]
    },
    {
        "id": "cce227b1e7f16cda",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "oberta",
        "rules": [
            {
                "t": "set",
                "p": "v3.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2580,
        "wires": [
            []
        ]
    },
    {
        "id": "865984d4b65ebd2c",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "tancada",
        "rules": [
            {
                "t": "set",
                "p": "v3.estat",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "65bd5ede554da3a2",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "br2.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1480,
        "wires": [
            [
                "2b11395eb3163ce0"
            ],
            [
                "598776789d6d7398"
            ]
        ]
    },
    {
        "id": "8115fd4ac3daad53",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "rules": [
            {
                "t": "set",
                "p": "d1.estat",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "7d9ebd0478b88400",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "property": "d1.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1780,
        "wires": [
            [
                "8115fd4ac3daad53"
            ]
        ]
    },
    {
        "id": "e9f7b5f871d5b96b",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!marxa",
        "property": "d1.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1740,
        "wires": [
            [
                "25050b4ec8b71a61"
            ]
        ]
    },
    {
        "id": "25050b4ec8b71a61",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria",
        "property": "d1.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1740,
        "wires": [
            [
                "2c64f8fef94e7c5f"
            ]
        ]
    },
    {
        "id": "2c64f8fef94e7c5f",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "parada",
        "rules": [
            {
                "t": "set",
                "p": "d1.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "b4922ae5fc09368d",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "property": "d1.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1700,
        "wires": [
            [
                "84df56a4af2189bc"
            ]
        ]
    },
    {
        "id": "84df56a4af2189bc",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria",
        "property": "d1.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1700,
        "wires": [
            [
                "2d33780ddd8e011e"
            ]
        ]
    },
    {
        "id": "2d33780ddd8e011e",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "rules": [
            {
                "t": "set",
                "p": "d1.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "0ba354eeaad19f59",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "rules": [
            {
                "t": "set",
                "p": "d2.estat",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "9ac0d4c5f64e2b69",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "parada",
        "rules": [
            {
                "t": "set",
                "p": "d2.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "14dc0ad125c313e2",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "rules": [
            {
                "t": "set",
                "p": "d2.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1820,
        "wires": [
            []
        ]
    },
    {
        "id": "0432de45cc1789a8",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "rules": [
            {
                "t": "set",
                "p": "d3.estat",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "781b0791bbcbeb8a",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "parada",
        "rules": [
            {
                "t": "set",
                "p": "d3.estat",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "43901cb417d1faa8",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "rules": [
            {
                "t": "set",
                "p": "d3.estat",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "c236ace670417cbf",
        "type": "function",
        "z": "40e18b1fe1f3daf0",
        "name": "Escriure consignes a variables globals",
        "func": "// Extreure el topic després del primer '/'\nconst topic = msg.topic.split('/')[1];\nconst payload = msg.payload;\n\n// Crear la clau global dinàmica afegint \"consigna\" automàticament\nconst clauGlobal = topic.includes('.') \n    ? topic.replace('.', '.consigna.') \n    : topic + '.consigna';\n\n// Assignar el valor del payload a la clau global generada\nglobal.set(clauGlobal, payload);\n\nreturn null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "481ace8cb861ae9c",
        "type": "mqtt in",
        "z": "40e18b1fe1f3daf0",
        "name": "FUXA consignes",
        "topic": "consignes/#",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "be25cdc18f19b7bc",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 120,
        "wires": [
            [
                "c236ace670417cbf"
            ]
        ]
    },
    {
        "id": "9fa3248947dea251",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "estats/horaritarifa",
        "payload": "horaritarifa",
        "payloadType": "global",
        "x": 170,
        "y": 1140,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "553efaa4fa20997f",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats v1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 2160,
        "wires": [
            [
                "22204fce814e324c",
                "d639ddfbdddd5d8d",
                "4dc224b742881706",
                "e82d38e9874c4fed"
            ]
        ]
    },
    {
        "id": "2e538c8c7354afb1",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 2360,
        "wires": [
            [
                "138dd04729f0d4c4"
            ]
        ]
    },
    {
        "id": "9a53c76801318abc",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 2320,
        "wires": [
            [
                "4768ed38c3523177"
            ]
        ]
    },
    {
        "id": "7b1c55528750f79e",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 2400,
        "wires": [
            [
                "cdbe6bb517ecafa9"
            ]
        ]
    },
    {
        "id": "e69157330b5b7ed5",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 2400,
        "wires": [
            [
                "7b1c55528750f79e"
            ]
        ]
    },
    {
        "id": "06a35071943a2857",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 2360,
        "wires": [
            [
                "2e538c8c7354afb1"
            ]
        ]
    },
    {
        "id": "9b64fb6ae176c8b7",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 2320,
        "wires": [
            [
                "9a53c76801318abc"
            ]
        ]
    },
    {
        "id": "7b9079fa3136dd56",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "oberta",
        "property": "v3.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 2580,
        "wires": [
            [
                "f15a56a11bfbbbb9"
            ]
        ]
    },
    {
        "id": "ea3709af16568a9c",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!oberta",
        "property": "v3.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 2540,
        "wires": [
            [
                "5b30b17b06ac026e"
            ]
        ]
    },
    {
        "id": "5fb6d76bd545190d",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!oberta",
        "property": "v3.oberta",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 2620,
        "wires": [
            [
                "701dec0a9486547c"
            ]
        ]
    },
    {
        "id": "528aef13fee9e653",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "tancada",
        "property": "v3.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 2620,
        "wires": [
            [
                "5fb6d76bd545190d"
            ]
        ]
    },
    {
        "id": "5f6c5144846461df",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!tancada",
        "property": "v3.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 2580,
        "wires": [
            [
                "7b9079fa3136dd56"
            ]
        ]
    },
    {
        "id": "dd77912c3babf31b",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!tancada",
        "property": "v3.tancada",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 2540,
        "wires": [
            [
                "ea3709af16568a9c"
            ]
        ]
    },
    {
        "id": "162b236edd1933f0",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats v2",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 2360,
        "wires": [
            [
                "9b64fb6ae176c8b7",
                "06a35071943a2857",
                "e69157330b5b7ed5",
                "666238e7c8700130"
            ]
        ]
    },
    {
        "id": "56756b516b412091",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats v3",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 2580,
        "wires": [
            [
                "dd77912c3babf31b",
                "5f6c5144846461df",
                "528aef13fee9e653",
                "bb24a4a078a61b6d"
            ]
        ]
    },
    {
        "id": "031ec2c01610c9de",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats d1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 1740,
        "wires": [
            [
                "b4922ae5fc09368d",
                "e9f7b5f871d5b96b",
                "7d9ebd0478b88400"
            ]
        ]
    },
    {
        "id": "05e6e3ae7d9b2821",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!marxa",
        "property": "d2.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1860,
        "wires": [
            [
                "9ac0d4c5f64e2b69"
            ]
        ]
    },
    {
        "id": "d92d9c1c9e097d52",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "property": "d2.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1820,
        "wires": [
            [
                "14dc0ad125c313e2"
            ]
        ]
    },
    {
        "id": "099149c2e5d77022",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats d2",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 1860,
        "wires": [
            [
                "d92d9c1c9e097d52",
                "05e6e3ae7d9b2821"
            ]
        ]
    },
    {
        "id": "1120662f3bf57657",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "property": "d3.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 2020,
        "wires": [
            [
                "0432de45cc1789a8"
            ]
        ]
    },
    {
        "id": "2039c47e40dcd6cc",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!marxa",
        "property": "d3.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1980,
        "wires": [
            [
                "cb70d1db07a4ba7c"
            ]
        ]
    },
    {
        "id": "cb70d1db07a4ba7c",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria",
        "property": "d3.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1980,
        "wires": [
            [
                "781b0791bbcbeb8a"
            ]
        ]
    },
    {
        "id": "f8b7bd3bbc7d6ad3",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "property": "d3.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1940,
        "wires": [
            [
                "28ad7edf37fb7e62"
            ]
        ]
    },
    {
        "id": "28ad7edf37fb7e62",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria",
        "property": "d3.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1940,
        "wires": [
            [
                "43901cb417d1faa8"
            ]
        ]
    },
    {
        "id": "9ed6c64c4af5230c",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats d3",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 1980,
        "wires": [
            [
                "f8b7bd3bbc7d6ad3",
                "2039c47e40dcd6cc",
                "1120662f3bf57657"
            ]
        ]
    },
    {
        "id": "86d77ec2548268e8",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats br1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 1420,
        "wires": [
            [
                "424466ba0116847a"
            ]
        ]
    },
    {
        "id": "4e4d19d10cec1821",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats br2",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 1480,
        "wires": [
            [
                "65bd5ede554da3a2"
            ]
        ]
    },
    {
        "id": "68764693c90b3b2d",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "estats bfiltre",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 1580,
        "wires": [
            [
                "f32c43c6f3ecc658",
                "a25d33a88bfe6320",
                "7f011332338c0d48"
            ]
        ]
    },
    {
        "id": "7f011332338c0d48",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria",
        "property": "b1.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1620,
        "wires": [
            [
                "0f78d7bb1dc31819"
            ]
        ]
    },
    {
        "id": "a25d33a88bfe6320",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!marxa",
        "property": "b1.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1580,
        "wires": [
            [
                "4c06bee04a916f91"
            ]
        ]
    },
    {
        "id": "4c06bee04a916f91",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria",
        "property": "b1.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1580,
        "wires": [
            [
                "eaa365e88ca7fec8"
            ]
        ]
    },
    {
        "id": "f32c43c6f3ecc658",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "marxa",
        "property": "b1.marxa",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 1540,
        "wires": [
            [
                "d3c2aa1172d8a70a"
            ]
        ]
    },
    {
        "id": "d3c2aa1172d8a70a",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria",
        "property": "b1.avaria",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1540,
        "wires": [
            [
                "d78042691c6b5106"
            ]
        ]
    },
    {
        "id": "1cd209dd3bc8f34c",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "estats/plc2",
        "payload": "plc2",
        "payloadType": "global",
        "x": 150,
        "y": 1180,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "98c96f5eb4f1135b",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "d3.consigna.selector",
        "payloadType": "global",
        "x": 200,
        "y": 2900,
        "wires": [
            [
                "b887c692236a8389"
            ]
        ]
    },
    {
        "id": "0b2894401c66e83e",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "diposit1.consigna.servei",
        "payloadType": "global",
        "x": 210,
        "y": 2780,
        "wires": [
            [
                "660c57591565019d"
            ]
        ]
    },
    {
        "id": "b887c692236a8389",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d3.diposit",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 2900,
        "wires": [
            [
                "5e30e1447d82469d"
            ]
        ]
    },
    {
        "id": "7d2d124a0341bb7f",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "servei d2",
        "property": "diposit2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 620,
        "y": 2760,
        "wires": [
            [
                "b3c26445a8934bdc"
            ]
        ]
    },
    {
        "id": "a1e91c3dbc18a52c",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!servei d2",
        "property": "diposit2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 620,
        "y": 2800,
        "wires": [
            [
                "a84f37b58e127470"
            ]
        ]
    },
    {
        "id": "660c57591565019d",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "servei d1",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 440,
        "y": 2780,
        "wires": [
            [
                "7d2d124a0341bb7f"
            ],
            [
                "a1e91c3dbc18a52c",
                "f84fcd17d8c0ee5f"
            ]
        ]
    },
    {
        "id": "f84fcd17d8c0ee5f",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "servei d2",
        "property": "diposit2.consigna.servei",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 620,
        "y": 2840,
        "wires": [
            [
                "330b441c8af70f13"
            ]
        ]
    },
    {
        "id": "b3c26445a8934bdc",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "Dipòsit 2",
        "rules": [
            {
                "t": "set",
                "p": "diposits.selector",
                "pt": "global",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 2760,
        "wires": [
            []
        ]
    },
    {
        "id": "a84f37b58e127470",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "Dipòsit 1",
        "rules": [
            {
                "t": "set",
                "p": "diposits.selector",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 2800,
        "wires": [
            []
        ]
    },
    {
        "id": "330b441c8af70f13",
        "type": "change",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "2 dipòsits ",
        "rules": [
            {
                "t": "set",
                "p": "diposits.selector",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 2840,
        "wires": [
            []
        ]
    },
    {
        "id": "1977247eefe0893f",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "estats/diposits",
        "payload": "diposits",
        "payloadType": "global",
        "x": 160,
        "y": 1220,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "5e30e1447d82469d",
        "type": "debug",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "debug 186",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 2900,
        "wires": []
    },
    {
        "id": "9c79fae732a2d838",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "alarmes",
        "payload": "alarmes",
        "payloadType": "global",
        "x": 160,
        "y": 1260,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "ea04c7dba23a18e7",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "avaria.tancar",
        "property": "v1.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 530,
        "y": 2240,
        "wires": [
            [
                "82ac2b5809546802"
            ]
        ]
    },
    {
        "id": "666238e7c8700130",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2440,
        "wires": [
            [
                "1365ad359f498a50"
            ],
            [
                "9a6e9b30f93a31ef"
            ]
        ]
    },
    {
        "id": "9a6e9b30f93a31ef",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v2.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 2460,
        "wires": [
            [
                "1365ad359f498a50"
            ]
        ]
    },
    {
        "id": "dc78747e9b84535e",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v3.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 2680,
        "wires": [
            [
                "d94bd775abfefe7d"
            ]
        ]
    },
    {
        "id": "bb24a4a078a61b6d",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "",
        "property": "v3.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2660,
        "wires": [
            [
                "d94bd775abfefe7d"
            ],
            [
                "dc78747e9b84535e"
            ]
        ]
    },
    {
        "id": "602b57748f526616",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v1.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2100,
        "wires": [
            [
                "61141507483c3a36"
            ]
        ]
    },
    {
        "id": "61141507483c3a36",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v1.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2100,
        "wires": [
            [
                "7c2117af6ffa5e1f"
            ]
        ]
    },
    {
        "id": "5a0aa88a34e300cf",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v1.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2140,
        "wires": [
            [
                "8fa9fcc33a02eac8"
            ]
        ]
    },
    {
        "id": "8fa9fcc33a02eac8",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v1.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2140,
        "wires": [
            [
                "a6426f54e64e5c5f"
            ]
        ]
    },
    {
        "id": "1ff441b2af3c8acb",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v1.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2180,
        "wires": [
            [
                "df27a5ae053385e2"
            ]
        ]
    },
    {
        "id": "df27a5ae053385e2",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v1.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2180,
        "wires": [
            [
                "70af1b8d33229058"
            ]
        ]
    },
    {
        "id": "4768ed38c3523177",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v2.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2320,
        "wires": [
            [
                "413094742396bb74"
            ]
        ]
    },
    {
        "id": "413094742396bb74",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v2.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2320,
        "wires": [
            [
                "c036382d6301a932"
            ]
        ]
    },
    {
        "id": "138dd04729f0d4c4",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v2.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2360,
        "wires": [
            [
                "20fb7b78fae9b64a"
            ]
        ]
    },
    {
        "id": "20fb7b78fae9b64a",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v2.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2360,
        "wires": [
            [
                "c4f3543a077fc107"
            ]
        ]
    },
    {
        "id": "cdbe6bb517ecafa9",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v2.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2400,
        "wires": [
            [
                "a19761b209d4ee03"
            ]
        ]
    },
    {
        "id": "a19761b209d4ee03",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v2.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2400,
        "wires": [
            [
                "84253d667c92c4ab"
            ]
        ]
    },
    {
        "id": "5b30b17b06ac026e",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v3.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2540,
        "wires": [
            [
                "8b000766422b857e"
            ]
        ]
    },
    {
        "id": "8b000766422b857e",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v3.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2540,
        "wires": [
            [
                "86d5a60c62150951"
            ]
        ]
    },
    {
        "id": "f15a56a11bfbbbb9",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v3.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2580,
        "wires": [
            [
                "516ccca22c7fa335"
            ]
        ]
    },
    {
        "id": "516ccca22c7fa335",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v3.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2580,
        "wires": [
            [
                "cce227b1e7f16cda"
            ]
        ]
    },
    {
        "id": "701dec0a9486547c",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.obrir",
        "property": "v3.avaria.obrir",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 2620,
        "wires": [
            [
                "1b0f6ad09018793d"
            ]
        ]
    },
    {
        "id": "1b0f6ad09018793d",
        "type": "switch",
        "z": "40e18b1fe1f3daf0",
        "g": "9b2933ab4b100a51",
        "name": "!avaria.tancar",
        "property": "v3.avaria.tancar",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2620,
        "wires": [
            [
                "865984d4b65ebd2c"
            ]
        ]
    },
    {
        "id": "b0eff72c6fc85d73",
        "type": "inject",
        "z": "40e18b1fe1f3daf0",
        "g": "bb65a77b590797ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "estats/intrusio",
        "payload": "intrusio",
        "payloadType": "global",
        "x": 160,
        "y": 1300,
        "wires": [
            [
                "04fc45b459865162"
            ]
        ]
    },
    {
        "id": "61f6caa3a3cbf3f0",
        "type": "comment",
        "z": "8dd0653486d5a6d4",
        "name": "XIP LORA RN2483A",
        "info": "",
        "x": 130,
        "y": 520,
        "wires": []
    },
    {
        "id": "c9fbe9689981be68",
        "type": "mqtt out",
        "z": "8dd0653486d5a6d4",
        "name": "Gronxadors",
        "topic": "control/comandament/bgronxa",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e641fe5b1175d5b1",
        "x": 930,
        "y": 140,
        "wires": []
    },
    {
        "id": "e9790cda0b8d2955",
        "type": "comment",
        "z": "8dd0653486d5a6d4",
        "name": "MQTT",
        "info": "",
        "x": 90,
        "y": 60,
        "wires": []
    },
    {
        "id": "8b8d3b88aca2aba2",
        "type": "mqtt in",
        "z": "8dd0653486d5a6d4",
        "name": "Control comunicacio ",
        "topic": "control/comunicacio/plc9",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e641fe5b1175d5b1",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 240,
        "wires": [
            [
                "b92ff5a508f9afcf",
                "2"
            ]
        ]
    },
    {
        "id": "2",
        "type": "trigger",
        "z": "8dd0653486d5a6d4",
        "name": "ok/fallo",
        "op1": "1",
        "op2": "0",
        "op1type": "num",
        "op2type": "num",
        "duration": "15",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 340,
        "y": 260,
        "wires": [
            [
                "b92ff5a508f9afcf"
            ]
        ]
    },
    {
        "id": "b92ff5a508f9afcf",
        "type": "change",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "plc2.comunic",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 240,
        "wires": [
            [
                "e9f1aa4e329a04ba"
            ]
        ]
    },
    {
        "id": "98504dd907dbbb5b",
        "type": "inject",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "bgronxadors.tarifes",
        "payloadType": "global",
        "x": 200,
        "y": 120,
        "wires": [
            [
                "533231eb757f57c5"
            ]
        ]
    },
    {
        "id": "beb0e6c5e5c634fe",
        "type": "rbe",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "payload",
        "x": 570,
        "y": 120,
        "wires": [
            [
                "caef0ca774b3678a"
            ]
        ]
    },
    {
        "id": "caef0ca774b3678a",
        "type": "switch",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 140,
        "wires": [
            [
                "c9fbe9689981be68",
                "45dd7faae143f1b0"
            ],
            [
                "c9fbe9689981be68",
                "45dd7faae143f1b0"
            ]
        ]
    },
    {
        "id": "db29c747d126c8c9",
        "type": "inject",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "120",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "bgronxadors.tarifes",
        "payloadType": "global",
        "x": 200,
        "y": 160,
        "wires": [
            [
                "caef0ca774b3678a"
            ]
        ]
    },
    {
        "id": "f829f77502db427c",
        "type": "inject",
        "z": "8dd0653486d5a6d4",
        "name": "Fallada cominiciacio",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 300,
        "wires": [
            [
                "b92ff5a508f9afcf"
            ]
        ]
    },
    {
        "id": "49d66affeb2eb432",
        "type": "mqtt in",
        "z": "8dd0653486d5a6d4",
        "name": "Estat bombament Gronxadors",
        "topic": "control/estatbombes/plc9",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e641fe5b1175d5b1",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 180,
        "y": 380,
        "wires": [
            [
                "46adf2e6e2754c9e"
            ]
        ]
    },
    {
        "id": "ebc6b3c5c6bd607b",
        "type": "change",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bgronxadors.estat",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 380,
        "wires": [
            [
                "66e0b83b12ccbe46"
            ]
        ]
    },
    {
        "id": "46adf2e6e2754c9e",
        "type": "switch",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 380,
        "wires": [
            [
                "ebc6b3c5c6bd607b"
            ],
            [
                "ebc6b3c5c6bd607b"
            ]
        ]
    },
    {
        "id": "533231eb757f57c5",
        "type": "delay",
        "z": "8dd0653486d5a6d4",
        "name": "",
        "pauseType": "delay",
        "timeout": "20",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 120,
        "wires": [
            [
                "beb0e6c5e5c634fe"
            ]
        ]
    },
    {
        "id": "45dd7faae143f1b0",
        "type": "debug",
        "z": "8dd0653486d5a6d4",
        "name": "debug 193",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 100,
        "wires": []
    },
    {
        "id": "e9f1aa4e329a04ba",
        "type": "debug",
        "z": "8dd0653486d5a6d4",
        "name": "debug 198",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 240,
        "wires": []
    },
    {
        "id": "66e0b83b12ccbe46",
        "type": "debug",
        "z": "8dd0653486d5a6d4",
        "name": "debug 199",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 380,
        "wires": []
    },
    {
        "id": "640b1768bd3a9056",
        "type": "mqtt out",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "Cap a IOT",
        "topic": "",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "ad0b6903ab51bbcb",
        "x": 1290,
        "y": 60,
        "wires": []
    },
    {
        "id": "777d64a2cf13897c",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "Procesar Mensaje",
        "func": "var valor = msg.payload;\n\n// Obtener el topic del mensaje de entrada\nvar topic = msg.topic;\nvar topicParts = topic.split('/');\nvar plcId = Number(topicParts[2]);  // Convertir a número\nvar tag = topicParts[3];  // Asumiendo que el tag está en la cuarta posición del topic\n\n// Obtener la fecha y hora actual en formato ISO 8601\nvar tiempo = new Date().toISOString();\n\n// Crear el nuevo mensaje con los datos\nvar newMsg = {\n    payload: {\n        valor: valor,\n        temps: tiempo,\n        plc: plcId,\n        tag: tag\n    },\n    topic: topic // Usar el mismo topic que el mensaje original\n};\n\nreturn newMsg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 60,
        "wires": [
            [
                "831f391c3ded6798",
                "640b1768bd3a9056"
            ]
        ]
    },
    {
        "id": "831f391c3ded6798",
        "type": "debug",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "debug 140",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1290,
        "y": 120,
        "wires": []
    },
    {
        "id": "6f79b77431535226",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/analitzador1clor",
        "payload": "analitzador1.clor",
        "payloadType": "global",
        "x": 230,
        "y": 60,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "e5aa2df05f321711",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/analitzador2clor",
        "payload": "analitzador2.clor",
        "payloadType": "global",
        "x": 230,
        "y": 100,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "50e5abfb2473be40",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/analitzador2ph",
        "payload": "analitzador2.ph",
        "payloadType": "global",
        "x": 230,
        "y": 140,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "427cdd1862b91ffd",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/analitzador3terbolesa",
        "payload": "analitzador3.terb",
        "payloadType": "global",
        "x": 230,
        "y": 180,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "6a6e2a740a66c159",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/acumulatcabal1",
        "payload": "cabal1.acum",
        "payloadType": "global",
        "x": 220,
        "y": 380,
        "wires": [
            [
                "438190ae7d37face"
            ]
        ]
    },
    {
        "id": "fb115ec2915862fb",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/instantanicabal1",
        "payload": "cabal1.inst",
        "payloadType": "global",
        "x": 210,
        "y": 420,
        "wires": [
            [
                "d62b9dfa0cf69785"
            ]
        ]
    },
    {
        "id": "f63d088a7812546b",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/acumulatcabal2",
        "payload": "cabal2.acum",
        "payloadType": "global",
        "x": 220,
        "y": 460,
        "wires": [
            [
                "e31c874715762ffd"
            ]
        ]
    },
    {
        "id": "4a377b266eb11c44",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/instantanicabal2",
        "payload": "cabal2.inst",
        "payloadType": "global",
        "x": 210,
        "y": 500,
        "wires": [
            [
                "0abab518350d3d42"
            ]
        ]
    },
    {
        "id": "e14cdc8739cbfc27",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/acumulatcabal3",
        "payload": "cabal3.acum",
        "payloadType": "global",
        "x": 220,
        "y": 540,
        "wires": [
            [
                "20e0d67dd92368e0"
            ]
        ]
    },
    {
        "id": "1a60d2e72354b7af",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/instantanicabal3",
        "payload": "cabal3.inst",
        "payloadType": "global",
        "x": 210,
        "y": 580,
        "wires": [
            [
                "788dcce653000f77"
            ]
        ]
    },
    {
        "id": "6805f4b5e71b90c9",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/acumulatcabal4",
        "payload": "cabal4.acum",
        "payloadType": "global",
        "x": 220,
        "y": 620,
        "wires": [
            [
                "8e2826beec632698"
            ]
        ]
    },
    {
        "id": "cd6cabb0f9dc4e9a",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/instantanicabal4",
        "payload": "cabal4.inst",
        "payloadType": "global",
        "x": 210,
        "y": 660,
        "wires": [
            [
                "8d3ebbf4011b2fe6"
            ]
        ]
    },
    {
        "id": "dd382a812fcef6ac",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/acumulatcabal5",
        "payload": "cabal5.acum",
        "payloadType": "global",
        "x": 220,
        "y": 700,
        "wires": [
            [
                "19c5ecdde8c04049"
            ]
        ]
    },
    {
        "id": "6fb0d7af9a941589",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/instantanicabal5",
        "payload": "cabal5.inst",
        "payloadType": "global",
        "x": 210,
        "y": 740,
        "wires": [
            [
                "b99309940bdd81da"
            ]
        ]
    },
    {
        "id": "39acaa7479a8aa70",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/acumulatcabal6",
        "payload": "cabal6.acum",
        "payloadType": "global",
        "x": 220,
        "y": 780,
        "wires": [
            [
                "e8d482a96640b2ee"
            ]
        ]
    },
    {
        "id": "86553e272f8c2498",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/instantanicabal6",
        "payload": "cabal6.inst",
        "payloadType": "global",
        "x": 210,
        "y": 820,
        "wires": [
            [
                "5a6836f48d5ee18d"
            ]
        ]
    },
    {
        "id": "e8cae876fe8472fa",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/acumulatcabal7",
        "payload": "cabal7.acum",
        "payloadType": "global",
        "x": 220,
        "y": 860,
        "wires": [
            [
                "7410787cfbc967e0"
            ]
        ]
    },
    {
        "id": "d3f82f354731ddf1",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/instantanicabal7",
        "payload": "cabal7.inst",
        "payloadType": "global",
        "x": 210,
        "y": 900,
        "wires": [
            [
                "543cbc518246f985"
            ]
        ]
    },
    {
        "id": "6707384ce311e2f8",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/bmindiposit1",
        "payload": "diposit1.bminim",
        "payloadType": "global",
        "x": 230,
        "y": 960,
        "wires": [
            [
                "1b47997ecd50431a"
            ]
        ]
    },
    {
        "id": "410bdc25e02b88c5",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/bmaxdiposit1",
        "payload": "diposit1.bmaxim",
        "payloadType": "global",
        "x": 230,
        "y": 1000,
        "wires": [
            [
                "efe9cc07ccd9fcce"
            ]
        ]
    },
    {
        "id": "b046d82e9f17db0a",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/bmindiposit2",
        "payload": "diposit2.bminim",
        "payloadType": "global",
        "x": 230,
        "y": 1100,
        "wires": [
            [
                "2b9083b9987b580c"
            ]
        ]
    },
    {
        "id": "a5500b91b3850d85",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/bmaxdiposit2",
        "payload": "diposit2.bmaxim",
        "payloadType": "global",
        "x": 230,
        "y": 1140,
        "wires": [
            [
                "ae996ce20e01fc7c"
            ]
        ]
    },
    {
        "id": "8dad1bcba8e03dde",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/nivelldiposit1",
        "payload": "diposit1.nivell",
        "payloadType": "global",
        "x": 220,
        "y": 1040,
        "wires": [
            [
                "237c98b6feb2d065"
            ]
        ]
    },
    {
        "id": "9acad5adabbafee5",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/nivelldiposit2",
        "payload": "diposit2.nivell",
        "payloadType": "global",
        "x": 220,
        "y": 1180,
        "wires": [
            [
                "df1b6a35b9169a22"
            ]
        ]
    },
    {
        "id": "29a3ca4a46af87c8",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/marxafiltre",
        "payload": "filtre.marxa",
        "payloadType": "global",
        "x": 210,
        "y": 1240,
        "wires": [
            [
                "f3df84ad07f85df8"
            ]
        ]
    },
    {
        "id": "2c19eda128bcff60",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/presfiltre",
        "payload": "filtre.pres",
        "payloadType": "global",
        "x": 210,
        "y": 1280,
        "wires": [
            [
                "dca097ed94b2bfe0"
            ]
        ]
    },
    {
        "id": "dce3672fbfeae62a",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/maniobresfiltre",
        "payload": "filtre.mani",
        "payloadType": "global",
        "x": 210,
        "y": 1320,
        "wires": [
            [
                "ad31ed0566f84c64"
            ]
        ]
    },
    {
        "id": "dd0f7851061befd8",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/pressacumulada",
        "payload": "filtre.pressacum",
        "payloadType": "global",
        "x": 230,
        "y": 1360,
        "wires": [
            [
                "c97f0cd058f021e9"
            ]
        ]
    },
    {
        "id": "aca477319dbc376a",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/obertavalvula1",
        "payload": "v1.oberta",
        "payloadType": "global",
        "x": 210,
        "y": 1420,
        "wires": [
            [
                "8eecb4aac6aef235"
            ]
        ]
    },
    {
        "id": "f224b0b821b93998",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/obertavalvula2",
        "payload": "v2.oberta",
        "payloadType": "global",
        "x": 210,
        "y": 1460,
        "wires": [
            [
                "adaf29b50d8e980d"
            ]
        ]
    },
    {
        "id": "4c81ec1b57dec879",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/obertavalvula3",
        "payload": "v3.oberta",
        "payloadType": "global",
        "x": 210,
        "y": 1500,
        "wires": [
            [
                "579b401e92969c6e"
            ]
        ]
    },
    {
        "id": "5db79808c8912f8b",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/marxab1filtre",
        "payload": "b1.marxa",
        "payloadType": "global",
        "x": 210,
        "y": 240,
        "wires": [
            [
                "7d974726203c1ed4"
            ]
        ]
    },
    {
        "id": "91f7ef66bf40c405",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/marxab1recirculadora",
        "payload": "br1.marxa",
        "payloadType": "global",
        "x": 210,
        "y": 280,
        "wires": [
            [
                "cd358c42534b0852"
            ]
        ]
    },
    {
        "id": "b5f9c97e7cb02dbf",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/marxab2recirculadora",
        "payload": "br2.marxa",
        "payloadType": "global",
        "x": 210,
        "y": 320,
        "wires": [
            [
                "c5df6b9793260414"
            ]
        ]
    },
    {
        "id": "cc466b131a3fe421",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/consignadiposit1",
        "payload": "alarmes.nivelldiposit1",
        "payloadType": "global",
        "x": 250,
        "y": 2060,
        "wires": [
            [
                "a25ddbe3e6ef01a2"
            ]
        ]
    },
    {
        "id": "5397f151a5635631",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/consignacloranalitzador1",
        "payload": "alarmes.cloranalitzador1",
        "payloadType": "global",
        "x": 250,
        "y": 2140,
        "wires": [
            [
                "4c25f418d417be8f"
            ]
        ]
    },
    {
        "id": "a25ddbe3e6ef01a2",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2060,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "2f9ae7dc3b6fafb3",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2640,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "495a431e5111cfb7",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "Crear Missatge",
        "func": "var valor = msg.payload.lectura;\nvar estat = msg.payload.estat;\nvar missatge = msg.payload.missatge;\nvar prioritat = 0;\n// Obtener el topic del mensaje de entrada\nvar topic = msg.topic;\nvar topicParts = topic.split('/');\nvar plcId = Number(topicParts[2]);  // Convertir a número\nvar tag = topicParts[3];  // Asumiendo que el tag está en la cuarta posición del topic\n\n// Obtener la fecha y hora actual en formato ISO 8601\nvar tiempo = new Date().toISOString();\n\n// Crear el nuevo mensaje con los datos\nvar newMsg = {\n    payload: {\n        valor: valor,\n        temps: tiempo,\n        plc: plcId,\n        tag: tag,\n        prioritat: prioritat,\n        estat: estat,\n        missatge: missatge\n    },\n    topic: topic // Usar el mismo topic que el mensaje original\n};\n\nreturn newMsg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 2060,
        "wires": [
            [
                "4aa106a804d0ac30"
            ]
        ]
    },
    {
        "id": "4aa106a804d0ac30",
        "type": "mqtt out",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "Servidor IOT",
        "topic": "",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "ad0b6903ab51bbcb",
        "x": 1050,
        "y": 2060,
        "wires": []
    },
    {
        "id": "e09c919abecda326",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/consignacloranalitzador2",
        "payload": "alarmes.cloranalitzador2",
        "payloadType": "global",
        "x": 250,
        "y": 2180,
        "wires": [
            [
                "a587b689e5d89c7e"
            ]
        ]
    },
    {
        "id": "68f74368126554e0",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2700,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "785df7b544ca1c83",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2740,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "aced0244f922a829",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2860,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "6d23c1af49a8f075",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2820,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "4c25f418d417be8f",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2140,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "5d182173e44988ca",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2100,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "a587b689e5d89c7e",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2180,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "8b291ddae27cadb4",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/consignadiposit2",
        "payload": "alarmes.nivelldiposit2",
        "payloadType": "global",
        "x": 250,
        "y": 2100,
        "wires": [
            [
                "5d182173e44988ca"
            ]
        ]
    },
    {
        "id": "43879a5e3a4478f3",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2240,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "4a69ac42fb2d682d",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2520,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "7a199ee782089fae",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2600,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "6f33383d7d1c1bb3",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/marxadspre",
        "payload": "d1.marxa",
        "payloadType": "global",
        "x": 210,
        "y": 1680,
        "wires": [
            [
                "bd81f86c6bda5ca6"
            ]
        ]
    },
    {
        "id": "b624897340149a4b",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/marxadspost",
        "payload": "d2.marxa",
        "payloadType": "global",
        "x": 210,
        "y": 1720,
        "wires": [
            [
                "30c7455c74627e2e"
            ]
        ]
    },
    {
        "id": "66814c011c6e3f10",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/marxadsacid",
        "payload": "d3.marxa",
        "payloadType": "global",
        "x": 210,
        "y": 1760,
        "wires": [
            [
                "c00d126f4879a0a8"
            ]
        ]
    },
    {
        "id": "aac47ec3e032836b",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/tancadavalvula1",
        "payload": "v1.tancada",
        "payloadType": "global",
        "x": 210,
        "y": 1540,
        "wires": [
            [
                "38adba96a0f6083b"
            ]
        ]
    },
    {
        "id": "39d4ac0f24c3c643",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/tancadavalvula2",
        "payload": "v2.tancada",
        "payloadType": "global",
        "x": 210,
        "y": 1580,
        "wires": [
            [
                "b6ca59bf80053b31"
            ]
        ]
    },
    {
        "id": "7d0381cb96158ce8",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/tancadavalvula3",
        "payload": "v3.tancada",
        "payloadType": "global",
        "x": 210,
        "y": 1620,
        "wires": [
            [
                "95e83e8b5e6d0d98"
            ]
        ]
    },
    {
        "id": "7d974726203c1ed4",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 240,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "c5df6b9793260414",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 320,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "cd358c42534b0852",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 280,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "1b47997ecd50431a",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 960,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "efe9cc07ccd9fcce",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1000,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "2b9083b9987b580c",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1100,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "ae996ce20e01fc7c",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1140,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "f3df84ad07f85df8",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1240,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "dca097ed94b2bfe0",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1280,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "ad31ed0566f84c64",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1320,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "c97f0cd058f021e9",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1360,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "8eecb4aac6aef235",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1420,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "adaf29b50d8e980d",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1460,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "579b401e92969c6e",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1500,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "38adba96a0f6083b",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1540,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "b6ca59bf80053b31",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1580,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "95e83e8b5e6d0d98",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1620,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "bd81f86c6bda5ca6",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1680,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "30c7455c74627e2e",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1720,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "c00d126f4879a0a8",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "c88a13287c6d9f52",
        "name": "diferent/1 cop dia",
        "func": "// Obtenir la data i valor anteriors del context\nlet previousValue = context.get('previousValue') || null;\nlet lastSentDate = context.get('lastSentDate') || null;\n\n// Obtenir l'actual timestamp i convertir-lo en data\nlet currentDate = new Date();\nlet currentDateStr = currentDate.toISOString().slice(0, 10); // Només agafa la part de la data (YYYY-MM-DD)\n\n// Inicialitza flags per les condicions\nlet isDifferent = (previousValue === null) || (msg.payload !== previousValue);\nlet isOncePerDay = (lastSentDate === null) || (lastSentDate !== currentDateStr);\n\n// Actualitzar el context per a futures execucions\ncontext.set('previousValue', msg.payload);\n\n// Si és la primera vegada avui, actualitzar lastSentDate\nif (isOncePerDay) {\n    context.set('lastSentDate', currentDateStr);\n}\n\n// Comprovar si ha de passar el missatge\nif (isDifferent || isOncePerDay) {\n    // Retornar el missatge si es compleix una de les condicions\n    return msg;\n} else {\n    // No retornar res si no es compleix cap de les condicions\n    return null;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1760,
        "wires": [
            [
                "777d64a2cf13897c"
            ]
        ]
    },
    {
        "id": "19387f63c14229ae",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 3420,
        "wires": [
            [
                "d737981c2463da04"
            ]
        ]
    },
    {
        "id": "47e456f7bbd6e9bc",
        "type": "mqtt in",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "topic": "dades_diaries",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "087c314fc1fb6566",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 3460,
        "wires": [
            [
                "5ca8b0088f5cc021"
            ]
        ]
    },
    {
        "id": "5ca8b0088f5cc021",
        "type": "change",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "dades.diaries",
        "rules": [
            {
                "t": "set",
                "p": "dades.diaries",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 3460,
        "wires": [
            [
                "d737981c2463da04"
            ]
        ]
    },
    {
        "id": "af04943cadfda188",
        "type": "debug",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "debug 153",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 3440,
        "wires": []
    },
    {
        "id": "d737981c2463da04",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "function 51",
        "func": "// Definició de límits en GB\nconst dades_max_diaries = 1; \nconst dades_max_mensuals = 8; \nconst dades_avis_mensuals = 5; \n\n// Dades MQTT DADES MISSATGES\nconst dades_publicades_bytes = global.get(`dades.diaries.dades_diaries.tx`); \nconst dades_rebudes_bytes = global.get(`dades.diaries.dades_diaries.rx`);\nconst dades_publicades_bytes_mes = global.get(`dades.mensuals.dades_mensuals.tx`); \nconst dades_rebudes_bytes_mes = global.get(`dades.mensuals.dades_mensuals.rx`);\n\n// CONVERTIR BYTE A GB\nvar dades_publicades_gb = dades_publicades_bytes / (1024 * 1024 * 1024);\nvar dades_rebudes_gb = dades_rebudes_bytes / (1024 * 1024 * 1024);\nvar dades_publicades_gb_mes = dades_publicades_bytes_mes / (1024 * 1024 * 1024);\nvar dades_rebudes_gb_mes = dades_rebudes_bytes_mes / (1024 * 1024 * 1024);\n\n// Guardar valors en el global\nglobal.set(`dades.diaries.publicades_gb`, dades_publicades_gb);\nglobal.set(`dades.diaries.rebudes_gb`, dades_rebudes_gb);\nglobal.set(`dades.mensuals.publicades_gb_mes`, dades_publicades_gb_mes);\nglobal.set(`dades.mensuals.rebudes_gb_mes`, dades_rebudes_gb_mes);\n\n// Calcular dades totals en GB \nvar dades_diaries_totals = dades_rebudes_gb + dades_publicades_gb;\nvar dades_mensuals_totals = dades_rebudes_gb_mes + dades_publicades_gb_mes;\n\nglobal.set(`dades.diaries.totals`, dades_diaries_totals);\nglobal.set(`dades.mensuals.totals`, dades_mensuals_totals);\n\n// ON GUARDAREM L'ALARMA\nfunction saveGlobalState(alarmActive, valor, message) {\n    global.set(`alarmes.dades.estat`, alarmActive);\n    global.set(`alarmes.dades.lectura`, valor);\n    global.set(`alarmes.dades.missatge`, message);\n}\n\n// Lògica de l'alarma\nif (dades_diaries_totals >= dades_max_diaries) {\n    saveGlobalState(1, dades_diaries_totals, '21');\n} else if (dades_mensuals_totals >= dades_max_mensuals) {\n    // Si el valor és inferior al límit baix i l'alarma no està activa\n    saveGlobalState(1, dades_mensuals_totals, '22');\n} else if (dades_mensuals_totals >= dades_avis_mensuals) {\n    saveGlobalState(1, dades_mensuals_totals, '23');\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 3440,
        "wires": [
            [
                "af04943cadfda188"
            ]
        ]
    },
    {
        "id": "2c3d9b508ef0467d",
        "type": "change",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "dades.mensuals",
        "rules": [
            {
                "t": "set",
                "p": "dades.mensuals",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 3520,
        "wires": [
            [
                "0135665d0e36716c"
            ]
        ]
    },
    {
        "id": "0885de2cf550d6cf",
        "type": "mqtt in",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "topic": "dades_mensuals",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "087c314fc1fb6566",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 3520,
        "wires": [
            [
                "2c3d9b508ef0467d"
            ]
        ]
    },
    {
        "id": "b1bc22d3d5938734",
        "type": "mqtt out",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "Cap a IOT",
        "topic": "",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "ad0b6903ab51bbcb",
        "x": 1150,
        "y": 3600,
        "wires": []
    },
    {
        "id": "13a4ee9b7a6c48ca",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/dadesdiariestotals",
        "payload": "dades.diaries.totals",
        "payloadType": "global",
        "x": 220,
        "y": 3600,
        "wires": [
            [
                "0ca6df7acc5282d7"
            ]
        ]
    },
    {
        "id": "c467fb78c281be0a",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "Procesar Mensaje",
        "func": "var valor = msg.payload;\n\n// Obtener el topic del mensaje de entrada\nvar topic = msg.topic;\nvar topicParts = topic.split('/');\nvar plcId = Number(topicParts[2]);  // Convertir a número\nvar tag = topicParts[3];  // Asumiendo que el tag está en la cuarta posición del topic\n\n// Obtener la fecha y hora actual en formato ISO 8601\nvar tiempo = new Date().toISOString();\n\n// Crear el nuevo mensaje con los datos\nvar newMsg = {\n    payload: {\n        valor: valor,\n        temps: tiempo,\n        plc: plcId,\n        tag: tag\n    },\n    topic: topic // Usar el mismo topic que el mensaje original\n};\n\nreturn newMsg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 3600,
        "wires": [
            [
                "b1bc22d3d5938734"
            ]
        ]
    },
    {
        "id": "d8e309b15ccd7db6",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/dadesmensualstotals",
        "payload": "dades.mensuals.totals",
        "payloadType": "global",
        "x": 230,
        "y": 3640,
        "wires": [
            [
                "65ca13542cb42f72"
            ]
        ]
    },
    {
        "id": "dcd38ebc6686396f",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/dadesmensualspublicades",
        "payload": "dades.mensuals.publicades_gb_mes",
        "payloadType": "global",
        "x": 270,
        "y": 3720,
        "wires": [
            [
                "c8be1e4288137fc8"
            ]
        ]
    },
    {
        "id": "39e60aa5c000a05e",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/dadesmensualsrebudes",
        "payload": "dades.mensuals.rebudes_gb_mes",
        "payloadType": "global",
        "x": 260,
        "y": 3760,
        "wires": [
            [
                "aadb51c673295760"
            ]
        ]
    },
    {
        "id": "c48126f67e54a4a7",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/dadesdiariespublicades",
        "payload": "dades.diaries.publicades_gb",
        "payloadType": "global",
        "x": 250,
        "y": 3840,
        "wires": [
            [
                "edbd16e2cd352173"
            ]
        ]
    },
    {
        "id": "3e5c26ce15f85a43",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lectures/plc/9/dadesdiariesrebudes",
        "payload": "dades.diaries.rebudes_gb",
        "payloadType": "global",
        "x": 240,
        "y": 3880,
        "wires": [
            [
                "6c947258bf249b62"
            ]
        ]
    },
    {
        "id": "0ca6df7acc5282d7",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "PreviusValue",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 3600,
        "wires": [
            [
                "c467fb78c281be0a"
            ]
        ]
    },
    {
        "id": "65ca13542cb42f72",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "PreviusValue",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 3640,
        "wires": [
            [
                "c467fb78c281be0a"
            ]
        ]
    },
    {
        "id": "c8be1e4288137fc8",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "PreviusValue",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 3720,
        "wires": [
            [
                "c467fb78c281be0a"
            ]
        ]
    },
    {
        "id": "aadb51c673295760",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "PreviusValue",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 3760,
        "wires": [
            [
                "c467fb78c281be0a"
            ]
        ]
    },
    {
        "id": "edbd16e2cd352173",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "PreviusValue",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 3840,
        "wires": [
            [
                "c467fb78c281be0a"
            ]
        ]
    },
    {
        "id": "6c947258bf249b62",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "PreviusValue",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 3880,
        "wires": [
            [
                "c467fb78c281be0a"
            ]
        ]
    },
    {
        "id": "499dffa763011a4e",
        "type": "function",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "Crear Missatge",
        "func": "var valor = msg.payload.lectura;\nvar estat = msg.payload.estat;\nvar missatge = msg.payload.missatge;\nvar prioritat = 0;\n// Obtener el topic del mensaje de entrada\nvar topic = msg.topic;\nvar topicParts = topic.split('/');\nvar plcId = Number(topicParts[2]);  // Convertir a número\nvar tag = topicParts[3];  // Asumiendo que el tag está en la cuarta posición del topic\n\n// Obtener la fecha y hora actual en formato ISO 8601\nvar tiempo = new Date().toISOString();\n\n// Crear el nuevo mensaje con los datos\nvar newMsg = {\n    payload: {\n        valor: valor,\n        temps: tiempo,\n        plc: plcId,\n        tag: tag,\n        prioritat: prioritat,\n        estat: estat,\n        missatge: missatge\n    },\n    topic: topic // Usar el mismo topic que el mensaje original\n};\n\nreturn newMsg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 3980,
        "wires": [
            [
                "b1bc22d3d5938734"
            ]
        ]
    },
    {
        "id": "8ee98e89a952a1f5",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/dades",
        "payload": "alarmes.dades",
        "payloadType": "global",
        "x": 200,
        "y": 3980,
        "wires": [
            [
                "9cf61e66d0bb0943"
            ]
        ]
    },
    {
        "id": "9cf61e66d0bb0943",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "PreviusValue",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 3980,
        "wires": [
            [
                "499dffa763011a4e"
            ]
        ]
    },
    {
        "id": "0135665d0e36716c",
        "type": "delay",
        "z": "662afd5c1069609f",
        "g": "4f7fe2aadae19e9a",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 760,
        "y": 3520,
        "wires": [
            [
                "d737981c2463da04"
            ]
        ]
    },
    {
        "id": "0284cf53d1ae65f9",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciodosificadora3",
        "payload": "alarmes.marxad3",
        "payloadType": "global",
        "x": 230,
        "y": 2240,
        "wires": [
            [
                "43879a5e3a4478f3"
            ]
        ]
    },
    {
        "id": "7102a7ebf67f34e4",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciov3",
        "payload": "alarmes.tancadavalvula3",
        "payloadType": "global",
        "x": 260,
        "y": 2280,
        "wires": [
            [
                "fb81f758f57ed388"
            ]
        ]
    },
    {
        "id": "8dbfb8ff46ea88e9",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciov2",
        "payload": "alarmes.obertavalvula2",
        "payloadType": "global",
        "x": 250,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "afc5e099ef8d615b",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciodosificadora1",
        "payload": "alarmes.marxad1",
        "payloadType": "global",
        "x": 230,
        "y": 2360,
        "wires": [
            [
                "c94ee8b5ad1a43b7"
            ]
        ]
    },
    {
        "id": "ead55d8c05b5050b",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciov1",
        "payload": "alarmes.obertavalvula1",
        "payloadType": "global",
        "x": 250,
        "y": 2400,
        "wires": [
            []
        ]
    },
    {
        "id": "7175c9a553d6840b",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciov2",
        "payload": "alarmes.tancadavalvula2",
        "payloadType": "global",
        "x": 260,
        "y": 2440,
        "wires": [
            [
                "47a99886f825c60a"
            ]
        ]
    },
    {
        "id": "6d42b9c6bf707966",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciov3",
        "payload": "alarmes.obertavalvula3",
        "payloadType": "global",
        "x": 250,
        "y": 2480,
        "wires": [
            []
        ]
    },
    {
        "id": "717b669696b5e1fc",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciov1",
        "payload": "alarmes.tancadavalvula1",
        "payloadType": "global",
        "x": 260,
        "y": 2520,
        "wires": [
            [
                "4a69ac42fb2d682d"
            ]
        ]
    },
    {
        "id": "b089ebdce1522d67",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/minimboiadiposit1",
        "payload": "alarmes.bmindiposit1",
        "payloadType": "global",
        "x": 240,
        "y": 2600,
        "wires": [
            [
                "7a199ee782089fae"
            ]
        ]
    },
    {
        "id": "69842e0998645569",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/maximboiadiposit1",
        "payload": "alarmes.bmaxdiposit1",
        "payloadType": "global",
        "x": 250,
        "y": 2640,
        "wires": [
            [
                "2f9ae7dc3b6fafb3"
            ]
        ]
    },
    {
        "id": "8f772724a18678ac",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/maximboiadiposit2",
        "payload": "alarmes.bmaxdiposit2",
        "payloadType": "global",
        "x": 250,
        "y": 2700,
        "wires": [
            [
                "68f74368126554e0"
            ]
        ]
    },
    {
        "id": "2296f8871160ed80",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/minimboiadiposit2",
        "payload": "alarmes.bmindiposit2",
        "payloadType": "global",
        "x": 240,
        "y": 2740,
        "wires": [
            [
                "785df7b544ca1c83"
            ]
        ]
    },
    {
        "id": "4672e11d020b631a",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciob1",
        "payload": "alarmes.marxabr1",
        "payloadType": "global",
        "x": 230,
        "y": 2820,
        "wires": [
            [
                "6d23c1af49a8f075"
            ]
        ]
    },
    {
        "id": "48a6f14c79b9bd59",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/disposiciob2",
        "payload": "alarmes.marxabr2",
        "payloadType": "global",
        "x": 230,
        "y": 2860,
        "wires": [
            [
                "aced0244f922a829"
            ]
        ]
    },
    {
        "id": "c94ee8b5ad1a43b7",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2360,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "47a99886f825c60a",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2440,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "6ec9fdd9e685454f",
        "type": "debug",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "debug 202",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 550,
        "y": 2020,
        "wires": []
    },
    {
        "id": "fb81f758f57ed388",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2280,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "e0636af442fec5f7",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/consignaphanalitzador2",
        "payload": "alarmes.phanalitzador2",
        "payloadType": "global",
        "x": 230,
        "y": 2960,
        "wires": [
            [
                "fbc068f96f8acf12"
            ]
        ]
    },
    {
        "id": "586f7303bf542c2c",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/consignaterbolesaanalitzador3",
        "payload": "alarmes.terbanalitzador3",
        "payloadType": "global",
        "x": 240,
        "y": 3000,
        "wires": [
            [
                "45d50c16e79fb779"
            ]
        ]
    },
    {
        "id": "45d50c16e79fb779",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 3000,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "fbc068f96f8acf12",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2960,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "4f3ace90c599d4af",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/consignaterbolesaanalitzador3",
        "payload": "alarmes.analitzador3terbolesa",
        "payloadType": "global",
        "x": 250,
        "y": 3040,
        "wires": [
            [
                "81dae85914a79ef6"
            ]
        ]
    },
    {
        "id": "81dae85914a79ef6",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 3040,
        "wires": [
            []
        ]
    },
    {
        "id": "78bcb99cdbd6b822",
        "type": "switch",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "PreviusValue",
        "property": "payload.estat",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "",
                "vt": "prev"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 3080,
        "wires": [
            [
                "495a431e5111cfb7"
            ]
        ]
    },
    {
        "id": "1dd3eaf9f8fe80f9",
        "type": "inject",
        "z": "662afd5c1069609f",
        "g": "93352943ee6bd00d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "alarmes/plc/9/falladaalimentacio",
        "payload": "alarmes.falladaalimentacio",
        "payloadType": "global",
        "x": 240,
        "y": 3080,
        "wires": [
            [
                "78bcb99cdbd6b822"
            ]
        ]
    }
]